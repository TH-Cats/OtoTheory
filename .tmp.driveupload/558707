"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8869],{8869:function(e,r,t){t.r(r),t.d(r,{default:function(){return Z}});var a=t(7437),n=t(2265),o=t(1720),i=t(9168),s=t(6463),l=t(1804),c=t(7152);let d=(0,n.createContext)(null),h=e=>{let{children:r}=e,[t,a]=(0,n.useState)("Degrees"),[o,i]=(0,n.useState)(null),[s,l]=(0,n.useState)(null),h=(0,n.useRef)(!1),m=(0,n.useCallback)(e=>{l(r=>(h.current||r||!e||(c.j("overlay_shown",{page:"chord_progression",control:"chord"}),h.current=!0),e))},[]),u=(0,n.useCallback)(()=>{l(null),c.j("overlay_reset",{page:"chord_progression"})},[]);return n.createElement(d.Provider,{value:{viewMode:t,scale:o,chord:s,setViewMode:e=>{e!==t&&(a(e),c.j("fb_toggle",{page:"chord_progression",value:e}))},setScale:i,setChordFromUser:m,resetChord:u,setScaleLayer:e=>i(e),resetChordLayer:()=>u()}},r)};var m=t(1690),u=t(888),x=t(3561),g=t(4018),p=t(7483),f=t(926),b=t(5618);async function y(e,r){try{let t=window.__SCALES_API__;if(!(null==t?void 0:t.getScalePitchesById))return;let a=t.getScalePitchesById(e,r),n=a.slice(0,Math.min(5,a.length)),o=n.slice(),i=n.slice().reverse().slice(1),s=[...o,...i];for(let e of(await b.h.resume(),s))b.h.playNote(60+e,100),await new Promise(e=>setTimeout(e,100));(0,c.j)("scale_arpeggio_play",{page:"find-chords",scaleId:r,rootPc:e})}catch(e){}}var j=function(e){let{chordQuality:r,rootPc:t,onPreviewScale:o,onResetPreview:i,openGlossary:s,activeScaleId:l}=e,{scales:d}=function(e){switch(e){case"maj":case"maj7":return{scales:["Ionian","Lydian"],why:["maj_ionian","maj_lydian"]};case"min":case"m7":return{scales:["Aeolian","Dorian","Phrygian"],why:["min_aeolian","min_dorian","min_phrygian"]};case"dom7":case"7":return{scales:["Mixolydian","Altered"],why:["dom_mixolydian","dom_altered"]};case"m7b5":return{scales:["Locrian","DiminishedWholeHalf"],why:["m7b5_locrian","dim_wh"]};case"dim":return{scales:["DiminishedWholeHalf","Locrian"],why:["dim_wh","m7b5_locrian"]}}}(r),h=(0,n.useRef)(null);return(0,u.H)(h,{orientation:"horizontal"}),(0,a.jsx)("div",{className:"ot-scale-table","data-testid":"scale-chips","aria-label":"Suggested scales",children:(0,a.jsxs)("details",{className:"rounded border p-2 bg-background/40",children:[(0,a.jsx)("summary",{className:"text-sm cursor-pointer select-none",children:"Suggested scales for this chord"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{role:"tablist","aria-label":"Preview scale",className:"flex flex-wrap gap-2",ref:h,children:d.map((e,n)=>(0,a.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)("button",{role:"tab",className:["chip",l===e?"chip--active":""].join(" "),onClick:()=>{o(e),(0,c.j)("overlay_shown",{control:"scale",scaleId:e}),y(t,e)},"aria-describedby":"why-".concat(e),"data-roving":"item",children:function(e,r,t){if("maj"===r||"maj7"===r){if(0===t)return"Ionian (Major Scale)";if(1===t)return"Lydian (#4 Color)"}if("min"===r||"m7"===r){if(0===t)return"Aeolian (Natural Minor)";if(1===t)return"Dorian (Bright Minor)";if(2===t)return"Phrygian (Dark Minor)"}if("dom7"===r||"7"===r){if(0===t)return"Mixolydian (Dominant)";if(1===t)return"Altered (Tension)"}if("m7b5"===r){if(0===t)return"Locrian (Half-Dim)";if(1===t)return"Whole–Half Dim"}if("dim"===r){if(0===t)return"Whole–Half Dim";if(1===t)return"Locrian"}return e}(e,r,n)}),(0,a.jsx)("button",{type:"button",className:"inline-flex items-center justify-center w-5 h-5 rounded-full text-xs opacity-60 hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/10 transition-opacity",onClick:()=>s(e),"aria-label":"Learn more about ".concat(e),title:"Learn more in Glossary",children:"ⓘ"})]},e))}),(0,a.jsx)("button",{className:"btn-ghost text-xs ml-auto",onClick:i,children:"Reset"})]}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-x-4 gap-y-1 items-center text-xs opacity-80",children:d.map(e=>(0,a.jsx)("span",{id:"why-".concat(e),children:{maj_ionian:"Foundation for major chords – fits all diatonic tones",maj_lydian:"Bright color with raised 4th (#11) – jazz/modern sound",maj_mixolydian:"Dominant-like major – contains the b7 for blues flavor",min_aeolian:"Natural minor foundation – matches all minor scale tones",min_dorian:"Brighter minor with natural 6th – popular in jazz and funk",min_phrygian:"Dark minor with flat 2nd – Spanish/flamenco character",min_harmonic:"Dramatic minor with raised 7th – classical and exotic sound",min_melodic:"Jazz minor – ascending melodic scale with natural 6th and 7th",dom_mixolydian:"Perfect for dominant 7th – contains the b7 tension",dom_altered:"Maximum tension – all alterations (b9, #9, #11, b13)",dom_wholetone:"Symmetrical whole-tone pattern – dreamy, unresolved quality",m7b5_locrian:"Outlines half-diminished chord – starts on the 7th degree",dim_wh:"Symmetrical whole-half pattern – creates tension over diminished chords"}[({Ionian:"maj_ionian",Lydian:"maj_lydian",Aeolian:"min_aeolian",Dorian:"min_dorian",Phrygian:"min_phrygian",Mixolydian:"dom_mixolydian",Locrian:"m7b5_locrian",DiminishedWholeHalf:"dim_wh",Altered:"dom_altered",HarmonicMinor:"min_harmonic",MelodicMinor:"min_melodic",WholeTone:"dom_wholetone"})[e]]||""},"why-".concat(e)))})]})})},v=t(4887);function w(e){let{at:r,quality:t,rootPc:o,onPick:i,onClose:s,page:l="analyze"}=e,d=(0,n.useRef)(null),h=(0,n.useRef)(s);h.current=s;let m=(0,n.useRef)(!1),x=(0,n.useRef)(!1),g=(0,n.useRef)(null);(0,u.H)(g,{orientation:"horizontal"}),(0,n.useEffect)(()=>{var e;m.current||(m.current=!0,(0,c.pc)({control:"forms",open:!0,page:l}));let r=null===(e=d.current)||void 0===e?void 0:e.querySelector("button");function t(e){"Escape"===e.key&&h.current()}function a(e){d.current&&!d.current.contains(e.target)&&h.current()}return null==r||r.focus({preventScroll:!0}),document.addEventListener("keydown",t),document.addEventListener("mousedown",a),()=>{document.removeEventListener("keydown",t),document.removeEventListener("mousedown",a)}},[l]);let p={position:"fixed",left:r.x,top:r.y,zIndex:2147483647,pointerEvents:"auto"},f=e=>{x.current||(x.current=!0,(0,c.pc)({control:"forms",value:e,page:l}),i(e),s())},y=async e=>{try{await b.h.resume();let r=("maj"===t?[0,4,7]:[0,3,7]).map(e=>60+o+e);b.h.playChord(r,"lightStrum",300),(0,c.j)("play_chord",{page:l,source:"form_preview",kind:e})}catch(e){}},j=(0,a.jsxs)("div",{role:"dialog","aria-modal":"true","aria-label":"Chord forms",ref:d,style:p,className:"ot-pop",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("p",{className:"ot-h3",style:{margin:0},children:"Chord Forms"}),(0,a.jsx)("button",{type:"button",onClick:s,className:"text-xs opacity-60 hover:opacity-100 px-2 py-1 rounded hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Close",children:"✕"})]}),(0,a.jsxs)("p",{className:"text-xs opacity-70 mb-3",children:["Select a fingering pattern for ","maj"===t?"major":"minor"," chord"]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",ref:g,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>f("open"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,a.jsx)("div",{className:"font-medium",children:"Open Position"}),(0,a.jsx)("div",{className:"text-xs opacity-70",children:"Uses open strings"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>y("open"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview open position",title:"Preview sound",children:"▶"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>f("barreE"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,a.jsx)("div",{className:"font-medium",children:"Barre (E-shape)"}),(0,a.jsx)("div",{className:"text-xs opacity-70",children:"6th string root"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>y("barreE"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview E-shape barre",title:"Preview sound",children:"▶"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>f("barreA"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,a.jsx)("div",{className:"font-medium",children:"Barre (A-shape)"}),(0,a.jsx)("div",{className:"text-xs opacity-70",children:"5th string root"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>y("barreA"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview A-shape barre",title:"Preview sound",children:"▶"})]})]}),(0,a.jsx)("p",{className:"ot-hint mt-3",children:"Right-click or long-press a chord to open."})]});return"undefined"!=typeof document?(0,v.createPortal)(j,document.body):j}function k(e){return(e%12+12)%12}function N(e,r){let t=k(r);for(let r=1;r<=12;r++)if(k(e+r)===t)return r;return 1}let C={1:e=>{let{rootPc:r}=e;return[{chord:"".concat((0,f.Wo)(r),"maj7"),reason:"Richer tonic sound with major 7th",examples:["The Girl from Ipanema","Fly Me to the Moon"]},{chord:"".concat((0,f.Wo)(r),"6"),reason:"Jazz tonic with added 6th",examples:["All the Things You Are","Autumn Leaves"]},{chord:"".concat((0,f.Wo)((0,f.Jt)(r+9)),"m"),reason:"Relative minor shares the same notes",examples:["Let It Be","No Woman No Cry"]}]},2:e=>{let{rootPc:r,key:t}=e;return[{chord:"".concat((0,f.Wo)(r),"m7"),reason:"Jazz ii with minor 7th",examples:["Autumn Leaves","Fly Me to the Moon"]},{chord:(0,f.Wo)((0,f.Jt)(t.tonic+5)),reason:"IV chord shares subdominant function",examples:["Let It Be","Hey Jude"]}]},4:e=>{let{rootPc:r,key:t}=e;return[{chord:"".concat((0,f.Wo)(r),"maj7"),reason:"Lydian color with major 7th",examples:["The Girl from Ipanema","Dreams (Fleetwood Mac)"]},{chord:"".concat((0,f.Wo)((0,f.Jt)(t.tonic+2)),"m"),reason:"ii chord shares subdominant function",examples:["Autumn Leaves","Fly Me to the Moon"]},{chord:"".concat((0,f.Wo)(r),"m"),reason:"Borrowed minor IV for color",examples:["Yesterday","Creep"]}]},5:e=>{let{rootPc:r,key:t}=e;return[{chord:"".concat((0,f.Wo)(r),"7"),reason:"Dominant 7th creates strong tension",examples:["Sweet Home Alabama","Twist and Shout"]},{chord:"".concat((0,f.Wo)(r),"sus4"),reason:"Suspended 4th delays resolution",examples:["Pinball Wizard","The Edge of Glory"]},{chord:"".concat((0,f.Wo)((0,f.Jt)(t.tonic+11)),"dim"),reason:"vii\xb0 shares dominant function",examples:["Girl from Ipanema","Michelle"]}]},6:e=>{let{rootPc:r,key:t}=e;return[{chord:"".concat((0,f.Wo)(r),"m7"),reason:"Jazz minor with added 7th",examples:["Stairway to Heaven","Hotel California"]},{chord:(0,f.Wo)(t.tonic),reason:"Relative major shares the same notes",examples:["Let It Be","Hey Jude"]}]}},_={1:e=>{let{rootPc:r}=e;return[{chord:"".concat((0,f.Wo)(r),"m7"),reason:"Natural minor 7th",examples:["Stairway to Heaven","Smooth"]},{chord:"".concat((0,f.Wo)(r),"m6"),reason:"Minor 6th for Dorian color",examples:["Scarborough Fair","So What"]},{chord:(0,f.Wo)((0,f.Jt)(r+3)),reason:"Relative major (bIII) shares notes",examples:["Stairway to Heaven","All Along the Watchtower"]}]},4:e=>{let{rootPc:r}=e;return[{chord:"".concat((0,f.Wo)(r),"m7"),reason:"Minor 7th for subdominant color",examples:["Light My Fire","Losing My Religion"]}]},5:e=>{let{rootPc:r,quality:t}=e;return"min"===t?[{chord:"".concat((0,f.Wo)(r),"7"),reason:"Raised 3rd (V7) for stronger resolution",examples:["Stairway to Heaven","House of the Rising Sun"]}]:[{chord:"".concat((0,f.Wo)(r),"7"),reason:"Dominant 7th for tension",examples:["Smooth","Black Magic Woman"]}]}};var S=t(4120);function M(e){let{substitute:r,onPlay:t,onAdd:n}=e;return(0,a.jsxs)("div",{className:"rounded border p-2 bg-white dark:bg-neutral-900/50 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-base",children:r.chord}),(0,a.jsx)("div",{className:"text-sm opacity-80 mt-0.5",children:r.reason})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{type:"button",onClick:()=>t(r),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview ".concat(r.chord),title:"Preview sound","data-roving":"item",children:"▶"}),n&&(0,a.jsx)("button",{type:"button",onClick:()=>n(r),className:"px-2 py-1 text-xs rounded border bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition-colors","aria-label":"Add ".concat(r.chord," to progression"),title:"Add to progression",children:"+ Add"})]})]}),r.examples&&r.examples.length>0&&(0,a.jsxs)("div",{className:"text-xs opacity-60 mt-1 flex items-center gap-1",children:[(0,a.jsx)("span",{className:"opacity-70",children:"Examples:"}),(0,a.jsx)("span",{children:r.examples.join(" \xb7 ")})]})]})}var A=function(e){let{rootPc:r,quality:t,degree:o,keyContext:i,onAdd:s,page:l="find-chords"}=e,d=(0,n.useRef)(null);(0,u.H)(d,{orientation:"horizontal"});let h=(0,n.useMemo)(()=>({rootPc:r,quality:t,degree:o,key:i}),[r,t,o,i]),m=(0,n.useMemo)(()=>(function(e){let{degree:r,key:t}=e,a=("Major"===t.mode?C:_)[r];return(a?a(e):function(e){let{rootPc:r,quality:t}=e,a=[];return"maj"===t?a.push({chord:"".concat((0,f.Wo)(r),"maj7"),reason:"Added major 7th for richer sound"}):"min"===t&&a.push({chord:"".concat((0,f.Wo)(r),"m7"),reason:"Added minor 7th for jazz flavor"}),a}(e)).slice(0,3)})(h),[h]);(0,n.useEffect)(()=>{m.length>0&&(0,c.j)("substitute_shown",{page:l,rootPc:r,quality:t,degree:o,count:m.length})},[m,l,r,t,o]);let x=(0,n.useCallback)(async e=>{try{await b.h.resume();let r=(0,S.h)(e.chord);if(!r||0===r.length){console.warn("Failed to parse chord: ".concat(e.chord));return}b.h.playChord(r,"lightStrum",300),(0,c.j)("play_chord",{page:l,source:"substitute_preview",chord:e.chord})}catch(e){console.error("Failed to play substitute chord:",e)}},[l]),g=(0,n.useCallback)(e=>{s&&(s(e.chord),(0,c.j)("substitute_add",{page:l,rootPc:r,originalQuality:t,substituteChord:e.chord}))},[s,l,r,t]);return 0===m.length?null:(0,a.jsxs)("details",{className:"rounded border p-2 bg-background/40 mt-2",children:[(0,a.jsxs)("summary",{className:"text-sm cursor-pointer select-none font-medium",children:["Substitute Chords (",m.length,")"]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs opacity-70 mb-3 px-1",children:"Alternative chords with similar harmonic function"}),(0,a.jsx)("div",{className:"space-y-2",ref:d,children:m.map((e,r)=>(0,a.jsx)(M,{substitute:e,onPlay:x,onAdd:s?g:void 0},"".concat(e.chord,"-").concat(r)))})]})]})},P=t(6238);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let L=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase()),z=e=>{let r=W(e);return r.charAt(0).toUpperCase()+r.slice(1)},I=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()},E=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let R=(0,n.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:c,...d}=e;return(0,n.createElement)("svg",{ref:r,...D,width:a,height:a,stroke:t,strokeWidth:i?24*Number(o)/Number(a):o,className:I("lucide",s),...!l&&!E(d)&&{"aria-hidden":"true"},...d},[...c.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(l)?l:[l]])}),H=(e,r)=>{let t=(0,n.forwardRef)((t,a)=>{let{className:o,...i}=t;return(0,n.createElement)(R,{ref:a,iconNode:r,className:I("lucide-".concat(L(z(e))),"lucide-".concat(e),o),...i})});return t.displayName=z(e),t},B=H("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),F=H("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),q=H("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),T={Basic:{icon:B,color:"text-blue-600",bgColor:"bg-blue-50"},Modes:{icon:F,color:"text-purple-600",bgColor:"bg-purple-50"},"Pentatonic & Blues":{icon:q,color:"text-orange-600",bgColor:"bg-orange-50"},"Minor family":{icon:H("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),color:"text-red-600",bgColor:"bg-red-50"},Symmetrical:{icon:H("hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]),color:"text-green-600",bgColor:"bg-green-50"},Advanced:{icon:H("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),color:"text-indigo-600",bgColor:"bg-indigo-50"}};var G=t(1774);let J=H("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),O=H("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var V=t(4591);function Z(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:"ot-page",children:"Loading..."}),children:(0,a.jsx)(K,{})})}function K(){let e=(0,s.useSearchParams)(),r=(0,n.useMemo)(()=>f.Mw,[]),t=p.l7,[d,b]=(0,n.useState)(e.get("key")||"C"),y="minor"===e.get("mode")?"Aeolian":"Ionian",[v,k]=(0,n.useState)(y),C=(0,n.useMemo)(()=>{var e;let r=t.find(e=>e.id===v);return(null!==(e=null==r?void 0:r.degrees.length)&&void 0!==e?e:7)===7},[v]);(0,n.useMemo)(()=>{let e=t.find(e=>e.id===v);if(7!==e.degrees.length)return[];let r="Aeolian"===e.id?"minor":"major";return(0,i.I)({tonic:d,quality:r,scale:e.id}).chords},[d,v]),(0,n.useMemo)(()=>"Aeolian"===v?"minor":"major",[v]);let _=(0,n.useRef)(null);(0,u.H)(_,{orientation:"horizontal"});let S=(0,n.useRef)(null);(0,u.H)(S,{orientation:"horizontal"});let[M,P]=(0,n.useState)("degrees"),[L,W]=(0,n.useState)(0),[z,I]=(0,n.useState)(null),[E,D]=(0,n.useState)(null),[R,H]=(0,n.useState)(null),[B,F]=(0,n.useState)(null),[q,T]=(0,n.useState)(null),[G,J]=(0,n.useState)(null),O=(0,n.useCallback)(()=>{T(null),J(null)},[]);(0,n.useEffect)(()=>{},[M,z]);let{selectKey:Z}=(0,x._)(),K=e=>{b(e);let t="major"==("Aeolian"===v?"minor":"major")?"Major":"Minor";Z({tonic:r.indexOf(e),mode:t}),(0,c.j)("key_pick",{page:"find-chords",key:e,mode:t}),Y()};async function Y(){Z({tonic:r.indexOf(d),mode:"major"==("Aeolian"===v?"minor":"major")?"Major":"Minor"}),I(null)}(0,n.useEffect)(()=>{Y()},[]);let $=(0,n.useMemo)(()=>r.indexOf(d),[d]),X=(0,n.useMemo)(()=>v,[v]),ee=(0,n.useCallback)(()=>{P("degrees"),W(0),I(null),D(null),H(null),F(null),O(),(0,c.j)("overlay_reset",{page:"find-chords",scale:v,key:d})},[$,X,O]);return(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&ee()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[ee]),f.Mw,(0,a.jsx)(h,{children:(0,a.jsxs)("main",{className:"ot-page ot-stack","data-page":"find-chords",children:[(0,a.jsx)("h1",{className:"sr-only",children:"Find Chords"}),(0,a.jsxs)("section",{className:"ot-card",children:[(0,a.jsx)("h2",{className:"ot-h2",children:"Select Key & Scale"}),(0,a.jsxs)("div",{className:"mt-3 grid sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"Key"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",role:"tablist","aria-label":"Select key",ref:_,children:[["C","C#","D","Eb","E","F"],["F#","G","Ab","A","Bb","B"]].map((e,r)=>(0,a.jsx)("div",{ref:0===r?_:void 0,className:"flex flex-wrap gap-2",children:e.map(e=>(0,a.jsx)("button",{role:"tab","aria-selected":d===e,tabIndex:d===e?0:-1,className:["chip","chip--key",d===e?"chip--active":""].join(" "),"data-roving":"item",onClick:()=>{K(e)},title:"Key ".concat(e),children:e},e))},"krow-".concat(r)))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"scale",className:"block text-sm mb-1",children:[(0,a.jsx)("span",{children:"Scale"}),(()=>{var e,r,n,o;let i=t.find(e=>e.id===v),s=(0,g.p3)(0,i.id).map(e=>f.Mw[e]).join(" "),l="".concat(i.group," scale — ").concat(i.degrees.length,"-note pattern.");return(0,a.jsx)(V.Z,{title:i.display.en,className:"ml-2",linkHref:"/resources/glossary",linkLabel:"Glossary",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsx)("b",{children:"Degrees:"})," ",i.degrees.join(" ")]}),(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsx)("b",{children:"Notes in C:"})," ",s]}),(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsx)("b",{children:"About:"})," ",null!==(o=null===(e=i.info)||void 0===e?void 0:e.oneLiner)&&void 0!==o?o:l]}),!!(null===(n=i.info)||void 0===n?void 0:null===(r=n.examples)||void 0===r?void 0:r.length)&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("b",{className:"text-xs",children:"Song examples"}),(0,a.jsx)("ul",{className:"text-xs mt-1 space-y-1",children:i.info.examples.map((e,r)=>(0,a.jsxs)("li",{children:[e.url?(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.title}):e.title,e.artist?" — ".concat(e.artist):"",e.cue?" (".concat(e.cue,")"):""]},r))})]})]})})})()]}),(0,a.jsx)(Q,{selectedScaleId:v,onScaleSelect:e=>{k(e),r.indexOf(d),(0,c.j)("scale_pick",{page:"find-chords",scale:e,key:d}),Y()}})]})]})]}),(0,a.jsxs)("section",{className:"ot-card",children:[(0,a.jsx)("h2",{className:"ot-h2",children:"Result"}),(0,a.jsxs)("div",{className:"ot-stack",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"ot-h3 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Diatonic"}),(0,a.jsxs)(V.Z,{title:"Diatonic chords",linkHref:"/resources/glossary",linkLabel:"Glossary",children:[(0,a.jsx)("p",{className:"text-sm",children:"Chords built only from the key’s scale tones (I–ii–iii–IV–V–vi–vii\xb0)."}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Capo rows show the shapes you fret. The sounding chord tones on the fretboard are the same as the Open row."}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"See details in Reference → Capo & Shapes"})]})]}),!C&&(0,a.jsx)("p",{className:"text-xs text-foreground/70 mt-1",children:"This scale is not heptatonic; Roman numerals are hidden. Diatonic suggestions are limited to the Open row."}),(0,a.jsx)("div",{"data-testid":C?void 0:"diatonic-open-only",children:(0,a.jsx)(m.Z,{selectedId:R,onSelectId:e=>{R!==e&&H(e)},onPick:e=>{let{pcs:r}=e;I(r.map(e=>f.Mw[e])),F(r),O(),(0,c.j)("diatonic_pick",{page:"find-chords",id:R,scale:v,key:d})}})})]}),R&&B&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(j,{chordQuality:U(B),rootPc:$,onPreviewScale:e=>{D(e)},onResetPreview:()=>{D(null),ee()},openGlossary:e=>{try{window.open("/resources/glossary","_blank")}catch(e){}},activeScaleId:E})}),R&&B&&(0,a.jsx)(A,{rootPc:$,quality:U(B),degree:parseInt(R.split("-")[1]||"0",10)+1,keyContext:{tonic:r.indexOf(d),mode:"Aeolian"===v?"Minor":"Major"},page:"find-chords"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"ot-h3 flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Fretboard"}),(0,a.jsxs)("span",{ref:S,className:"flex items-center gap-2",role:"tablist","aria-orientation":"horizontal","aria-label":"Fretboard notation",children:[(0,a.jsx)("button",{role:"tab","aria-selected":"degrees"===M,tabIndex:"degrees"===M?0:-1,className:["chip","degrees"===M?"chip--on":""].join(" "),"data-roving":"item",onClick:()=>{O(),P("degrees")},children:"Degrees"}),(0,a.jsx)("button",{role:"tab","aria-selected":"names"===M,tabIndex:"names"===M?0:-1,className:["chip","names"===M?"chip--on":""].join(" "),"data-roving":"item",onClick:()=>{O(),P("names")},children:"Names"}),R&&(0,a.jsx)("button",{role:"tab","aria-selected":!1,tabIndex:-1,className:"chip",onClick:ee,"aria-label":"Reset",children:"Reset"})]})]}),(0,a.jsx)(l.Z,{overlay:{viewMode:"sounding",capo:L,display:M,scaleRootPc:$,scaleType:null!=E?E:X,showScaleGhost:!!R,chordNotes:null!=z?z:void 0,context:{chordRootPc:B&&B.length?B[0]:void 0,quality:(()=>{let e=null!=B?B:[];return"min"===U(e.length?e:[$])?"min":"maj"})()}},onRequestForms:(e,r)=>{T({at:e,rootPc:r.rootPc,quality:r.quality})},formShape:G})]})]})]}),(0,a.jsx)("section",{className:"ot-card ad-placeholder","aria-label":"Ad",children:(0,a.jsx)(o.default,{page:"find_chords",format:"horizontal"})}),q&&(0,a.jsx)(w,{at:q.at,quality:q.quality,rootPc:q.rootPc,page:"find-chords",onPick:e=>{var r,t,a;J((r=e,t=q.quality,a=q.rootPc,"open"===r?{kind:"open",quality:t,rootPc:a,rootString:6,dots:"maj"===t?[{string:6,fret:0,deg:"1"},{string:5,fret:2,deg:"5"},{string:4,fret:2,deg:"1"},{string:3,fret:1,deg:"3"},{string:2,fret:0,deg:"5"},{string:1,fret:0,deg:"1"}]:[{string:6,fret:0,deg:"1"},{string:5,fret:2,deg:"5"},{string:4,fret:2,deg:"1"},{string:3,fret:0,deg:"b3"},{string:2,fret:0,deg:"5"},{string:1,fret:0,deg:"1"}]}:"barreE"===r?function(e,r){let t=N(4,r);return{kind:"barreE",quality:e,rootPc:r,rootString:6,dots:[{string:6,fret:t,deg:"1"},{string:5,fret:t+2,deg:"5"},{string:4,fret:t+2,deg:"1"},{string:3,fret:"maj"===e?t+1:t,deg:"maj"===e?"3":"b3"},{string:2,fret:t,deg:"5"},{string:1,fret:t,deg:"1"}],barre:{stringFrom:6,fret:t}}}(t,a):function(e,r){let t=N(9,r);return{kind:"barreA",quality:e,rootPc:r,rootString:5,dots:[{string:5,fret:t,deg:"1"},{string:4,fret:t+2,deg:"5"},{string:3,fret:"maj"===e?t+2:t,deg:"maj"===e?"3":"b3"},{string:2,fret:t+2,deg:"1"},{string:1,fret:t,deg:"5"}],barre:{stringFrom:5,fret:t}}}(t,a)))},onClose:()=>T(null)})]})})}function U(e){let r=new Set(e.map(r=>(r-e[0]+12)%12));return r.has(0)&&r.has(4)&&r.has(7)?"maj":r.has(0)&&r.has(3)&&r.has(7)?"min":r.has(0)&&r.has(3)&&r.has(6)?"dim":r.has(0)&&r.has(4)&&r.has(7)&&r.has(10)?"dom7":r.has(0)&&r.has(3)&&r.has(6)&&r.has(10)?"m7b5":"maj"}function Q(e){let{selectedScaleId:r,onScaleSelect:t}=e,[o,i]=(0,n.useState)(new Set(["Basic"])),s=(0,P.tG)(),l=e=>({Ionian:"major",Aeolian:"naturalMinor",Dorian:"dorian",Phrygian:"phrygian",Lydian:"lydian",Mixolydian:"mixolydian",Locrian:"locrian",MajorPentatonic:"majPent",MinorPentatonic:"minPent",Blues:"bluesMinor",HarmonicMinor:"harmonicMinor",MelodicMinor:"melodicMinor",DiminishedWH:"dimWholeHalf",DiminishedHW:"dimHalfWhole",Lydianb7:"lydianb7",Mixolydianb6:"mixolydianb6",PhrygianDominant:"phrygDominant",Altered:"altered",WholeTone:"wholeTone"})[e]||"major",c=e=>{i(r=>{let t=new Set(r);return t.has(e)?t.delete(e):t.add(e),t})};return(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>{let n=(0,P.f6)(e),i=o.has(e),s=T[e],d=s.icon;return(0,a.jsxs)("div",{className:"border rounded-lg",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>c(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(s.bgColor),children:(0,a.jsx)(d,{className:"w-5 h-5 ".concat(s.color)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:(0,P.zk)(e,"en")}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[n.length," scales"]})]})]}),i?(0,a.jsx)(J,{size:20}):(0,a.jsx)(O,{size:20})]}),i&&(0,a.jsx)("div",{className:"border-t p-2 space-y-1",children:n.map(e=>{l(e.id);let n=r===e.id;return(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("button",{className:"flex-1 text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center gap-2 ".concat(n?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:r=>{r.stopPropagation(),t(e.id)},children:(0,a.jsx)("span",{children:(()=>{let r=window.location.pathname.startsWith("/ja/");return(0,P.ED)(e,r?"ja":"en")})()})}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,a.jsx)(V.Z,{title:(()=>{let r=window.location.pathname.startsWith("/ja/");return(0,P.ED)(e,r?"ja":"en")})(),placement:"top",trigger:(0,a.jsx)("button",{type:"button",className:"w-6 h-6 rounded-full bg-amber-50/90 hover:bg-amber-100 ring-1 ring-amber-300/60 shadow-sm flex items-center justify-center","aria-label":"Scale info",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 0 1 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"})})}),children:(0,a.jsx)(G.Z,{scaleId:e.id})})})]},e.id)})})]},e)})})}}}]);
module.exports=[88660,a=>{"use strict";function b(a,b){return Array(b+1).join(a)}function c(a){return"number"==typeof a}function d(a,b){return Math.pow(2,(a-69)/12)*(b||440)}a.s(["acc",()=>l,"alt",()=>o,"build",()=>function a(d,e,f){return null==d?null:d.step?a(d.step,d.alt,d.oct):d<0||d>6?null:"CDEFGAB".charAt(d)+(c(e)?e<0?b("b",-e):b("#",e):"")+(c(f)?""+f:"")},"chroma",()=>p,"freq",()=>j,"letter",()=>k,"midi",()=>i,"oct",()=>q,"parse",()=>h,"pc",()=>m,"regex",()=>f,"step",()=>n]);var e=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function f(){return e}var g=[0,2,4,5,7,9,11];function h(a,b,c){if("string"!=typeof a)return null;var f=e.exec(a);if(!f||!b&&f[4])return null;var h={letter:f[1].toUpperCase(),acc:f[2].replace(/x/g,"##")};h.pc=h.letter+h.acc,h.step=(h.letter.charCodeAt(0)+3)%7,h.alt="b"===h.acc[0]?-h.acc.length:h.acc.length;var i=g[h.step]+h.alt;return h.chroma=i<0?12+i:i%12,f[3]&&(h.oct=+f[3],h.midi=i+12*(h.oct+1),h.freq=d(h.midi,c)),b&&(h.tonicOf=f[4]),h}function i(a){if((c(a)||"string"==typeof a)&&a>=0&&a<128)return+a;var b=h(a);return b&&void 0!==b.midi?b.midi:null}function j(a,b){var c=i(a);return null===c?null:d(c,b)}function k(a){return(h(a)||{}).letter}function l(a){return(h(a)||{}).acc}function m(a){return(h(a)||{}).pc}function n(a){return(h(a)||{}).step}function o(a){return(h(a)||{}).alt}function p(a){return(h(a)||{}).chroma}function q(a){return(h(a)||{}).oct}},65068,(a,b,c)=>{"use strict";var d=a.r(88660);function e(a,b){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof e))return new e(a);this.nameToUrl=b||e.nameToUrl,this.ctx=a,this.instruments={},this.promises=[]}e.prototype.onready=function(a){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(a)},e.prototype.instrument=function(a,b){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var c,f,g=this.ctx;if((a=a||"default")in this.instruments)return this.instruments[a];var h={name:a,play:(c=g,f=(f=b)||{},function(a,b,e,g){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var h=a>0&&a<129?+a:d.midi(a),i=h?d.midiToFreq(h,440):null;if(i){e=e||.2;var j=(g=g||{}).destination||f.destination||c.destination,k=g.vcoType||f.vcoType||"sine",l=g.gain||f.gain||.4,m=c.createOscillator();m.type=k,m.frequency.value=i;var n=c.createGain();return n.gain.value=l,m.connect(n),n.connect(j),m.start(b),e>0&&m.stop(b+e),m}})};if(this.instruments[a]=h,"default"!==a){var i=e.instrument(g,a,b).then(function(a){return h.play=a.play,h});this.promises.push(i),h.onready=function(a){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),i.then(a)}}else h.onready=function(a){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),a()};return h},e.loadBuffers=function(a,b,c){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),e.instrument(a,b,c).then(function(a){return a.buffers})},e.noteToMidi=d.midi,b.exports=e},74529,(a,b,c)=>{"use strict";b.exports={decode:function(a,b){for(var c,d,e,f=a.replace(/[^A-Za-z0-9\+\/]/g,""),g=f.length,h=b?Math.ceil((3*g+1>>2)/b)*b:3*g+1>>2,i=new Uint8Array(h),j=0,k=0,l=0;l<g;l++)if(e=3&l,j|=((c=f.charCodeAt(l))>64&&c<91?c-65:c>96&&c<123?c-71:c>47&&c<58?c+4:43===c?62:63*(47===c))<<18-6*e,3===e||g-l==1){for(d=0;d<3&&k<h;d++,k++)i[k]=j>>>(16>>>d&24)&255;j=0}return i}}},87084,(a,b,c)=>{"use strict";b.exports=function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;b&&(e.responseType=b),e.open("GET",a),e.onload=function(){200===e.status?c(e.response):d(Error(e.statusText))},e.onerror=function(){d(Error("Network Error"))},e.send()})}},20336,(a,b,c)=>{"use strict";var d=a.r(74529);function e(a){return function(b){return"string"==typeof b&&a.test(b)}}function f(a,b){return"string"==typeof a?a+b:"function"==typeof a?a(b):b}function g(a,b,c,d){var e,f,g=b instanceof ArrayBuffer?h:i(b)?j:(e=b)&&"function"==typeof e.then?k:l(b)?m:(f=b)&&"object"==typeof f?n:o(b)?p:q(b)?r:s(b)?t:null;return g?g(a,b,c||{}):d?Promise.resolve(d):Promise.reject("Source not valid ("+b+")")}function h(a,b,c){return new Promise(function(c,d){a.decodeAudioData(b,function(a){c(a)},function(){d("Can't decode audio data ("+b.slice(0,30)+"...)")})})}g.fetch=a.r(87084);var i=e(/\.(mp3|wav|ogg)(\?.*)?$/i);function j(a,b,c){var d=f(c.from,b);return g(a,g.fetch(d,"arraybuffer"),c)}function k(a,b,c){return b.then(function(b){return g(a,b,c)})}var l=Array.isArray;function m(a,b,c){return Promise.all(b.map(function(b){return g(a,b,c,b)}))}function n(a,b,c){var d={};return Promise.all(Object.keys(b).map(function(e){if(c.only&&-1===c.only.indexOf(e))return null;var f=b[e];return g(a,f,c,f).then(function(a){d[e]=a})})).then(function(){return d})}var o=e(/\.json(\?.*)?$/i);function p(a,b,c){var d=f(c.from,b);return g(a,g.fetch(d,"text").then(JSON.parse),c)}var q=e(/^data:audio/);function r(a,b,c){var e=b.indexOf(",");return g(a,d.decode(b.slice(e+1)).buffer,c)}var s=e(/\.js(\?.*)?$/i);function t(a,b,c){var d=f(c.from,b);return g(a,g.fetch(d,"text").then(u),c)}function u(a){var b=a.indexOf("MIDI.Soundfont.");if(b<0)throw Error("Invalid MIDI.js Soundfont format");b=a.indexOf("=",b)+2;var c=a.lastIndexOf(",");return JSON.parse(a.slice(b,c)+"}")}b.exports&&(b.exports=g)},21819,(a,b,c)=>{b.exports=function(a){var b,c,g,h=a.createGain(),i=(c=(b=a).createBufferSource(),(g=b.createBuffer(1,2,b.sampleRate)).getChannelData(0).set(e),c.buffer=g,c.loop=!0,h._voltage=c),j=f(i),k=f(i),l=f(i);return h._startAmount=f(k),h._endAmount=f(l),h._multiplier=f(j),h._multiplier.connect(h),h._startAmount.connect(h),h._endAmount.connect(h),h.value=j.gain,h.startValue=k.gain,h.endValue=l.gain,h.startValue.value=0,h.endValue.value=0,Object.defineProperties(h,d),h};var d={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(a){var b=this._multiplier.gain,c=this._startAmount.gain,d=this._endAmount.gain;this._voltage.start(a),this._decayFrom=this._decayFrom=a+this.attack,this._startedAt=a;var e=this.sustain;b.cancelScheduledValues(a),c.cancelScheduledValues(a),d.cancelScheduledValues(a),d.setValueAtTime(0,a),this.attack?(b.setValueAtTime(0,a),b.linearRampToValueAtTime(1,a+this.attack),c.setValueAtTime(1,a),c.linearRampToValueAtTime(0,a+this.attack)):(b.setValueAtTime(1,a),c.setValueAtTime(0,a)),this.decay&&b.setTargetAtTime(e,this._decayFrom,g(this.decay))}},stop:{value:function(a,b){b&&(a-=this.release);var c=a+this.release;if(this.release){var d=this._multiplier.gain,e=this._startAmount.gain,f=this._endAmount.gain;d.cancelScheduledValues(a),e.cancelScheduledValues(a),f.cancelScheduledValues(a);var h=g(this.release);if(this.attack&&a<this._decayFrom){var i,j,k,l,m,n=(i=0,j=1,k=this._startedAt,l=this._decayFrom,(m=0+(a-k)/(l-k)*(1-i))<=i&&(m=i),m>=j&&(m=j),m);d.linearRampToValueAtTime(n,a),e.linearRampToValueAtTime(1-n,a),e.setTargetAtTime(0,a,h)}f.setTargetAtTime(1,a,h),d.setTargetAtTime(0,a,h)}return this._voltage.stop(c),c}},onended:{get:function(){return this._voltage.onended},set:function(a){this._voltage.onended=a}}},e=new Float32Array([1,1]);function f(a){var b=a.context.createGain();return a.connect(b),b}function g(a){return Math.log(a+1)/Math.log(100)}},8097,(a,b,c)=>{"use strict";var d=a.r(21819),e={},f={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function g(a){return"number"==typeof a}var h=["attack","decay","sustain","release"];b.exports=function(a,b,c){var i=!1,j=0,k={},l=a.createGain();l.gain.value=1;var m=Object.assign({},f,c),n={context:a,out:l,opts:m};return b instanceof AudioBuffer?n.buffer=b:n.buffers=b,n.start=function(b,c,f){if(n.buffer&&null!==b)return n.start(null,b,c);var o,p,q,r,s,t,u,v,w,x,y,z,A=b?n.buffers[b]:n.buffer;if(!A)return void console.warn("Buffer "+b+" not found.");if(!i)return void console.warn("SamplePlayer not connected to any node.");var B=f||e;c=Math.max(a.currentTime,c||0),n.emit("start",c,b,B);var C=(o=b,p=A,q=B,(r=a.createGain()).gain.value=0,r.connect(l),s=a,t=q,u=m,v=d(s),w=t.adsr||u.adsr,h.forEach(function(a,b){w?v[a]=w[b]:v[a]=t[a]||u[a]}),v.value.value=g(t.gain)?t.gain:g(u.gain)?u.gain:1,r.env=v,r.env.connect(r.gain),r.source=a.createBufferSource(),r.source.buffer=p,r.source.connect(r),r.source.loop=q.loop||m.loop,r.source.playbackRate.value=(x=q.cents||m.cents)?Math.pow(2,x/1200):1,r.source.loopStart=q.loopStart||m.loopStart,r.source.loopEnd=q.loopEnd||m.loopEnd,r.stop=function(b){var c=b||a.currentTime;n.emit("stop",c,o);var d=r.env.stop(c);r.source.stop(d)},r);return y=0,(z=C).id=j++,k[z.id]=z,z.source.onended=function(){var b=a.currentTime;z.source.disconnect(),z.env.disconnect(),z.disconnect(),n.emit("ended",b,z.id,z)},C.id=z.id,C.env.start(c),C.source.start(c),n.emit("started",c,C.id,C),B.duration&&C.stop(c+B.duration),C},n.play=function(a,b,c){return n.start(a,b,c)},n.stop=function(a,b){var c;return(b=b||Object.keys(k)).map(function(b){return(c=k[b])?(c.stop(a),c.id):null})},n.connect=function(a){return i=!0,l.connect(a),n},n.emit=function(a,b,c,d){n.onevent&&n.onevent(a,b,c,d);var e=n["on"+a];e&&e(b,c,d)},n}},52414,(a,b,c)=>{b.exports=function(a){return a.on=function(b,c){if(1==arguments.length&&"function"==typeof b)return a.on("event",b);var d,e,f="on"+b,g=a[f];return a[f]=g?(d=g,e=c,function(a,b,c,f){d(a,b,c,f),e(a,b,c,f)}):c,a},a}},67608,(a,b,c)=>{"use strict";var d=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,e=[0,2,4,5,7,9,11];function f(a,b,c){if("string"!=typeof a)return null;var f=d.exec(a);if(!f||!b&&f[4])return null;var h={letter:f[1].toUpperCase(),acc:f[2].replace(/x/g,"##")};return h.pc=h.letter+h.acc,h.step=(h.letter.charCodeAt(0)+3)%7,h.alt="b"===h.acc[0]?-h.acc.length:h.acc.length,h.chroma=e[h.step]+h.alt,f[3]&&(h.oct=+f[3],h.midi=h.chroma+12*(h.oct+1),h.freq=g(h.midi,c)),b&&(h.tonicOf=f[4]),h}function g(a,b){return Math.pow(2,(a-69)/12)*(b||440)}var h={parse:f,regex:function(){return d},midiToFreq:g};["letter","acc","pc","step","alt","chroma","oct","midi","freq"].forEach(function(a){h[a]=function(b){var c=f(b);return c&&void 0!==c[a]?c[a]:null}}),b.exports=h},50685,(a,b,c)=>{"use strict";var d=a.r(67608),e=function(a){return null!==a&&a!==[]&&a>=0&&a<129?+a:d.midi(a)};b.exports=function(a){if(a.buffers){var b,c,d=a.opts.map,f="function"==typeof d?d:e,g=function(a){return a?f(a)||a:null};b=a.buffers,c=g,a.buffers=Object.keys(b).reduce(function(a,d){return a[c(d)]=b[d],a},{});var h=a.start;a.start=function(a,b,c){var d=g(a),e=d%1;return e&&(d=Math.floor(d),c=Object.assign(c||{},{cents:Math.floor(100*e)})),h(d,b,c)}}return a}},51290,(a,b,c)=>{"use strict";var d=Array.isArray,e={};b.exports=function(a){return a.schedule=function(b,c){var f,g,h,i,j=a.context.currentTime,k=b<j?j:b;return a.emit("schedule",k,c),c.map(function(b){var c;return b?(d(b)?(f=b[0],g=b[1]):(f=b.time,g=b),(c=g)&&"object"==typeof c?(h=g.name||g.key||g.note||g.midi||null,i=g):(h=g,i=e),a.start(h,k+(f||0),i)):null})},a}},46948,(a,b,c)=>{b.exports=(function b(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j=a.t;return!i&&j?j(h,!0):g(h,!0)}var k=d[h]={exports:{}};c[h][0].call(k.exports,function(a){return f(c[h][1][a]||a)},k,k.exports,b,c,d,e)}return d[h].exports}for(var g=a.t,h=0;h<e.length;h++)f(e[h]);return f})({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(a){return new function(a){if(this._event=a,this._data=a.data,this.receivedTime=a.receivedTime,this._data&&this._data.length<2)return void console.warn("Illegal MIDI message of length",this._data.length);switch(this._messageCode=240&a.data[0],this.channel=15&a.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&a.data[1],this.velocity=127&a.data[2];break;case 144:this.messageType="noteon",this.key=127&a.data[1],this.velocity=127&a.data[2];break;case 160:this.messageType="keypressure",this.key=127&a.data[1],this.pressure=127&a.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&a.data[1],this.controllerValue=127&a.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=a.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&a.data[1];break;case 224:this.messageType="pitchbendchange";var b=127&a.data[2],c=127&a.data[1];this.pitchBend=(b<<8)+c}}(a)},b.exports=c.default},{}]},{},[1])(1)},27360,(a,b,c)=>{var d=a.r(46948);b.exports=function(a){return a.listenToMidi=function(b,c){var e={},f=c||{},g=f.gain||function(a){return a/127};return b.onmidimessage=function(b){var c=b.messageType?b:d(b);if("noteon"===c.messageType&&0===c.velocity&&(c.messageType="noteoff"),!f.channel||c.channel===f.channel)switch(c.messageType){case"noteon":e[c.key]=a.play(c.key,0,{gain:g(c.velocity)});break;case"noteoff":e[c.key]&&(e[c.key].stop(),delete e[c.key])}},a},a}},67018,(a,b,c)=>{"use strict";var d=a.r(8097),e=a.r(52414),f=a.r(50685),g=a.r(51290),h=a.r(27360);b.exports&&(b.exports=function(a,b,c){return h(g(f(e(d(a,b,c)))))})},61845,(a,b,c)=>{"use strict";var d=a.r(20336),e=a.r(67018);function f(a){return/\.js(\?.*)?$/i.test(a)}function g(a,b,c){return"https://gleitz.github.io/midi-js-soundfonts/"+(b="FluidR3_GM"===b?b:"MusyngKite")+"/"+a+"-"+(c="ogg"===c?c:"mp3")+".js"}var h=a.r(65068);h.instrument=function a(b,c,h){if(1==arguments.length)return function(c,d){return a(b,c,d)};var i=h||{},j=i.isSoundfontURL||f,k=i.nameToUrl||g,l=j(c)?c:k(c,i.soundfont,i.format);return d(b,l,{only:i.only||i.notes}).then(function(a){var d=e(b,a,i).connect(i.destination?i.destination:b.destination);return d.url=l,d.name=c,d})},h.nameToUrl=g,b.exports&&(b.exports=h)},47473,a=>{"use strict";a.s(["player",()=>b],47473),a.i(58037),a.i(61845);let b=function(){let a={enabled:!1,volume:.8};return{async resume(){},async toggleEnabled(){},setVolume(){},getState:()=>a,subscribe:()=>()=>{},playNote(){},playChord(){}}}()}];

//# sourceMappingURL=_a0f587cf._.js.map
exports.id=59,exports.ids=[59],exports.modules={8857:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,4064,23))},9734:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>Z});var t=a(326),o=a(7577),i=a.n(o),s=a(3345),n=a(4552),l=a(5047),c=a(2331),d=a(3683);let h=(0,o.createContext)(null),m=({children:e})=>{let[r,a]=(0,o.useState)("Degrees"),[t,s]=(0,o.useState)(null),[n,l]=(0,o.useState)(null),c=(0,o.useRef)(!1),m=(0,o.useCallback)(e=>{l(r=>(c.current||r||!e||(d.j("overlay_shown",{page:"chord_progression",control:"chord"}),c.current=!0),e))},[]),u=(0,o.useCallback)(()=>{l(null),d.j("overlay_reset",{page:"chord_progression"})},[]);return i().createElement(h.Provider,{value:{viewMode:r,scale:t,chord:n,setViewMode:e=>{e!==r&&(a(e),d.j("fb_toggle",{page:"chord_progression",value:e}))},setScale:s,setChordFromUser:m,resetChord:u,setScaleLayer:e=>s(e),resetChordLayer:()=>u()}},e)};var u=a(2784),x=a(3079),g=a(2534),p=a(3934),f=a(1621),b=a(7419),y=a(8936);async function j(e,r){try{let a=window.__SCALES_API__;if(!a?.getScalePitchesById)return;let t=a.getScalePitchesById(e,r),o=t.slice(0,Math.min(5,t.length)),i=o.slice(),s=o.slice().reverse().slice(1),n=[...i,...s];for(let e of(await y.h.resume(),n))y.h.playNote(60+e,100),await new Promise(e=>setTimeout(e,100));(0,d.j)("scale_arpeggio_play",{page:"find-chords",scaleId:r,rootPc:e})}catch{}}let v=function({chordQuality:e,rootPc:r,onPreviewScale:a,onResetPreview:i,openGlossary:s,activeScaleId:n}){let{scales:l}=function(e){switch(e){case"maj":case"maj7":return{scales:["Ionian","Lydian"],why:["maj_ionian","maj_lydian"]};case"min":case"m7":return{scales:["Aeolian","Dorian","Phrygian"],why:["min_aeolian","min_dorian","min_phrygian"]};case"dom7":case"7":return{scales:["Mixolydian","Altered"],why:["dom_mixolydian","dom_altered"]};case"m7b5":return{scales:["Locrian","DiminishedWholeHalf"],why:["m7b5_locrian","dim_wh"]};case"dim":return{scales:["DiminishedWholeHalf","Locrian"],why:["dim_wh","m7b5_locrian"]}}}(e),c=(0,o.useRef)(null);return(0,x.H)(c,{orientation:"horizontal"}),t.jsx("div",{className:"ot-scale-table","data-testid":"scale-chips","aria-label":"Suggested scales",children:(0,t.jsxs)("details",{className:"rounded border p-2 bg-background/40",children:[t.jsx("summary",{className:"text-sm cursor-pointer select-none",children:"Suggested scales for this chord"}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-2",children:[t.jsx("div",{role:"tablist","aria-label":"Preview scale",className:"flex flex-wrap gap-2",ref:c,children:l.map((o,i)=>(0,t.jsxs)("div",{className:"inline-flex items-center gap-1",children:[t.jsx("button",{role:"tab",className:["chip",n===o?"chip--active":""].join(" "),onClick:()=>{a(o),(0,d.j)("overlay_shown",{control:"scale",scaleId:o}),j(r,o)},"aria-describedby":`why-${o}`,"data-roving":"item",children:function(e,r,a){if("maj"===r||"maj7"===r){if(0===a)return"Ionian (Major Scale)";if(1===a)return"Lydian (#4 Color)"}if("min"===r||"m7"===r){if(0===a)return"Aeolian (Natural Minor)";if(1===a)return"Dorian (Bright Minor)";if(2===a)return"Phrygian (Dark Minor)"}if("dom7"===r||"7"===r){if(0===a)return"Mixolydian (Dominant)";if(1===a)return"Altered (Tension)"}if("m7b5"===r){if(0===a)return"Locrian (Half-Dim)";if(1===a)return"Whole–Half Dim"}if("dim"===r){if(0===a)return"Whole–Half Dim";if(1===a)return"Locrian"}return e}(o,e,i)}),t.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-5 h-5 rounded-full text-xs opacity-60 hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/10 transition-opacity",onClick:()=>s(o),"aria-label":`Learn more about ${o}`,title:"Learn more in Glossary",children:"ⓘ"})]},o))}),t.jsx("button",{className:"btn-ghost text-xs ml-auto",onClick:i,children:"Reset"})]}),t.jsx("div",{className:"mt-2 flex flex-wrap gap-x-4 gap-y-1 items-center text-xs opacity-80",children:l.map(e=>t.jsx("span",{id:`why-${e}`,children:{maj_ionian:"Foundation for major chords – fits all diatonic tones",maj_lydian:"Bright color with raised 4th (#11) – jazz/modern sound",maj_mixolydian:"Dominant-like major – contains the b7 for blues flavor",min_aeolian:"Natural minor foundation – matches all minor scale tones",min_dorian:"Brighter minor with natural 6th – popular in jazz and funk",min_phrygian:"Dark minor with flat 2nd – Spanish/flamenco character",min_harmonic:"Dramatic minor with raised 7th – classical and exotic sound",min_melodic:"Jazz minor – ascending melodic scale with natural 6th and 7th",dom_mixolydian:"Perfect for dominant 7th – contains the b7 tension",dom_altered:"Maximum tension – all alterations (b9, #9, #11, b13)",dom_wholetone:"Symmetrical whole-tone pattern – dreamy, unresolved quality",m7b5_locrian:"Outlines half-diminished chord – starts on the 7th degree",dim_wh:"Symmetrical whole-half pattern – creates tension over diminished chords"}[({Ionian:"maj_ionian",Lydian:"maj_lydian",Aeolian:"min_aeolian",Dorian:"min_dorian",Phrygian:"min_phrygian",Mixolydian:"dom_mixolydian",Locrian:"m7b5_locrian",DiminishedWholeHalf:"dim_wh",Altered:"dom_altered",HarmonicMinor:"min_harmonic",MelodicMinor:"min_melodic",WholeTone:"dom_wholetone"})[e]]||""},`why-${e}`))})]})})};var w=a(962);function k({at:e,quality:r,rootPc:a,onPick:i,onClose:s,page:n="analyze"}){let l=(0,o.useRef)(null);(0,o.useRef)(s).current=s,(0,o.useRef)(!1);let c=(0,o.useRef)(!1),h=(0,o.useRef)(null);(0,x.H)(h,{orientation:"horizontal"});let m={position:"fixed",left:e.x,top:e.y,zIndex:2147483647,pointerEvents:"auto"},u=e=>{c.current||(c.current=!0,(0,d.pc)({control:"forms",value:e,page:n}),i(e),s())},g=async e=>{try{await y.h.resume();let t=("maj"===r?[0,4,7]:[0,3,7]).map(e=>60+a+e);y.h.playChord(t,"lightStrum",300),(0,d.j)("play_chord",{page:n,source:"form_preview",kind:e})}catch{}},p=(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-label":"Chord forms",ref:l,style:m,className:"ot-pop",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"ot-h3",style:{margin:0},children:"Chord Forms"}),t.jsx("button",{type:"button",onClick:s,className:"text-xs opacity-60 hover:opacity-100 px-2 py-1 rounded hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Close",children:"✕"})]}),(0,t.jsxs)("p",{className:"text-xs opacity-70 mb-3",children:["Select a fingering pattern for ","maj"===r?"major":"minor"," chord"]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",ref:h,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>u("open"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[t.jsx("div",{className:"font-medium",children:"Open Position"}),t.jsx("div",{className:"text-xs opacity-70",children:"Uses open strings"})]}),t.jsx("button",{type:"button",onClick:()=>g("open"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview open position",title:"Preview sound",children:"▶"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>u("barreE"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[t.jsx("div",{className:"font-medium",children:"Barre (E-shape)"}),t.jsx("div",{className:"text-xs opacity-70",children:"6th string root"})]}),t.jsx("button",{type:"button",onClick:()=>g("barreE"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview E-shape barre",title:"Preview sound",children:"▶"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>u("barreA"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[t.jsx("div",{className:"font-medium",children:"Barre (A-shape)"}),t.jsx("div",{className:"text-xs opacity-70",children:"5th string root"})]}),t.jsx("button",{type:"button",onClick:()=>g("barreA"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview A-shape barre",title:"Preview sound",children:"▶"})]})]}),t.jsx("p",{className:"ot-hint mt-3",children:"Right-click or long-press a chord to open."})]});return"undefined"!=typeof document?(0,w.createPortal)(p,document.body):p}function N(e){return(e%12+12)%12}function S(e,r){let a=N(r);for(let r=1;r<=12;r++)if(N(e+r)===a)return r;return 1}let C={1:({rootPc:e})=>[{chord:`${(0,b.Wo)(e)}maj7`,reason:"Richer tonic sound with major 7th",examples:["The Girl from Ipanema","Fly Me to the Moon"]},{chord:`${(0,b.Wo)(e)}6`,reason:"Jazz tonic with added 6th",examples:["All the Things You Are","Autumn Leaves"]},{chord:`${(0,b.Wo)((0,b.Jt)(e+9))}m`,reason:"Relative minor shares the same notes",examples:["Let It Be","No Woman No Cry"]}],2:({rootPc:e,key:r})=>[{chord:`${(0,b.Wo)(e)}m7`,reason:"Jazz ii with minor 7th",examples:["Autumn Leaves","Fly Me to the Moon"]},{chord:(0,b.Wo)((0,b.Jt)(r.tonic+5)),reason:"IV chord shares subdominant function",examples:["Let It Be","Hey Jude"]}],4:({rootPc:e,key:r})=>[{chord:`${(0,b.Wo)(e)}maj7`,reason:"Lydian color with major 7th",examples:["The Girl from Ipanema","Dreams (Fleetwood Mac)"]},{chord:`${(0,b.Wo)((0,b.Jt)(r.tonic+2))}m`,reason:"ii chord shares subdominant function",examples:["Autumn Leaves","Fly Me to the Moon"]},{chord:`${(0,b.Wo)(e)}m`,reason:"Borrowed minor IV for color",examples:["Yesterday","Creep"]}],5:({rootPc:e,key:r})=>[{chord:`${(0,b.Wo)(e)}7`,reason:"Dominant 7th creates strong tension",examples:["Sweet Home Alabama","Twist and Shout"]},{chord:`${(0,b.Wo)(e)}sus4`,reason:"Suspended 4th delays resolution",examples:["Pinball Wizard","The Edge of Glory"]},{chord:`${(0,b.Wo)((0,b.Jt)(r.tonic+11))}dim`,reason:"vii\xb0 shares dominant function",examples:["Girl from Ipanema","Michelle"]}],6:({rootPc:e,key:r})=>[{chord:`${(0,b.Wo)(e)}m7`,reason:"Jazz minor with added 7th",examples:["Stairway to Heaven","Hotel California"]},{chord:(0,b.Wo)(r.tonic),reason:"Relative major shares the same notes",examples:["Let It Be","Hey Jude"]}]},M={1:({rootPc:e})=>[{chord:`${(0,b.Wo)(e)}m7`,reason:"Natural minor 7th",examples:["Stairway to Heaven","Smooth"]},{chord:`${(0,b.Wo)(e)}m6`,reason:"Minor 6th for Dorian color",examples:["Scarborough Fair","So What"]},{chord:(0,b.Wo)((0,b.Jt)(e+3)),reason:"Relative major (bIII) shares notes",examples:["Stairway to Heaven","All Along the Watchtower"]}],4:({rootPc:e})=>[{chord:`${(0,b.Wo)(e)}m7`,reason:"Minor 7th for subdominant color",examples:["Light My Fire","Losing My Religion"]}],5:({rootPc:e,quality:r})=>"min"===r?[{chord:`${(0,b.Wo)(e)}7`,reason:"Raised 3rd (V7) for stronger resolution",examples:["Stairway to Heaven","House of the Rising Sun"]}]:[{chord:`${(0,b.Wo)(e)}7`,reason:"Dominant 7th for tension",examples:["Smooth","Black Magic Woman"]}]};var _=a(2586);function A({substitute:e,onPlay:r,onAdd:a}){return(0,t.jsxs)("div",{className:"rounded border p-2 bg-white dark:bg-neutral-900/50 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-base",children:e.chord}),t.jsx("div",{className:"text-sm opacity-80 mt-0.5",children:e.reason})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx("button",{type:"button",onClick:()=>r(e),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":`Preview ${e.chord}`,title:"Preview sound","data-roving":"item",children:"▶"}),a&&t.jsx("button",{type:"button",onClick:()=>a(e),className:"px-2 py-1 text-xs rounded border bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition-colors","aria-label":`Add ${e.chord} to progression`,title:"Add to progression",children:"+ Add"})]})]}),e.examples&&e.examples.length>0&&(0,t.jsxs)("div",{className:"text-xs opacity-60 mt-1 flex items-center gap-1",children:[t.jsx("span",{className:"opacity-70",children:"Examples:"}),t.jsx("span",{children:e.examples.join(" \xb7 ")})]})]})}let P=function({rootPc:e,quality:r,degree:a,keyContext:i,onAdd:s,page:n="find-chords"}){let l=(0,o.useRef)(null);(0,x.H)(l,{orientation:"horizontal"});let c=(0,o.useMemo)(()=>({rootPc:e,quality:r,degree:a,key:i}),[e,r,a,i]),h=(0,o.useMemo)(()=>(function(e){let{degree:r,key:a}=e,t=("Major"===a.mode?C:M)[r];return(t?t(e):function(e){let{rootPc:r,quality:a}=e,t=[];return"maj"===a?t.push({chord:`${(0,b.Wo)(r)}maj7`,reason:"Added major 7th for richer sound"}):"min"===a&&t.push({chord:`${(0,b.Wo)(r)}m7`,reason:"Added minor 7th for jazz flavor"}),t}(e)).slice(0,3)})(c),[c]),m=(0,o.useCallback)(async e=>{try{await y.h.resume();let r=(0,_.h)(e.chord);if(!r||0===r.length){console.warn(`Failed to parse chord: ${e.chord}`);return}y.h.playChord(r,"lightStrum",300),(0,d.j)("play_chord",{page:n,source:"substitute_preview",chord:e.chord})}catch(e){console.error("Failed to play substitute chord:",e)}},[n]),u=(0,o.useCallback)(a=>{s&&(s(a.chord),(0,d.j)("substitute_add",{page:n,rootPc:e,originalQuality:r,substituteChord:a.chord}))},[s,n,e,r]);return 0===h.length?null:(0,t.jsxs)("details",{className:"rounded border p-2 bg-background/40 mt-2",children:[(0,t.jsxs)("summary",{className:"text-sm cursor-pointer select-none font-medium",children:["Substitute Chords (",h.length,")"]}),(0,t.jsxs)("div",{className:"mt-2",children:[t.jsx("p",{className:"text-xs opacity-70 mb-3 px-1",children:"Alternative chords with similar harmonic function"}),t.jsx("div",{className:"space-y-2",ref:l,children:h.map((e,r)=>t.jsx(A,{substitute:e,onPlay:m,onAdd:s?u:void 0},`${e.chord}-${r}`))})]})]})};var $=a(4666);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let W=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),z=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase()),L=e=>{let r=z(e);return r.charAt(0).toUpperCase()+r.slice(1)},I=(...e)=>e.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim(),D=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let H=(0,o.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:t,className:i="",children:s,iconNode:n,...l},c)=>(0,o.createElement)("svg",{ref:c,...R,width:r,height:r,stroke:e,strokeWidth:t?24*Number(a)/Number(r):a,className:I("lucide",i),...!s&&!D(l)&&{"aria-hidden":"true"},...l},[...n.map(([e,r])=>(0,o.createElement)(e,r)),...Array.isArray(s)?s:[s]])),B=(e,r)=>{let a=(0,o.forwardRef)(({className:a,...t},i)=>(0,o.createElement)(H,{ref:i,iconNode:r,className:I(`lucide-${W(L(e))}`,`lucide-${e}`,a),...t}));return a.displayName=L(e),a},F=B("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),E=B("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),q=B("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),T={Basic:{icon:F,color:"text-blue-600",bgColor:"bg-blue-50"},Modes:{icon:E,color:"text-purple-600",bgColor:"bg-purple-50"},"Pentatonic & Blues":{icon:q,color:"text-orange-600",bgColor:"bg-orange-50"},"Minor family":{icon:B("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),color:"text-red-600",bgColor:"bg-red-50"},Symmetrical:{icon:B("hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]),color:"text-green-600",bgColor:"bg-green-50"},Advanced:{icon:B("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),color:"text-indigo-600",bgColor:"bg-indigo-50"}};var O=a(8602);let G=B("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),J=B("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var V=a(6961);function Z(){return t.jsx(o.Suspense,{fallback:t.jsx("div",{className:"ot-page",children:"Loading..."}),children:t.jsx(U,{})})}function U(){let e=(0,l.useSearchParams)(),r=(0,o.useMemo)(()=>b.Mw,[]),a=f.l7,[i,h]=(0,o.useState)(e.get("key")||"C"),y="minor"===e.get("mode")?"Aeolian":"Ionian",[j,w]=(0,o.useState)(y),N=(0,o.useMemo)(()=>{let e=a.find(e=>e.id===j);return(e?.degrees.length??7)===7},[j]);(0,o.useMemo)(()=>{let e=a.find(e=>e.id===j);if(7!==e.degrees.length)return[];let r="Aeolian"===e.id?"minor":"major";return(0,n.I)({tonic:i,quality:r,scale:e.id}).chords},[i,j]),(0,o.useMemo)(()=>"Aeolian"===j?"minor":"major",[j]);let C=(0,o.useRef)(null);(0,x.H)(C,{orientation:"horizontal"});let M=(0,o.useRef)(null);(0,x.H)(M,{orientation:"horizontal"});let[_,A]=(0,o.useState)("degrees"),[$,W]=(0,o.useState)(0),[z,L]=(0,o.useState)(null),[I,D]=(0,o.useState)(null),[R,H]=(0,o.useState)(null),[B,F]=(0,o.useState)(null),[E,q]=(0,o.useState)(null),[T,O]=(0,o.useState)(null),G=(0,o.useCallback)(()=>{q(null),O(null)},[]),{selectKey:J}=(0,g._)(),Z=e=>{h(e);let a="major"==("Aeolian"===j?"minor":"major")?"Major":"Minor";J({tonic:r.indexOf(e),mode:a}),(0,d.j)("key_pick",{page:"find-chords",key:e,mode:a}),U()};async function U(){J({tonic:r.indexOf(i),mode:"major"==("Aeolian"===j?"minor":"major")?"Major":"Minor"}),L(null)}let Y=(0,o.useMemo)(()=>r.indexOf(i),[i]),X=(0,o.useMemo)(()=>j,[j]),ee=(0,o.useCallback)(()=>{A("degrees"),W(0),L(null),D(null),H(null),F(null),G(),(0,d.j)("overlay_reset",{page:"find-chords",scale:j,key:i})},[Y,X,G]);return b.Mw,t.jsx(m,{children:(0,t.jsxs)("main",{className:"ot-page ot-stack","data-page":"find-chords",children:[t.jsx("h1",{className:"sr-only",children:"Find Chords"}),(0,t.jsxs)("section",{className:"ot-card",children:[t.jsx("h2",{className:"ot-h2",children:"Select Key & Scale"}),(0,t.jsxs)("div",{className:"mt-3 grid sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm mb-1",children:"Key"}),t.jsx("div",{className:"flex flex-col gap-2",role:"tablist","aria-label":"Select key",ref:C,children:[["C","C#","D","Eb","E","F"],["F#","G","Ab","A","Bb","B"]].map((e,r)=>t.jsx("div",{ref:0===r?C:void 0,className:"flex flex-wrap gap-2",children:e.map(e=>t.jsx("button",{role:"tab","aria-selected":i===e,tabIndex:i===e?0:-1,className:["chip","chip--key",i===e?"chip--active":""].join(" "),"data-roving":"item",onClick:()=>{Z(e)},title:`Key ${e}`,children:e},e))},`krow-${r}`))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"scale",className:"block text-sm mb-1",children:[t.jsx("span",{children:"Scale"}),(()=>{let e=a.find(e=>e.id===j),r=(0,p.p3)(0,e.id).map(e=>b.Mw[e]).join(" "),o=`${e.group} scale — ${e.degrees.length}-note pattern.`;return t.jsx(V.Z,{title:e.display.en,className:"ml-2",linkHref:"/resources/glossary",linkLabel:"Glossary",children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"mb-1",children:[t.jsx("b",{children:"Degrees:"})," ",e.degrees.join(" ")]}),(0,t.jsxs)("div",{className:"mb-1",children:[t.jsx("b",{children:"Notes in C:"})," ",r]}),(0,t.jsxs)("div",{className:"mb-1",children:[t.jsx("b",{children:"About:"})," ",e.info?.oneLiner??o]}),!!e.info?.examples?.length&&(0,t.jsxs)("div",{className:"mt-2",children:[t.jsx("b",{className:"text-xs",children:"Song examples"}),t.jsx("ul",{className:"text-xs mt-1 space-y-1",children:e.info.examples.map((e,r)=>(0,t.jsxs)("li",{children:[e.url?t.jsx("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.title}):e.title,e.artist?` — ${e.artist}`:"",e.cue?` (${e.cue})`:""]},r))})]})]})})})()]}),t.jsx(Q,{selectedScaleId:j,onScaleSelect:e=>{w(e),r.indexOf(i),(0,d.j)("scale_pick",{page:"find-chords",scale:e,key:i}),U()}})]})]})]}),(0,t.jsxs)("section",{className:"ot-card",children:[t.jsx("h2",{className:"ot-h2",children:"Result"}),(0,t.jsxs)("div",{className:"ot-stack",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"ot-h3 flex items-center gap-2",children:[t.jsx("span",{children:"Diatonic"}),(0,t.jsxs)(V.Z,{title:"Diatonic chords",linkHref:"/resources/glossary",linkLabel:"Glossary",children:[t.jsx("p",{className:"text-sm",children:"Chords built only from the key’s scale tones (I–ii–iii–IV–V–vi–vii\xb0)."}),t.jsx("p",{className:"text-sm mt-2",children:"Capo rows show the shapes you fret. The sounding chord tones on the fretboard are the same as the Open row."}),t.jsx("p",{className:"text-xs mt-1",children:"See details in Reference → Capo & Shapes"})]})]}),!N&&t.jsx("p",{className:"text-xs text-foreground/70 mt-1",children:"This scale is not heptatonic; Roman numerals are hidden. Diatonic suggestions are limited to the Open row."}),t.jsx("div",{"data-testid":N?void 0:"diatonic-open-only",children:t.jsx(u.Z,{selectedId:R,onSelectId:e=>{R!==e&&H(e)},onPick:({pcs:e})=>{L(e.map(e=>b.Mw[e])),F(e),G(),(0,d.j)("diatonic_pick",{page:"find-chords",id:R,scale:j,key:i})}})})]}),R&&B&&t.jsx("div",{className:"mt-2",children:t.jsx(v,{chordQuality:K(B),rootPc:Y,onPreviewScale:e=>{D(e)},onResetPreview:()=>{D(null),ee()},openGlossary:e=>{try{window.open("/resources/glossary","_blank")}catch{}},activeScaleId:I})}),R&&B&&t.jsx(P,{rootPc:Y,quality:K(B),degree:parseInt(R.split("-")[1]||"0",10)+1,keyContext:{tonic:r.indexOf(i),mode:"Aeolian"===j?"Minor":"Major"},page:"find-chords"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"ot-h3 flex items-center justify-between",children:[t.jsx("span",{children:"Fretboard"}),(0,t.jsxs)("span",{ref:M,className:"flex items-center gap-2",role:"tablist","aria-orientation":"horizontal","aria-label":"Fretboard notation",children:[t.jsx("button",{role:"tab","aria-selected":"degrees"===_,tabIndex:"degrees"===_?0:-1,className:["chip","degrees"===_?"chip--on":""].join(" "),"data-roving":"item",onClick:()=>{G(),A("degrees")},children:"Degrees"}),t.jsx("button",{role:"tab","aria-selected":"names"===_,tabIndex:"names"===_?0:-1,className:["chip","names"===_?"chip--on":""].join(" "),"data-roving":"item",onClick:()=>{G(),A("names")},children:"Names"}),R&&t.jsx("button",{role:"tab","aria-selected":!1,tabIndex:-1,className:"chip",onClick:ee,"aria-label":"Reset",children:"Reset"})]})]}),t.jsx(c.Z,{overlay:{viewMode:"sounding",capo:$,display:_,scaleRootPc:Y,scaleType:I??X,showScaleGhost:!!R,chordNotes:z??void 0,context:{chordRootPc:B&&B.length?B[0]:void 0,quality:(()=>{let e=B??[];return"min"===K(e.length?e:[Y])?"min":"maj"})()}},onRequestForms:(e,r)=>{q({at:e,rootPc:r.rootPc,quality:r.quality})},formShape:T})]})]})]}),t.jsx("section",{className:"ot-card ad-placeholder","aria-label":"Ad",children:t.jsx(s.default,{page:"find_chords",format:"horizontal"})}),E&&t.jsx(k,{at:E.at,quality:E.quality,rootPc:E.rootPc,page:"find-chords",onPick:e=>{var r,a,t;O((r=e,a=E.quality,t=E.rootPc,"open"===r?{kind:"open",quality:a,rootPc:t,rootString:6,dots:"maj"===a?[{string:6,fret:0,deg:"1"},{string:5,fret:2,deg:"5"},{string:4,fret:2,deg:"1"},{string:3,fret:1,deg:"3"},{string:2,fret:0,deg:"5"},{string:1,fret:0,deg:"1"}]:[{string:6,fret:0,deg:"1"},{string:5,fret:2,deg:"5"},{string:4,fret:2,deg:"1"},{string:3,fret:0,deg:"b3"},{string:2,fret:0,deg:"5"},{string:1,fret:0,deg:"1"}]}:"barreE"===r?function(e,r){let a=S(4,r);return{kind:"barreE",quality:e,rootPc:r,rootString:6,dots:[{string:6,fret:a,deg:"1"},{string:5,fret:a+2,deg:"5"},{string:4,fret:a+2,deg:"1"},{string:3,fret:"maj"===e?a+1:a,deg:"maj"===e?"3":"b3"},{string:2,fret:a,deg:"5"},{string:1,fret:a,deg:"1"}],barre:{stringFrom:6,fret:a}}}(a,t):function(e,r){let a=S(9,r);return{kind:"barreA",quality:e,rootPc:r,rootString:5,dots:[{string:5,fret:a,deg:"1"},{string:4,fret:a+2,deg:"5"},{string:3,fret:"maj"===e?a+2:a,deg:"maj"===e?"3":"b3"},{string:2,fret:a+2,deg:"1"},{string:1,fret:a,deg:"5"}],barre:{stringFrom:5,fret:a}}}(a,t)))},onClose:()=>q(null)})]})})}function K(e){let r=new Set(e.map(r=>(r-e[0]+12)%12));return r.has(0)&&r.has(4)&&r.has(7)?"maj":r.has(0)&&r.has(3)&&r.has(7)?"min":r.has(0)&&r.has(3)&&r.has(6)?"dim":r.has(0)&&r.has(4)&&r.has(7)&&r.has(10)?"dom7":r.has(0)&&r.has(3)&&r.has(6)&&r.has(10)?"m7b5":"maj"}function Q({selectedScaleId:e,onScaleSelect:r}){let[a,i]=(0,o.useState)(new Set(["Basic"])),s=(0,$.tG)(),n=e=>({Ionian:"major",Aeolian:"naturalMinor",Dorian:"dorian",Phrygian:"phrygian",Lydian:"lydian",Mixolydian:"mixolydian",Locrian:"locrian",MajorPentatonic:"majPent",MinorPentatonic:"minPent",Blues:"bluesMinor",HarmonicMinor:"harmonicMinor",MelodicMinor:"melodicMinor",DiminishedWH:"dimWholeHalf",DiminishedHW:"dimHalfWhole",Lydianb7:"lydianb7",Mixolydianb6:"mixolydianb6",PhrygianDominant:"phrygDominant",Altered:"altered",WholeTone:"wholeTone"})[e]||"major",l=e=>{i(r=>{let a=new Set(r);return a.has(e)?a.delete(e):a.add(e),a})};return t.jsx("div",{className:"space-y-2",children:s.map(o=>{let i=(0,$.f6)(o),s=a.has(o),c=T[o],d=c.icon;return(0,t.jsxs)("div",{className:"border rounded-lg",children:[(0,t.jsxs)("button",{className:"w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>l(o),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${c.bgColor}`,children:t.jsx(d,{className:`w-5 h-5 ${c.color}`})}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:(0,$.zk)(o,"en")}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[i.length," scales"]})]})]}),s?t.jsx(G,{size:20}):t.jsx(J,{size:20})]}),s&&t.jsx("div",{className:"border-t p-2 space-y-1",children:i.map(a=>{n(a.id);let o=e===a.id;return(0,t.jsxs)("div",{className:"relative inline-block",children:[t.jsx("button",{className:`flex-1 text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center gap-2 ${o?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:e=>{e.stopPropagation(),r(a.id)},children:t.jsx("span",{children:(0,$.ED)(a,"en")})}),t.jsx("div",{className:"absolute -top-1 -right-1",children:t.jsx(V.Z,{title:(0,$.ED)(a,"en"),placement:"top",trigger:t.jsx("button",{type:"button",className:"w-6 h-6 rounded-full bg-amber-50/90 hover:bg-amber-100 ring-1 ring-amber-300/60 shadow-sm flex items-center justify-center","aria-label":"Scale info",children:t.jsx("svg",{className:"w-4 h-4 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 0 1 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"})})}),children:t.jsx(O.Z,{scaleId:a.id})})})]},a.id)})})]},o)})})}},6411:(e,r,a)=>{"use strict";a.r(r),a.d(r,{$$typeof:()=>s,__esModule:()=>i,default:()=>n});var t=a(8570);let o=(0,t.createProxy)(String.raw`/Users/nh/App/OtoTheory/ototheory-web/src/app/find-chords/page.tsx`),{__esModule:i,$$typeof:s}=o;o.default;let n=(0,t.createProxy)(String.raw`/Users/nh/App/OtoTheory/ototheory-web/src/app/find-chords/page.tsx#default`)}};
{"version":3,"sources":["turbopack:///[project]/src/components/ui/Heading.tsx","turbopack:///[project]/src/app/chord-progression/page.tsx","turbopack:///[project]/src/components/ProGate.tsx","turbopack:///[project]/src/components/UpgradeModal.tsx","turbopack:///[project]/src/store/sketchStore.ts","turbopack:///[project]/src/components/Toast.client.tsx","turbopack:///[project]/src/lib/chords.ts","../src/apply-style.ts","../src/clone-node.ts","../src/dataurl.ts","../src/util.ts","../src/mimes.ts","../src/embed-resources.ts","../src/embed-images.ts","../src/embed-webfonts.ts","../src/index.ts","turbopack:///[project]/src/lib/ui/cadence.ts","turbopack:///[project]/src/lib/compat.ts","turbopack:///[project]/src/lib/theory/roman/match.ts","../src/clone-pseudos.ts","turbopack:///[project]/src/features/sketch/storage.ts","turbopack:///[project]/src/features/sketch/useSketch.ts","turbopack:///[project]/src/lib/export/png.ts","turbopack:///[project]/src/lib/theory/roman.ts","turbopack:///[project]/src/lib/theory/roman/patterns.ts"],"sourcesContent":["'use client';\n\nexport function H2({\n  children,\n  className = '',\n  right,\n  as: Tag = 'h2',\n}: {\n  children: React.ReactNode;\n  className?: string;\n  right?: React.ReactNode;\n  as?: keyof JSX.IntrinsicElements;\n}) {\n  return (\n    <div className={`mb-2 flex items-center gap-2 ${className}`}>\n      <Tag className=\"text-xl md:text-2xl font-semibold tracking-tight text-foreground\">\n        {children}\n      </Tag>\n      {right ? <div className=\"ml-auto\">{right}</div> : null}\n    </div>\n  );\n}\n\nexport function H3({\n  children,\n  className = '',\n  right,\n  as: Tag = 'h3',\n}: {\n  children: React.ReactNode;\n  className?: string;\n  right?: React.ReactNode;\n  as?: keyof JSX.IntrinsicElements;\n}) {\n  return (\n    <div className={`mb-1.5 flex items-center gap-2 ${className}`}>\n      <Tag className=\"text-sm md:text-base font-semibold tracking-wide text-foreground\">\n        {children}\n      </Tag>\n      {right ? (\n        <div className=\"ml-auto text-xs md:text-sm text-muted-foreground\">{right}</div>\n      ) : null}\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\"use client\";\nimport React from \"react\";\nimport AdSlot from \"@/components/AdSlot.client\";\nimport { useCallback, useEffect, useMemo, useRef, useState, useTransition } from \"react\";\nimport { useRovingTabs } from \"@/hooks/useRovingTabs\";\nimport Fretboard from \"@/components/Fretboard\";\nimport CapoFold from \"@/components/CapoFold\";\nimport { rankKeys, rankScales, type ScaleRank, PITCHES, detectCadence, noteToPc, romanToChordSymbol, type Mode } from \"@/lib/theory\";\nimport { getScalePitchesById, getScalePitches, scaleTypeLabel, normalizeScaleId, SCALE_INTERVALS, parentModeOf } from \"@/lib/scales\";\nimport { diatonicTriads, triadToChordSym } from \"@/lib/theory/diatonic\";\nimport { SCALE_CATALOG } from \"@/lib/scaleCatalog\";\nimport { toRoman, type Mode as RomanMode } from \"@/lib/theory/roman\";\nimport { useAnalysisStore } from \"@/store/analysisStore\";\nimport { formatCadenceLabel, cadenceTooltip, formatCadenceShort } from \"@/lib/ui/cadence\";\nimport type { CadenceType } from \"@/lib/ui/cadence\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport InfoDot from \"@/components/ui/InfoDot\";\nimport { H2, H3 } from \"@/components/ui/Heading\";\n \nimport { inferScaleIdFromLabel, scaleNotes, SCALE_DEFS, type ScaleId } from \"@/lib/theory/scales\";\nimport ScaleChip from \"@/components/ScaleChip\";\nimport { analyzeChordProgression } from \"@/lib/music-theory\";\nimport {\n  QUICK_QUALITIES,\n  ADVANCED_QUALITIES,\n  ADV_EXTENSIONS, ADV_ALTERED_DOM, ADV_DIM_VARIANTS, ADV_SUS_ADDS, ADV_AUG_MAJMIN,\n  isAdvanced, BASS_NOTES\n} from \"@/lib/chords\";\nimport { usePro } from \"@/components/ProProvider\";\nimport { ProGate } from \"@/components/ProGate\";\nimport UpgradeModal from \"@/components/UpgradeModal\";\nimport { getBaseKind, isCompatible } from \"@/lib/compat\";\nimport { copy } from \"@/lib/copy\";\nimport DiatonicCapoTable from \"@/components/DiatonicCapoTable\";\nimport { matchPatterns } from \"@/lib/theory/roman/match\";\nimport { patternInfoEN } from \"@/lib/theory/roman/patterns\";\nimport { ChordFormsPopover } from \"@/components/ChordFormsPopover\";\nimport { player } from \"@/lib/audio/player\";\nimport { buildForm, type FormKind, type FormShape, type Quality } from \"@/lib/chordForms\";\nimport { useSketch } from \"@/features/sketch/useSketch\";\nimport { useSketchStore } from \"@/store/sketchStore\";\nimport { track, trackToast } from \"@/lib/telemetry\";\nimport { exportPng } from \"@/lib/export/png\";\nimport { chordToMidi } from \"@/lib/music/chordParser\";\nimport Toast from \"@/components/Toast.client\";\nimport { useCtaMessages } from \"@/hooks/useCtaMessages\";\n\nexport default function FindKeyPage() {\n  const CTA_MESSAGES = useCtaMessages();\n  const rootRowRef = useRef<HTMLDivElement | null>(null);\n  useRovingTabs(rootRowRef, { orientation: \"horizontal\" });\n  const fbToggleRef = useRef<HTMLDivElement | null>(null);\n  useRovingTabs(fbToggleRef, { orientation: \"horizontal\" });\n  const presetRef = useRef<HTMLDivElement | null>(null);\n  useRovingTabs(presetRef, { orientation: \"horizontal\" });\n  const exportRef = useRef<HTMLDivElement | null>(null);\n  const exportCardRef = useRef<HTMLDivElement | null>(null);\n  // „Çπ„É≠„ÉÉ„ÉàÂõ∫ÂÆö„ÅÆÈÄ≤Ë°åÔºàÁ©∫„ÅØÁ©∫ÊñáÂ≠óÔºâ„ÄÇÂàùÊúüÂÄ§„ÅØ C‚ÄìAm‚ÄìF‚ÄìG „Çí 1„Äú4 „Å´ÈÖçÁΩÆ\n  const [slots, setSlots] = useState<string[]>(() => {\n    const a = new Array(12).fill(\"\");\n    a[0] = \"C\"; a[1] = \"Am\"; a[2] = \"F\"; a[3] = \"G\";\n    return a;\n  });\n  // Ë°®Á§∫Áî®„ÅÆË©∞„ÇÅ„ÅüÈÖçÂàó„Å®„ÄÅÂÖÉ„Çπ„É≠„ÉÉ„Éà„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ\n  const filledIndices = useMemo(() => slots.reduce((acc:number[], v, i)=>{ if (v) acc.push(i); return acc; }, [] as number[]), [slots]);\n  const progression = useMemo(() => filledIndices.map(i => slots[i]), [filledIndices, slots]);\n  // ËøΩÂä†ÂÖ•Âäõ„ÅÆ„Ç´„Éº„ÇΩ„É´‰ΩçÁΩÆÔºàÊ¨°„ÅÆÁ©∫„Çπ„É≠„ÉÉ„ÉàÔºâ\n  const firstEmpty = useMemo(() => { const idx = slots.findIndex(s => !s); return idx === -1 ? 11 : idx; }, [slots]);\n  const [cursorIndex, setCursorIndex] = useState<number>(0);\n  useEffect(() => { setCursorIndex(firstEmpty); }, [firstEmpty]);\n  const ROOTS = useMemo(() => [\n    'C','C#','D','Eb','E','F','F#','G','Ab','A','Bb','B'\n  ], []);\n  const QUALITIES = useMemo(() => [\n    { label: 'M', value: '' },\n    { label: 'M7', value: 'maj7' },\n    { label: '7', value: '7' },\n    { label: '6', value: '6' },\n    { label: 'add9', value: 'add9' },\n    { label: 'sus4', value: 'sus4' },\n    { label: 'sus2', value: 'sus2' },\n    { label: 'm', value: 'm' },\n    { label: 'm7', value: 'm7' },\n    { label: 'dim', value: 'dim' },\n    { label: 'm7b5', value: 'm7b5' },\n    { label: 'aug', value: 'aug' },\n  ], []);\n  const [rootSel, setRootSel] = useState<string>('C');\n  const [qualitySel, setQualitySel] = useState<string>('M');\n  const [modifiers, setModifiers] = useState<string[]>([]);\n  const TENSIONS = useMemo(() => [\n    { label: 'sus2', value: 'sus2' },\n    { label: 'sus4', value: 'sus4' },\n    { label: 'add9', value: 'add9' },\n    { label: 'add11', value: 'add11' },\n    { label: 'add13', value: 'add13' },\n  ], []);\n  const [tensionsSel, setTensionsSel] = useState<string[]>([]);\n  const [bassSel, setBassSel] = useState<string>('');\n\n  const composeChord = (root: string, quality: string, tensions: string[], bass: string) => {\n    if (!root) return '';\n    const qualityPart = quality || '';\n    const tensionPart = tensions.length ? tensions.join('') : '';\n    const chord = `${root}${qualityPart}${tensionPart}`;\n    return bass ? `${chord}/${bass}` : chord;\n  };\n\n  const toggleTension = (val: string) => {\n    setTensionsSel((prev) => prev.includes(val) ? prev.filter(v => v !== val) : [...prev, val]);\n  };\n  const [result, setResult] = useState<ReturnType<typeof analyzeChordProgression> | null>(null);\n  const [keys, setKeys] = useState<ReturnType<typeof rankKeys>>([]);\n  const [scales, setScales] = useState<ScaleRank[]>([]);\n  const [selectedScaleRank, setSelectedScaleRank] = useState<ScaleRank | null>(null);\n  const [romanLine, setRomanLine] = useState<string[]>([]);\n  const { keyCandidates, selectedKey: selFromStore, analyze: runAnalyze, selectKey, scaleCandidates, selectedScale, selectScale, reset: resetAnalysis } = useAnalysisStore();\n  const [fbDisplay, setFbDisplay] = useState<'degrees'|'names'>('degrees');\n  const [selectedCellId, setSelectedCellId] = useState<string | null>(null);\n  const [overlayChordNotes, setOverlayChordNotes] = useState<string[]|null>(null);\n  const [formsPop, setFormsPop] = useState<null | { at:{x:number;y:number}; rootPc:number; quality:Quality }>(null);\n  const [formShape, setFormShape] = useState<FormShape | null>(null);\n  const resetForms = useCallback(() => { setFormsPop(null); setFormShape(null); }, []);\n  const isHeptatonic = useMemo(() => {\n    const t = selectedScale?.type as any;\n    const ivs = t ? (SCALE_INTERVALS as any)[t] : null;\n    return !ivs || ivs.length === 7;\n  }, [selectedScale?.type]);\n  useEffect(() => {\n    if (!isHeptatonic && fbDisplay !== 'degrees') setFbDisplay('degrees');\n  }, [isHeptatonic]);\n  const [selectedKey, setSelectedKey] = useState<{ tonic: string; mode: RomanMode } | null>(null);\n  const gridRef = useRef<HTMLDivElement | null>(null);\n  const leftWrapRef = useRef<HTMLDivElement | null>(null);\n  const resultRef = useRef<HTMLElement | null>(null);\n  const rightRef = useRef<HTMLElement | null>(null);\n  const [dragIndex, setDragIndex] = useState<number | null>(null);\n  \n  // Mobile touch drag support\n  const touchStartRef = useRef<{ index: number; startX: number; startY: number } | null>(null);\n  const dragPreviewRef = useRef<HTMLDivElement | null>(null);\n  \n  // Playback state\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [bpm, setBpm] = useState(120);\n  const playbackTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const [currentChordIndex, setCurrentChordIndex] = useState<number>(-1);\n  \n  const moveSlot = useCallback((from: number, to: number) => {\n    setSlots(prev => {\n      if (from === to) return prev;\n      const arr = prev.slice();\n      const tmp = arr[from];\n      arr[from] = arr[to];\n      arr[to] = tmp;\n      return arr;\n    });\n  }, []);\n\n  // Mobile drag handlers\n  const [touchDragTarget, setTouchDragTarget] = useState<number | null>(null);\n  \n  const handleTouchStartDrag = useCallback((e: React.TouchEvent, i: number) => {\n    if (!slots[i]) return; // Only drag filled slots\n    e.stopPropagation();\n    const touch = e.touches[0];\n    touchStartRef.current = { index: i, startX: touch.clientX, startY: touch.clientY };\n    setDragIndex(i);\n    setTouchDragTarget(null);\n  }, [slots]);\n\n  const handleTouchMoveDrag = useCallback((e: React.TouchEvent, currentIndex: number) => {\n    if (touchStartRef.current === null || dragIndex === null) return;\n    \n    const touch = e.touches[0];\n    const element = document.elementFromPoint(touch.clientX, touch.clientY);\n    \n    // Find the slot element\n    let slotElement = element;\n    while (slotElement && !slotElement.hasAttribute('data-slot-index')) {\n      slotElement = slotElement.parentElement;\n    }\n    \n    if (slotElement) {\n      const targetIndex = parseInt(slotElement.getAttribute('data-slot-index') || '-1');\n      if (targetIndex >= 0 && targetIndex !== dragIndex) {\n        setTouchDragTarget(targetIndex);\n      }\n    }\n  }, [dragIndex]);\n\n  const handleTouchEndDrag = useCallback((e: React.TouchEvent) => {\n    if (touchStartRef.current !== null && dragIndex !== null && touchDragTarget !== null && dragIndex !== touchDragTarget) {\n      moveSlot(dragIndex, touchDragTarget);\n    }\n    touchStartRef.current = null;\n    setDragIndex(null);\n    setTouchDragTarget(null);\n  }, [dragIndex, touchDragTarget, moveSlot]);\n  \n  // Playback state flag to ensure stopPlayback is effective\n  const isPlayingRef = useRef(false);\n  \n  // Playback functions\n  const stopPlayback = useCallback(() => {\n    isPlayingRef.current = false;\n    if (playbackTimerRef.current) {\n      clearInterval(playbackTimerRef.current);\n      playbackTimerRef.current = null;\n    }\n    setIsPlaying(false);\n    setCurrentChordIndex(-1);\n  }, []);\n  \n  const startPlayback = useCallback(async () => {\n    const filledSlots = slots.map((s, i) => ({ chord: s, index: i })).filter(x => x.chord);\n    if (filledSlots.length === 0) return;\n    \n    // ÂâçÂõû„ÅÆÂÜçÁîü„ÅåÊÆã„Å£„Å¶„ÅÑ„Åü„ÇâÁ¢∫ÂÆü„Å´ÂÅúÊ≠¢\n    stopPlayback();\n    \n    await player.resume();\n    isPlayingRef.current = true;\n    setIsPlaying(true);\n    setCurrentChordIndex(0);\n    \n    // Count-in: simple metronome click\n    const countInBeats = 4;\n    const beatDuration = (60 / bpm) * 1000;\n    \n    for (let i = 0; i < countInBeats; i++) {\n      if (!isPlayingRef.current) return; // ÂÅúÊ≠¢„Åï„Çå„Åü„Çâ„Ç´„Ç¶„É≥„Éà„Ç§„É≥‰∏≠„Åß„ÇÇ‰∏≠Êñ≠\n      await new Promise(resolve => setTimeout(resolve, beatDuration));\n      if (!isPlayingRef.current) return;\n      // Play a simple click sound (high MIDI note, short duration)\n      player.playNote(84, 100); // C6, 100ms\n    }\n    \n    // Start progression playback (4 beats per chord)\n    let chordIdx = 0;\n    let beatCount = 0;\n    const playBeat = async () => {\n      if (!isPlayingRef.current) {\n        // ÂÅúÊ≠¢„Éï„É©„Ç∞„ÅåÁ´ã„Å£„Å¶„ÅÑ„Åü„Çâ„Çø„Ç§„Éû„Éº„Çí„ÇØ„É™„Ç¢\n        if (playbackTimerRef.current) {\n          clearInterval(playbackTimerRef.current);\n          playbackTimerRef.current = null;\n        }\n        return;\n      }\n      if (beatCount % 4 === 0) {\n        // New chord every 4 beats\n        if (chordIdx >= filledSlots.length) {\n          chordIdx = 0; // Loop\n        }\n        const { chord, index } = filledSlots[chordIdx];\n        setCurrentChordIndex(index);\n        await playChordSymbol(chord);\n        chordIdx++;\n      } else {\n        // Re-trigger the same chord\n        if (chordIdx > 0 && chordIdx <= filledSlots.length) {\n          const { chord } = filledSlots[chordIdx - 1];\n          await playChordSymbol(chord);\n        }\n      }\n      beatCount++;\n    };\n    \n    if (!isPlayingRef.current) return;\n    await playBeat(); // Play first beat immediately\n    if (!isPlayingRef.current) return;\n    playbackTimerRef.current = setInterval(playBeat, beatDuration);\n    \n    track('progression_play', { page: 'chord_progression', bpm, chordCount: filledSlots.length });\n  }, [slots, bpm, stopPlayback]);\n  \n  const togglePlayback = useCallback(() => {\n    if (isPlaying) {\n      stopPlayback();\n    } else {\n      startPlayback();\n    }\n  }, [isPlaying, startPlayback, stopPlayback]);\n  \n  // Stop playback when component unmounts or slots change\n  useEffect(() => {\n    return () => {\n      if (playbackTimerRef.current) {\n        clearInterval(playbackTimerRef.current);\n      }\n    };\n  }, []);\n  \n  useEffect(() => {\n    if (isPlaying) {\n      stopPlayback();\n    }\n  }, [slots]);\n  \n  const removeSlot = useCallback((idx: number) => {\n    setSlots(prev => { const arr = prev.slice(); arr[idx] = \"\"; return arr; });\n  }, []);\n  const { isPro } = usePro();\n  const { sketch, setSketch } = useSketch(isPro);\n  const sketchIdRef = useRef<string | null>(null);\n  const ensureSketchId = () => { if (!sketchIdRef.current) sketchIdRef.current = Math.random().toString(36).slice(2, 10); return sketchIdRef.current; };\n  const { sketches, loadSketches, deleteSketch, saveSketch } = useSketchStore();\n  const [showSketchList, setShowSketchList] = useState(false);\n  const [selectedSketchForAction, setSelectedSketchForAction] = useState<any>(null);\n  const sketchesDropRef = useRef<HTMLDivElement | null>(null);\n  const [sketchName, setSketchName] = useState<string>(\"\");\n  \n  // Preset popup state\n  const [showPresetPopup, setShowPresetPopup] = useState(false);\n  const [presetKey, setPresetKey] = useState<string>('C');\n  const presetPopupRef = useRef<HTMLDivElement>(null);\n  useEffect(() => { if (showSketchList) loadSketches(); }, [showSketchList, loadSketches]);\n  useEffect(() => {\n    const onDown = (e: MouseEvent) => {\n      if (!showSketchList) return;\n      const el = sketchesDropRef.current;\n      if (el && !el.contains(e.target as Node)) setShowSketchList(false);\n    };\n    const onKey = (e: KeyboardEvent) => { if (e.key === 'Escape') setShowSketchList(false); };\n    document.addEventListener('mousedown', onDown);\n    document.addEventListener('keydown', onKey);\n    return () => { document.removeEventListener('mousedown', onDown); document.removeEventListener('keydown', onKey); };\n  }, [showSketchList]);\n  \n  // Close preset popup on outside click or ESC\n  useEffect(() => {\n    if (!showPresetPopup) return;\n    const onDown = (e: MouseEvent) => {\n      const el = presetPopupRef.current;\n      if (el && !el.contains(e.target as Node)) setShowPresetPopup(false);\n    };\n    const onKey = (e: KeyboardEvent) => { if (e.key === 'Escape') setShowPresetPopup(false); };\n    document.addEventListener('mousedown', onDown);\n    document.addEventListener('keydown', onKey);\n    return () => { document.removeEventListener('mousedown', onDown); document.removeEventListener('keydown', onKey); };\n  }, [showPresetPopup]);\n\n  // SaveÔºàResultÂÜÖ„ÅÆ„Éó„É≠„É≥„Éó„ÉàÔºâ\n  const [showNamePrompt, setShowNamePrompt] = useState(false);\n  const [nameInput, setNameInput] = useState(\"\");\n  const defaultSketchName = useMemo(() => (progression.length ? progression.join(\" \") : `Untitled ${new Date().toLocaleString()}`), [progression]);\n\n  // M3.5: Toast notifications\n  const [toastConfig, setToastConfig] = useState<{\n    message: string;\n    type: 'info' | 'success' | 'warning';\n    ctaText?: string;\n    ctaHref?: string;\n    ctaPlace?: 'limit_toast' | 'png_toast';\n  } | null>(null);\n\n  const toastShownRef = useRef<Set<string>>(new Set());\n\n  // M3.5: Show toast when reaching 9-12 chords\n  useEffect(() => {\n    const filledCount = slots.filter(s => s !== \"\").length;\n    if (filledCount === 9 && !toastShownRef.current.has('limit_warn')) {\n      setToastConfig({\n        message: CTA_MESSAGES.toast.limitWarn,\n        type: 'info',\n        ctaText: CTA_MESSAGES.toast.ctaButton,\n        ctaHref: '/ios-coming-soon',\n        ctaPlace: 'limit_toast'\n      });\n      trackToast('limit_warn', { page: 'chord_progression', chordCount: filledCount });\n      toastShownRef.current.add('limit_warn');\n    } else if (filledCount === 12 && !toastShownRef.current.has('limit_block')) {\n      setToastConfig({\n        message: CTA_MESSAGES.toast.limitBlock,\n        type: 'warning',\n        ctaText: CTA_MESSAGES.toast.ctaButton,\n        ctaHref: '/ios-coming-soon',\n        ctaPlace: 'limit_toast'\n      });\n      trackToast('limit_block', { page: 'chord_progression', chordCount: filledCount });\n      toastShownRef.current.add('limit_block');\n    }\n  }, [slots]);\n  \n  // M3.5: Current sketch name for PNG export\n  const [currentExportName, setCurrentExportName] = useState<string>(\"\");\n\n  const handleExportSketch = async (sk: any) => {\n    try {\n      // Sketch„ÅÆ„Éá„Éº„Çø„Åã„Çâ„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Ç´„Éº„Éâ„Çí‰∏ÄÊôÇÁöÑ„Å´ÁîüÊàê„Åó„Å¶PNGÂá∫Âäõ\n      if (!exportCardRef.current) return;\n      \n      // Set the sketch name for export\n      setCurrentExportName(sk.name || \"Untitled Sketch\");\n      \n      // Wait for state update\n      await new Promise(resolve => setTimeout(resolve, 50));\n      \n      // ‰∏ÄÊôÇÁöÑ„Å´opacity„Çí1„Å´„Åó„Å¶„É¨„É≥„ÉÄ„É™„É≥„Ç∞\n      const exportCard = exportCardRef.current;\n      exportCard.style.opacity = '1';\n      exportCard.style.visibility = 'visible';\n      \n      // „É¨„É≥„ÉÄ„É™„É≥„Ç∞ÂÆå‰∫Ü„ÇíÂæÖ„Å§\n      await new Promise(resolve => setTimeout(resolve, 200));\n      \n      // PNGÂá∫Âäõ\n      await exportPng(exportCard, 'auto');\n      \n      // ÂÖÉ„Å´Êàª„Åô\n      exportCard.style.opacity = '0.0001';\n      exportCard.style.visibility = 'hidden';\n      setCurrentExportName(\"\");\n      \n      track('export_png', { page: 'chord_progression', source: 'sketch', id: sk.id });\n\n      // M3.5: Show toast after PNG export\n      if (!toastShownRef.current.has('png_export')) {\n        setToastConfig({\n          message: CTA_MESSAGES.toast.pngExport,\n          type: 'success',\n          ctaText: CTA_MESSAGES.toast.ctaButton,\n          ctaHref: '/ios-coming-soon',\n          ctaPlace: 'png_toast'\n        });\n        toastShownRef.current.add('png_export');\n      }\n    } catch (e) {\n      console.error('Export failed:', e);\n      setCurrentExportName(\"\");\n    }\n  };\n  \n  const doSaveSketch = async () => {\n    try {\n      // M3.5: Check Free limit BEFORE saving (directly from localStorage)\n      if (!isPro) {\n        const existingSketches = JSON.parse(localStorage.getItem('ot_sketches') || '[]');\n        console.log('[DEBUG] doSaveSketch - isPro:', isPro, 'existing sketches:', existingSketches.length);\n        \n        if (existingSketches.length >= 3) {\n          console.log('[DEBUG] Blocking save - limit reached');\n          setShowNamePrompt(false);\n          setNameInput(\"\");\n          setToastConfig({\n            message: CTA_MESSAGES.toast.sketchLimit,\n            type: 'warning',\n            ctaText: CTA_MESSAGES.toast.ctaButton,\n            ctaHref: '/ios-coming-soon',\n            ctaPlace: 'limit_toast'\n          });\n          trackToast('limit_block', { page: 'chord_progression', context: 'sketch_limit' });\n          return;\n        }\n      }\n      \n      console.log('[DEBUG] Proceeding with save');\n\n      const tonicGuess = (selFromStore ? PITCHES[selFromStore.tonic] : (selectedKey ? selectedKey.tonic : 'C')) as string;\n      const scaleGuess = (selectedScale?.type as any) || (selFromStore ? (selFromStore.mode as any) : 'Ionian');\n      const name = (nameInput.trim() || defaultSketchName).slice(0, 48);\n      const data: any = {\n        name,\n        schema: 'sketch_v1',\n        appVersion: '3.0.0',\n        key: { tonic: tonicGuess, scaleId: String(scaleGuess) },\n        capo: { fret: 0, note: 'Shaped' },\n        progression: { items: progression.map((c, i) => ({ id: c, degree: '', quality: '' })) },\n        fretboardView: { mode: fbDisplay === 'names' ? 'Names' : 'Degrees', guide: !!overlayChordNotes },\n      };\n      const r = await saveSketch(data);\n      track('save_project', { page: 'chord_progression', ok: r?.ok });\n      setShowNamePrompt(false); setNameInput(\"\");\n    } catch {}\n  };\n  const [showAdv, setShowAdv] = useState<boolean>(false);\n  const [showUpgrade, setShowUpgrade] = useState<boolean>(false);\n  const [addedFlash, setAddedFlash] = useState<boolean>(false);\n  const [isAnalyzing, startAnalyze] = useTransition();\n  const [patternHits, setPatternHits] = useState<{id:string;name:string;summary:string;start:number;end:number}[]>([]);\n  type CadenceView = { type: CadenceType; tail?: { from?: string; to?: string } };\n  const [cadences, setCadences] = useState<CadenceView[]>([]);\n  // Roman„Éè„Ç§„É©„Ç§„Éà: ÁØÑÂõ≤(start<=i<end)„Çí‰øùÊåÅ\n  const [romanHL, setRomanHL] = useState<{ start: number; end: number } | null>(null);\n  // Roman„Éú„ÉÉ„ÇØ„Çπ„Çí„Çπ„ÇØ„É≠„Éº„É´ÂØæË±°„Å´\n  const romanBoxRef = useRef<HTMLDivElement | null>(null);\n  // Roman„ÅÆÂ∞èÊñáÂ≠ó(i,v,x)„Å†„Åë„ÇíÂ§ßÊñáÂ≠óÂåñ„ÄÇÊã¨Âºß„ÅÆ‰∏≠„Å†„Åë„Å´ÈÅ©Áî®„Åô„Çã„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£„ÄÇ\n  function upperRomansInParens(name: string): string {\n    return name.replace(/\\(([^)]+)\\)/g, (_: any, inner: string) => {\n      const up = inner.replace(/[ivx]+/g, (m: string) => m.toUpperCase());\n      return `(${up})`;\n    });\n  }\n  type ProgItem = { root: string; quality: string };\n  const parseProg = (arr: string[]): ProgItem[] => arr.map((t) => {\n    const m = t.match(/^([A-G](?:#|b)?)(.*)$/);\n    return { root: m?.[1] || t, quality: (m?.[2] || '') };\n  });\n\n  // Quick: „Éô„Éº„ÇπÂìÅË≥™„ÅÆ‚ÄúÈÅ∏Êäû„ÅÆ„Åø‚Äù\n  const onPickBase = (q: string) => {\n    setQualitySel(q);\n    // „Éô„Éº„ÇπÂ§âÊõ¥„ÅßÁüõÁõæ„Åô„Çã modifier „ÅØËá™Âãï„ÇØ„É™„Ç¢\n    setModifiers((prev) => prev.filter((m) => isCompatible(getBaseKind(q), m)));\n    if (bassSel === rootSel) setBassSel('');\n  };\n\n  // Advanced: Ë¶ÅÁ¥†„ÅÆ„Éà„Ç∞„É´ÔºàPro‰ª•Â§ñ„ÅØ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâË™òÂ∞éÔºâ\n  const toggleModifier = (m: string) => {\n    if (!isPro) { setShowUpgrade(true); return; }\n    if (!isCompatible(getBaseKind(qualitySel), m)) return;\n    setModifiers((prev) => (prev.includes(m) ? prev.filter((x) => x !== m) : [...prev, m]));\n  };\n\n  // Slash: „Éé„Éº„Éà„ÅÆ„ÅøÔºàÂêåÈü≥/Âêå„Åò„Éé„Éº„Éà„ÅßËß£Èô§Ôºâ\n  const onPickBass = (n: string) => {\n    if (!isPro) { setShowUpgrade(true); return; }\n    if (n === rootSel || n === bassSel) setBassSel(''); else setBassSel(n);\n  };\n  \n  // Preset helper: Roman numerals to actual chords based on key\n  const applyPreset = (presetName: string, romans: string[], key: string) => {\n    const keyPc = noteToPc(key);\n    if (keyPc === undefined || keyPc < 0 || keyPc > 11) return;\n    \n    // „Éó„É™„Çª„ÉÉ„Éà„ÅØÂü∫Êú¨ÁöÑ„Å´Major key„ÅßÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Çã\n    // ÔºàÂ∞ÜÊù•ÁöÑ„Å´Minor„Éó„É™„Çª„ÉÉ„Éà„ÇíËøΩÂä†„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Åì„Åì„ÅßÂà§ÂÆö„É≠„Ç∏„ÉÉ„ÇØ„ÇíËøΩÂä†Ôºâ\n    const mode: Mode = \"Major\";\n    \n    // theory.ts„ÅÆromanToChordSymbolÈñ¢Êï∞„Çí‰ΩøÁî®ÔºàÊñáËÑàÂåñ„Åï„Çå„ÅüÂ§âÊèõÔºâ\n    const chords = romans.map(roman => romanToChordSymbol(roman, keyPc, mode));\n    \n    // Append to existing progression (find first empty slot)\n    setSlots(prev => {\n      const arr = [...prev];\n      let insertIdx = arr.findIndex(s => !s); // Find first empty slot\n      if (insertIdx === -1) insertIdx = 0; // If all full, start from beginning\n      \n      chords.forEach((c, i) => {\n        const targetIdx = (insertIdx + i) % 12;\n        arr[targetIdx] = c;\n      });\n      return arr;\n    });\n    \n    // Move cursor to next empty slot or wrap around\n    setCursorIndex(prev => {\n      const arr = [...slots];\n      chords.forEach((c, i) => {\n        const insertIdx = arr.findIndex(s => !s);\n        if (insertIdx === -1) return 0;\n        const targetIdx = (insertIdx + i) % 12;\n        arr[targetIdx] = c;\n      });\n      const nextEmpty = arr.findIndex(s => !s);\n      return nextEmpty === -1 ? 0 : nextEmpty;\n    });\n    \n    // Don't auto-analyze - user must click Analyze button\n    track('preset_inserted', { page: 'chord_progression', preset: presetName });\n    setShowPresetPopup(false);\n  };\n\n  const analyze = () => {\n    const res = analyzeChordProgression(progression);\n    setResult(res);\n    const ranked = rankKeys(progression);\n    setKeys(ranked.slice(0,4));\n    if (ranked.length > 0) {\n      const mode: RomanMode = ranked[0].mode === \"Major\" ? \"major\" : \"minor\";\n      const keyName = ranked[0].label.split(\" \")[0];\n      const sel = { tonic: keyName, mode } as const;\n      setSelectedKey(sel);\n      setRomanLine(progression.map(c => toRoman(c, sel.tonic, sel.mode, { showQuality: true, uppercase: true })));\n    } else {\n      setScales([]);\n      setSelectedKey(null);\n      setRomanLine([]);\n    }\n    // store-based analysis for Top3 candidates\n    runAnalyze(progression);\n    \n    // Auto-scroll to result section\n    setTimeout(() => {\n      const resultElement = document.getElementById('result');\n      if (resultElement) {\n        resultElement.scrollIntoView({ \n          behavior: 'smooth', \n          block: 'start' \n        });\n      }\n    }, 100);\n  };\n\n  useEffect(() => {\n    const current = selFromStore || selectedKey;\n    if (!current) return;\n    const tonic = typeof (current as any).tonic === 'number' ? PITCHES[(current as any).tonic] : (current as any).tonic;\n    const mode = ((current as any).mode === 'Major' || (current as any).mode === 'Minor') ? ((current as any).mode === 'Major' ? 'major' : 'minor') : (current as any).mode;\n    setRomanLine(progression.map(c => toRoman(c, tonic, mode as RomanMode, { showQuality: true, uppercase: true })));\n  }, [selFromStore, selectedKey, progression]);\n\n  // Roman pattern detection\n  useEffect(() => {\n    if (!selectedKey || romanLine.length === 0) { setPatternHits([]); return; }\n    const mode = (selectedKey.mode as any) as 'major'|'minor';\n    setPatternHits(matchPatterns(romanLine, mode));\n  }, [romanLine, selectedKey]);\n\n  // Cadence detection (rule-based; normalize tokens + loop-boundary)\n  useEffect(() => {\n    if (!romanLine || romanLine.length === 0) { setCadences([]); return; }\n    const norm = romanLine.map((t) => {\n      const m = t.replace(/\\s+/g, \"\").match(/^(b|#)?([ivIV]+)(?:[¬∞√∏].*)?/);\n      if (!m) return t.toUpperCase();\n      const acc = m[1] ?? \"\";\n      const core = (m[2] ?? \"\").toUpperCase();\n      return `${acc}${core}`;\n    });\n    let raw: any = null;\n    try { raw = (detectCadence as any)(norm); } catch {}\n    const arr: any[] = Array.isArray(raw) ? raw : (raw ? [raw] : []);\n    const views: CadenceView[] = arr.map((r) => {\n      if (typeof r === 'string') return { type: r as CadenceType };\n      const type = (r?.type ?? r) as CadenceType;\n      const tail = r?.tailRoman ?? (r?.pair ? { from: r.pair[0], to: r.pair[1] } : undefined);\n      return { type, tail };\n    });\n    if (norm.length >= 2) {\n      const last = norm[norm.length - 1];\n      const first = norm[0];\n      if (!views.some(v => v.type === 'perfect') && last === 'V' && first === 'I')\n        views.push({ type: 'perfect', tail: { from: 'V', to: 'I' } });\n      if (!views.some(v => v.type === 'deceptive') && last === 'V' && first === 'VI')\n        views.push({ type: 'deceptive', tail: { from: 'V', to: 'vi' } });\n    }\n    setCadences(views);\n  }, [romanLine]);\n\n  // Fallback cadence (render-time) in case state-based detection fails\n  const fallbackCadence = useMemo(() => {\n    if (!romanLine || romanLine.length === 0) return null as { type: CadenceType; tail?: {from?:string; to?:string} } | null;\n    const norm = romanLine.map((t) => {\n      const m = t.replace(/\\s+/g, \"\").match(/^(b|#)?([ivIV]+)(?:[¬∞√∏].*)?/);\n      if (!m) return t.toUpperCase();\n      const acc = m[1] ?? \"\";\n      const core = (m[2] ?? \"\").toUpperCase();\n      return `${acc}${core}`;\n    });\n    if (norm.length < 2) return null;\n    const first = norm[0];\n    const last = norm[norm.length - 1];\n    if (last === 'V' && first === 'I') return { type: 'perfect' as CadenceType, tail: { from: 'V', to: 'I' } };\n    if (last === 'V' && first === 'VI') return { type: 'deceptive' as CadenceType, tail: { from: 'V', to: 'vi' } };\n    if (last === 'V') return { type: 'half' as CadenceType, tail: { from: undefined, to: 'V' } };\n    return null;\n  }, [romanLine]);\n\n  useEffect(() => {\n    const compute = () => {\n      if (!gridRef.current || !leftWrapRef.current || !resultRef.current) return;\n      // Desktop„ÅÆ„Åømin-height„ÇíË®àÁÆó„ÄÇ„É¢„Éê„Ç§„É´„ÅØsticky„Çí‰Ωø„Çè„Å™„ÅÑ„Åü„ÇÅ0„Å´Êàª„Åô„ÄÇ\n      const isDesktop = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(min-width: 1024px)').matches;\n      if (!isDesktop) {\n        leftWrapRef.current.style.minHeight = '0px';\n        return;\n      }\n      // „É´„Éº„Éó„Åß‰º∏„Å≥Á∂ö„Åë„Å™„ÅÑ„Çà„ÅÜ„ÄÅÊ∏¨ÂÆöÂâç„Å´‰∏ÄÊó¶0„Å∏Êàª„Åó„Å¶„Åã„ÇâË∑ùÈõ¢„ÇíÊ∏¨„Çã\n      const prevMin = leftWrapRef.current.style.minHeight;\n      leftWrapRef.current.style.minHeight = '0px';\n      // Âº∑Âà∂„É™„Éï„É≠„Éº„Åß„É¨„Ç§„Ç¢„Ç¶„ÉàÁ¢∫ÂÆö\n      void leftWrapRef.current.offsetHeight;\n      const gridTop = gridRef.current.getBoundingClientRect().top + window.scrollY;\n      const rightBottom = rightRef.current ? (rightRef.current.getBoundingClientRect().bottom + window.scrollY) : 0;\n      const resultTop = resultRef.current.getBoundingClientRect().top + window.scrollY;\n      // two-col „ÅÆ‰∏ãÁ´Ø„Çí #result „ÅÆÁõ¥Ââç„Å´‰∏ÄËá¥„Åï„Åõ„Çã„ÄÇË™§Â∑Æ„ÅØceil„ÅßÂê∏Âèé\n      const stopY = Math.max(rightBottom, resultTop);\n      const minH = Math.max(0, Math.ceil(stopY - gridTop));\n      const prevNum = parseFloat(prevMin || '0');\n      if (Math.abs(minH - prevNum) > 1) {\n        leftWrapRef.current.style.minHeight = `${minH}px`;\n      }\n    };\n    // ÂàùÊúü„ÉªÂÆâÂÆöÂæå\n    requestAnimationFrame(compute);\n    const t = setTimeout(compute, 120);\n    // „É™„Çµ„Ç§„Ç∫„ÅØ„Éá„Éê„Ç¶„É≥„Çπ\n    let rto: any = null;\n    const onResize = () => {\n      if (rto) clearTimeout(rto);\n      rto = setTimeout(compute, 120);\n    };\n    window.addEventListener('resize', onResize);\n    window.addEventListener('orientationchange', onResize);\n    window.addEventListener('load', compute);\n    // Âè≥„Éë„Éç„É´„Çµ„Ç§„Ç∫Â§âÂåñ„ÇíÁõ£Ë¶ñÔºà„Éá„Éê„Ç¶„É≥„Çπ‰ªò„ÅçÔºâ\n    let ro: ResizeObserver | null = null;\n    let roResult: ResizeObserver | null = null;\n    if (typeof ResizeObserver !== 'undefined' && rightRef.current) {\n      let rt: any = null;\n      ro = new ResizeObserver(() => {\n        if (rt) clearTimeout(rt);\n        rt = setTimeout(compute, 100);\n      });\n      ro.observe(rightRef.current);\n    }\n    if (typeof ResizeObserver !== 'undefined' && resultRef.current) {\n      let rt2: any = null;\n      roResult = new ResizeObserver(() => {\n        if (rt2) clearTimeout(rt2);\n        rt2 = setTimeout(compute, 100);\n      });\n      roResult.observe(resultRef.current);\n    }\n    return () => {\n      clearTimeout(t);\n      if (rto) clearTimeout(rto);\n      window.removeEventListener('resize', onResize);\n      window.removeEventListener('orientationchange', onResize);\n      window.removeEventListener('load', compute);\n      if (ro) ro.disconnect();\n      if (roResult) roResult.disconnect();\n    };\n  }, []);\n\n  // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅåÂ§â„Çè„Å£„Åü„Å®„Åç„Å´„ÇÇËªΩ„ÅèÂÜçÂêåÊúü\n  useEffect(() => {\n    if (!leftWrapRef.current) return;\n    const isDesktop = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(min-width: 1024px)').matches;\n    if (!isDesktop) return;\n    // Ê¨°„Éï„É¨„Éº„É†„ÅßÂÜçË®àÁÆó\n    requestAnimationFrame(() => {\n      const evt = new Event('resize');\n      window.dispatchEvent(evt);\n    });\n  }, [result, showAdv, progression.length]);\n  const previewLabel = (qualitySel === 'M' ? `${rootSel}` : `${rootSel}${qualitySel}`)\n    + (modifiers.length ? ` ${modifiers.join(' ')}` : '')\n    + (bassSel ? `/${bassSel}` : '');\n  const previewPlay = async () => {\n    if (!rootSel) return;\n    const pc = PITCHES.indexOf(rootSel as any);\n    if (pc < 0) return;\n    const base = 60 + pc; // C4Âü∫Ê∫ñ\n    const q = qualitySel.toLowerCase();\n    const has = (m: string) => modifiers.includes(m);\n    let intervals: number[] = [0,4,7];\n    if (q.includes('m') && !q.includes('maj')) intervals = [0,3,7];\n    if (q.includes('dim')) intervals = [0,3,6];\n    if (q.includes('maj7') || q.includes('mmaj7')) intervals = [...(q.includes('m')?[0,3,7]:[0,4,7]), 11];\n    else if (q.includes('7')) intervals = [0,4,7,10];\n    if (has('sus2')) intervals = [0,2,7];\n    if (has('sus4')) intervals = [0,5,7];\n    const midis = intervals.map(iv => base + (iv%12));\n    try { await player.resume(); player.playChord(midis, 'lightStrum', 300); } catch {}\n  };\n  // ÁèæÂú®„ÅÆÁ∑®ÈõÜÂÜÖÂÆπ„ÇíSketch„Å∏ÂèçÊò†Ôºà3Áßí„Ç¢„Ç§„Éâ„É´„ÅßËá™Âãï‰øùÂ≠òÔºâ\n  useEffect(() => {\n    try {\n      const id = ensureSketchId();\n      const name = progression.length ? progression.join(\" \").slice(0, 48) : `Untitled ${new Date().toLocaleString()}`;\n      const tonicGuess = (selFromStore ? PITCHES[selFromStore.tonic] : (selectedKey ? selectedKey.tonic : 'C')) as string;\n      const scaleGuess = (selectedScale?.type as any) || (selFromStore ? selFromStore.mode : 'Ionian');\n      setSketch({\n        id,\n        name,\n        createdAt: sketch?.createdAt || new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        schema: 'sketch_v1',\n        appVersion: '3.0.0',\n        key: { tonic: tonicGuess, scaleId: String(scaleGuess) },\n        capo: { fret: 0, note: 'Shaped' as any },\n        progression: { items: progression.map((c, i) => ({ id: `${i+1}-${c}`, degree: '', quality: '' })) },\n        fretboardView: { mode: fbDisplay === 'names' ? 'Names' : 'Degrees', guide: !!overlayChordNotes },\n      } as any);\n    } catch {}\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [slots, fbDisplay, overlayChordNotes, selFromStore, selectedKey, selectedScale]);\n  // „É¢„Éê„Ç§„É´Âà§ÂÆöÔºàSSR„Å®‰∏ÄËá¥„Åï„Åõ„Çã„Åü„ÇÅÂàùÊúüfalse„ÄÅ„Éû„Ç¶„É≥„ÉàÂæå„Å´Âà§ÂÆöÔºâ\n  const [isTouchDevice, setIsTouchDevice] = useState(false);\n  useEffect(() => {\n    try {\n      const touch = ('ontouchstart' in window) || ((navigator as any)?.maxTouchPoints ?? 0) > 0;\n      setIsTouchDevice(!!touch);\n    } catch { setIsTouchDevice(false); }\n  }, []);\n\n  // ÈÄ≤Ë°å„ÉÅ„ÉÉ„ÉóÔºà\"C\", \"Am\", \"F\"...Ôºâ„ÇíÁ∞°ÊòìËß£Êûê„Åó„Å¶Áô∫Èü≥\n  const playChordSymbol = async (symbol: string) => {\n    try {\n      await player.resume();\n      const midis = chordToMidi(symbol);\n      if (midis && midis.length > 0) {\n        player.playChord(midis, 'lightStrum', 300);\n      }\n    } catch (error) {\n      console.error('Failed to play chord:', symbol, error);\n    }\n  };\n  return (\n    <main ref={exportRef as any} className=\"ot-page ot-stack\" data-page=\"find-key\">\n      {/* Progression card: full-width at top */}\n      <section id=\"progression\" className={\"ot-card prog-compact\"}>\n          <div className=\"flex items-center justify-between gap-4 sm:gap-3 mb-1 sm:mb-2\">\n            <H2 className=\"mb-0 text-left\">Build progression</H2>\n          <div className=\"flex flex-wrap items-center gap-2 relative\">\n              {/* Reset, Sketches */}\n            <button\n                type=\"button\"\n                className=\"btn-ghost btn-reset chip-pressable text-sm px-3 py-1 inline-flex items-center gap-1\"\n                title=\"Reset progression\"\n                onClick={() => {\n                  setSlots(Array(12).fill(\"\"));\n                  setCursorIndex(0);\n                  resetAnalysis();\n                  setKeys([]);\n                  setResult(null);\n                  setOverlayChordNotes(null);\n                  setSelectedCellId(null);\n                  setFbDisplay('degrees');\n                }}\n              >\n                <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\">\n                  <path d=\"M12 5V2L7 7l5 5V9c2.76 0 5 2.24 5 5a5 5 0 1 1-5-5z\"/>\n                </svg>\n                <span>Reset</span>\n              </button>\n              <button\n                type=\"button\"\n                className=\"chip-pressable inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs border\"\n                title=\"Show sketches\"\n                onClick={() => setShowSketchList(v=>!v)}\n                aria-expanded={showSketchList}\n              >\n                <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h12v2H3v-2z\"/></svg>\n                Sketches\n              </button>\n              {showSketchList && (\n                <div ref={sketchesDropRef} className=\"fixed right-4 top-20 z-[10000] w-[320px] max-h-[70vh] overflow-auto rounded-md border bg-white dark:bg-neutral-900 shadow-2xl p-2 space-y-2\">\n                  {sketches.length === 0 ? (\n                    <div className=\"text-xs opacity-70 p-2\">No sketches yet</div>\n                  ) : (\n                    sketches.map((sk) => (\n                      <div key={sk.id} className=\"flex items-center justify-between gap-2 px-2 py-1 rounded hover:bg-black/5 dark:hover:bg-white/10\">\n                        <button\n                          className=\"text-left text-sm flex-1 truncate\"\n                          title={`${sk.name}`}\n                          onClick={() => setSelectedSketchForAction(sk)}\n                        >\n                          {sk.name}\n                        </button>\n                        <button\n                          className=\"ot-btn-ghost text-xs\"\n                          title=\"Delete\"\n                          onClick={(e) => { e.stopPropagation(); deleteSketch(sk.id); loadSketches(); track('project_delete', { page: 'chord_progression', id: sk.id }); }}\n                        >\n                          üóëÔ∏è\n            </button>\n          </div>\n                    ))\n                  )}\n                </div>\n              )}\n              \n              {/* „Çπ„Éö„Éº„Çπ */}\n              <div className=\"w-4\" aria-hidden=\"true\"></div>\n              \n              {/* Âè≥„Ç∞„É´„Éº„Éó: Playback controls */}\n              <div className=\"inline-flex items-center gap-2\">\n                <button\n                  type=\"button\"\n                  className=\"chip-pressable text-sm px-3 py-1.5 inline-flex items-center gap-1.5 rounded-lg border\"\n                  title={isPlaying ? \"Stop playback\" : \"Play progression\"}\n                  onClick={togglePlayback}\n                  disabled={progression.length === 0}\n                  style={{ opacity: progression.length === 0 ? 0.5 : 1 }}\n                >\n                  {isPlaying ? (\n                    <>\n                      <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <rect x=\"5\" y=\"5\" width=\"14\" height=\"14\" rx=\"1\"/>\n                      </svg>\n                      <span>Stop</span>\n                    </>\n                  ) : (\n                    <>\n                      <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <path d=\"M8 5v14l11-7z\"/>\n                      </svg>\n                      <span>Play</span>\n                    </>\n                  )}\n                </button>\n                <div className=\"inline-flex items-center gap-1.5\">\n                  <label htmlFor=\"bpm-input\" className=\"text-xs opacity-70\">BPM:</label>\n                  <input\n                    id=\"bpm-input\"\n                    type=\"number\"\n                    min=\"40\"\n                    max=\"240\"\n                    value={bpm}\n                    onChange={(e) => setBpm(Math.max(40, Math.min(240, parseInt(e.target.value) || 120)))}\n                    className=\"w-16 px-2 py-1 text-sm rounded border bg-transparent\"\n                    disabled={isPlaying}\n                  />\n                </div>\n              </div>\n              \n              <select\n                className=\"chip\"\n                aria-label=\"Instrument\"\n                defaultValue={(typeof window!==\"undefined\" ? (localStorage.getItem('ot-instrument') || 'acoustic_guitar_steel') : 'acoustic_guitar_steel') as string}\n                onChange={async (e)=>{ const v = e.currentTarget.value as any; await player.setInstrument(v); }}\n              >\n                <option value=\"acoustic_guitar_steel\">Acoustic Steel</option>\n                <option value=\"acoustic_guitar_nylon\">Acoustic Nylon</option>\n                <option value=\"electric_guitar_clean\">Electric Clean</option>\n                <option value=\"distortion_guitar\">Distortion</option>\n                <option value=\"overdriven_guitar\">Over Drive</option>\n                <option value=\"electric_guitar_muted\">Muted</option>\n                <option value=\"acoustic_grand_piano\">Piano</option>\n              </select>\n            </div>\n          </div>\n          {/* ‰∏äÊÆµ„ÅÆÊóßÈÄ≤Ë°å„ÉÅ„ÉÉ„ÉóË°å„ÅØÂªÉÊ≠¢ */}\n\n          {/* 12-slot gridÔºàÁï™Âè∑ or „Ç≥„Éº„ÉâÔºâ„ÄÇ„ÇØ„É™„ÉÉ„ÇØ„Åß„Ç´„Éº„ÇΩ„É´„ÄÅfilled„ÅØ„ÇØ„É™„ÉÉ„ÇØ„ÅßÂÜçÁîü„Éª√ó„ÅßÂâäÈô§„ÄÇD&D„ÅßÂÖ•„ÇåÊõø„Åà */}\n          <div className=\"prog-slots mt-2 flex flex-wrap gap-1\" aria-label=\"Progression slots\">\n            {Array.from({ length: 12 }).map((_, i) => {\n              const filled = Boolean(slots[i]);\n              const tone = 16; // emerald hue base\n              const alpha = i < 8 ? 0 : (i - 7) * 0.08; // 0,0.08,0.16,0.24 for 8..11\n              const bg = `rgba(16,185,129,${alpha.toFixed(2)})`;\n              const active = cursorIndex === i;\n              const isCurrentlyPlaying = currentChordIndex === i && isPlaying;\n              return (\n                <div\n                  key={`slot-${i}`}\n                  data-slot-index={i}\n                  className={[\n                    \"inline-flex items-center justify-center rounded border text-xs select-none relative chip-pressable\",\n                    filled ? \"bg-black/5 dark:bg-white/10\" : \"bg-transparent\",\n                    active ? \"ring-2 ring-emerald-400/60\" : \"\",\n                    isCurrentlyPlaying ? \"ring-4 ring-blue-500/80 shadow-lg\" : \"\",\n                    dragIndex === i ? \"opacity-50 scale-105\" : \"\",\n                    touchDragTarget === i ? \"ring-2 ring-blue-400\" : \"\"\n                  ].join(\" \")}\n                  style={{ \n                    padding: '6px 10px', \n                    minWidth: 72, \n                    minHeight: 36, \n                    background: filled ? undefined : bg, \n                    borderColor: 'var(--line)',\n                    transition: 'opacity 0.15s, transform 0.15s, box-shadow 0.15s',\n                    touchAction: filled ? 'none' : 'auto'\n                  }}\n                  onClick={() => { if (filled) { playChordSymbol(slots[i]); } else { setCursorIndex(i); } }}\n                  draggable={filled}\n                  onDragStart={() => setDragIndex(i)}\n                  onDragOver={(e) => e.preventDefault()}\n                  onDrop={() => { if (dragIndex !== null) { moveSlot(dragIndex, i); setDragIndex(null); } }}\n                  onTouchStart={(e) => handleTouchStartDrag(e, i)}\n                  onTouchMove={(e) => handleTouchMoveDrag(e, i)}\n                  onTouchEnd={handleTouchEndDrag}\n                >\n                  {/* corner numbering (always visible) */}\n                  <span className=\"absolute left-1 top-1 text-[10px] opacity-70 select-none pointer-events-none\">{String(i+1)}</span>\n                  {filled ? (\n                    <>\n                      <span>{slots[i]}</span>\n                <button\n                  aria-label=\"Remove chord\"\n                        className=\"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-black/50 text-white text-[10px] leading-4 hover:bg-black/70\"\n                        onClick={(e)=>{ e.stopPropagation(); removeSlot(i); }}\n                >√ó</button>\n                    </>\n                  ) : null}\n          </div>\n              );\n            })}\n        </div>\n          </section>\n      \n      {/* Sketch Library „Çª„ÇØ„Ç∑„Éß„É≥„ÅØ„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„Å´ÁßªË°å */}\n      {/* Choose chords card: full-width below */}\n      <section id=\"choose\" ref={rightRef} className=\"ot-card right-panel\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <H2 className=\"mb-0 text-left\">Choose chords</H2>\n            {/* Preset button moved from Build progression */}\n            <button\n              type=\"button\"\n              className=\"chip-pressable text-sm px-3 py-1 inline-flex items-center gap-1 rounded-lg border\"\n              title=\"Load preset progression\"\n              onClick={() => setShowPresetPopup(true)}\n            >\n              <span>üìã</span>\n              <span>Presets</span>\n            </button>\n        </div>\n          {/* Ë™¨Êòé„ÉÜ„Ç≠„Çπ„Éà„ÅØÈùûË°®Á§∫„Å´Â§âÊõ¥ÔºàÁõ¥ÊÑüUI„Å∏Ôºâ */}\n          {/* ‰æã„ÅØÈùûË°®Á§∫„Å´„Åô„Çã */}\n          {/* <div className=\"text-[11px] text-gray-400 mb-2\">{copy.progression.example}</div> */}\n          <div className=\"mt-1 sm:mt-2 space-y-1\">\n            <div>\n              <div className=\"text-xs opacity-70 mb-0.5\">Root</div>\n              <div ref={rootRowRef} className=\"chips-row overflow-x-auto whitespace-nowrap\" role=\"tablist\" aria-orientation=\"horizontal\" aria-label=\"Select key\">\n                {ROOTS.map(rt => (\n                  <button\n                    role=\"tab\"\n                    aria-selected={rootSel === rt}\n                    tabIndex={rootSel === rt ? 0 : -1}\n                    key={rt}\n                    className={`chip ${rootSel === rt ? 'chip--active' : ''}`}\n                    onClick={() => setRootSel(rt)}\n                  >{rt}</button>\n                ))}\n              </div>\n            </div>\n            <div>\n              <div className=\"text-xs opacity-70 mb-0.5\">Quick</div>\n              <div className=\"chips-row overflow-x-auto whitespace-nowrap\">\n                {QUICK_QUALITIES.map(q => (\n                  <button\n                    key={`quick-${q}`}\n                    className={`chip ${qualitySel===q ? 'chip--active' : ''}`}\n                    onClick={() => onPickBase(q)}\n                  >{q}</button>\n                ))}\n              </div>\n              {/* Quick‰∏ã„ÅÆAnalyze„ÅØstickyÈ†òÂüü„Å∏ÁßªÂãï */}\n            </div>\n            <div className=\"mt-1\">\n              <button\n                data-testid=\"adv-toggle\"\n                className={`adv-toggle ${showAdv ? 'is-open' : ''}`}\n                onClick={() => setShowAdv(v => !v)}\n                aria-expanded={showAdv}\n              >\n                <span className=\"caret\" aria-hidden />\n                <span className=\"spark\" aria-hidden>\n                  <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2l1.9 4.6L18.5 8 13.9 9.4 12 14l-1.9-4.6L5.5 8l4.6-1.4L12 2zm6 9l.95 2.3L21 14l-2.05.7L18 17l-.95-2.3L15 14l2.05-.7L18 11zM5 12l.8 1.9L8 14l-2.2.8L5 17l-.8-2.2L2 14l2.2-.8L5 12z\"/></svg>\n                </span>\n                <span className=\"label\">Advanced</span>\n              </button>\n              {isPro && showAdv && (\n                <div className=\"mt-2 space-y-3\">\n                  <AdvSection title=\"Extensions\">\n                    {ADV_EXTENSIONS.map(q => {\n                      const disabled = !isCompatible(getBaseKind(qualitySel), q);\n                      const active = modifiers.includes(q);\n                      return <Chip key={`adv-${q}`} label={q} onClick={() => toggleModifier(q)} disabled={disabled} active={active} />;\n                    })}\n                  </AdvSection>\n                  <AdvSection title=\"Altered Dominant\">\n                    {ADV_ALTERED_DOM.map(q => {\n                      const disabled = !isCompatible(getBaseKind(qualitySel), q);\n                      const active = modifiers.includes(q);\n                      return <Chip key={`adv-${q}`} label={q} onClick={() => toggleModifier(q)} disabled={disabled} active={active} />;\n                    })}\n                  </AdvSection>\n                  <AdvSection title=\"Diminished / Variants\">\n                    {ADV_DIM_VARIANTS.map(q => {\n                      const disabled = !isCompatible(getBaseKind(qualitySel), q);\n                      const active = modifiers.includes(q);\n                      return <Chip key={`adv-${q}`} label={q} onClick={() => toggleModifier(q)} disabled={disabled} active={active} />;\n                    })}\n                  </AdvSection>\n                  <AdvSection title=\"Suspensions / Adds\">\n                    {ADV_SUS_ADDS.map(q => {\n                      const disabled = !isCompatible(getBaseKind(qualitySel), q);\n                      const active = modifiers.includes(q);\n                      return <Chip key={`adv-${q}`} label={q} onClick={() => toggleModifier(q)} disabled={disabled} active={active} />;\n                    })}\n                  </AdvSection>\n                  <AdvSection title=\"Aug / mM7\">\n                    {ADV_AUG_MAJMIN.map(q => {\n                      const active = qualitySel === q;\n                      return <Chip key={`adv-${q}`} label={q} onClick={() => onPickBase(q)} active={active} />;\n                    })}\n                  </AdvSection>\n                  <AdvSection title=\"Slash (On)\">\n                    <div className=\"adv-grid\">\n                      {BASS_NOTES.map((n) => (\n                        <button key={`bass-${n}`} className={`chip ${bassSel === n ? 'chip--active' : ''}`} onClick={() => onPickBass(n)}>{n}</button>\n                      ))}\n                    </div>\n                  </AdvSection>\n                </div>\n              )}\n              {!isPro && showAdv && (\n                <div className=\"mt-2\">\n                  <ProGate title=\"Advanced ‚Äî Pro (preview)\">\n                    <div className=\"space-y-3 grayscale opacity-40\">\n                      <AdvSection title=\"Extensions\">\n                        {ADV_EXTENSIONS.map(q => (<Chip key={`adv-${q}`} label={q} disabled />))}\n                      </AdvSection>\n                      <AdvSection title=\"Altered Dominant\">\n                        {ADV_ALTERED_DOM.map(q => (<Chip key={`adv-${q}`} label={q} disabled />))}\n                      </AdvSection>\n                      <AdvSection title=\"Diminished / Variants\">\n                        {ADV_DIM_VARIANTS.map(q => (<Chip key={`adv-${q}`} label={q} disabled />))}\n                      </AdvSection>\n                      <AdvSection title=\"Suspensions / Adds\">\n                        {ADV_SUS_ADDS.map(q => (<Chip key={`adv-${q}`} label={q} disabled />))}\n                      </AdvSection>\n                      <AdvSection title=\"Aug / mM7\">\n                        {ADV_AUG_MAJMIN.map(q => (<Chip key={`adv-${q}`} label={q} disabled />))}\n                      </AdvSection>\n                      <AdvSection title=\"Slash (On)\">\n                        <div className=\"adv-grid\">\n                          {BASS_NOTES.map(n => (\n                            <button key={`bass-${n}`} className=\"chip chip--disabled\">{n}</button>\n                          ))}\n                        </div>\n                      </AdvSection>\n                    </div>\n                  </ProGate>\n                </div>\n              )}\n              <UpgradeModal open={showUpgrade} onClose={() => setShowUpgrade(false)} />\n\n              {/* Sticky Preview + Add/Analyze */}\n              <div className=\"preview-sticky mt-2 mb-[6px]\">\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <div className=\"text-sm flex items-center gap-2\">\n                    <span className=\"opacity-70\">Preview:</span>\n                    <button\n                      type=\"button\"\n                      className=\"preview-chord inline-flex items-center gap-1 px-2 py-1 rounded border border-emerald-400/60 bg-emerald-50 text-emerald-700 hover:bg-emerald-100 hover:border-emerald-500 dark:text-emerald-100 dark:bg-emerald-900/40 dark:border-emerald-500/80 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300\"\n                      title=\"Click to preview chord\"\n                      onClick={previewPlay}\n                    >\n                      <svg className=\"h-6 w-6\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\">\n                        <path d=\"M8 5v14l11-7z\"/>\n                      </svg>\n                      {previewLabel || '-'}\n                    </button>\n                    <button\n                      className={`rounded-lg px-4 py-2 text-sm ml-1 border transition-all active:scale-[.98] active:translate-y-px focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 ${addedFlash ? 'bg-emerald-100 border-emerald-300 text-emerald-900' : 'bg-emerald-500 border-emerald-600 text-white hover:bg-emerald-600'}`}\n                      onClick={() => {\n                        const chord = previewLabel;\n                        if (chord) {\n                          // „Ç´„Éº„ÇΩ„É´‰ΩçÁΩÆ„Å´‰∏äÊõ∏„Åç\n                          setSlots(prev => { const arr = prev.slice(); arr[cursorIndex] = chord; return arr; });\n                          setModifiers([]);\n                          setBassSel('');\n                          setAddedFlash(true);\n                          window.setTimeout(() => setAddedFlash(false), 600);\n                          setCursorIndex(i => Math.min(11, i + 1));\n                        }\n                      }}\n                      aria-live=\"polite\"\n                    >{addedFlash ? 'Added ‚úì' : 'Add'}</button>\n                  </div>\n                  <button\n                    className={`w-full sm:w-auto sm:ml-auto mt-2 sm:mt-0 px-6 py-2 text-base min-w-0 sm:min-w-[220px] rounded-lg font-semibold text-white transition-transform active:scale-[.98] active:translate-y-px focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 ${isAnalyzing ? 'bg-rose-400/70 cursor-wait' : 'bg-rose-400 hover:bg-rose-500'}`}\n                    onClick={() => {\n                      const items = parseProg(progression);\n                      const hasAdv = items.some((i) => ADVANCED_QUALITIES.some((a) => i.quality.includes(a)));\n                      if (hasAdv && !isPro) {\n                        if (typeof window !== 'undefined') window.alert('Advanced chords detected. Remove them or upgrade to Pro.');\n                        return;\n                      }\n                      startAnalyze(() => {\n                        analyze();\n                        // Auto-scroll to result section\n                        setTimeout(() => {\n                          const resultElement = document.getElementById('result');\n                          if (resultElement) {\n                            resultElement.scrollIntoView({ \n                              behavior: 'smooth', \n                              block: 'start' \n                            });\n                          }\n                        }, 100);\n                      });\n                    }}\n                    disabled={isAnalyzing}\n                    aria-busy={isAnalyzing}\n                  >\n                    {isAnalyzing ? (\n                      <span className=\"inline-flex items-center gap-2\">\n                        <svg className=\"h-4 w-4 animate-spin\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"3\"/>\n                          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 0 1 8-8v4a4 4 0 0 0-4 4H4z\"/>\n                        </svg>\n                        Analyzing‚Ä¶\n                      </span>\n                    ) : 'Analyze'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n      </section>\n      <section id=\"result\" ref={resultRef} className=\"ot-card\">\n        <div className=\"flex items-center justify-between\">\n          <H2 className=\"text-left mb-0\">Result</H2>\n          <div className=\"flex items-center gap-2\">\n            <button\n              type=\"button\"\n              className=\"chip-pressable inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm border\"\n              onClick={() => setShowNamePrompt(true)}\n              title=\"Save sketch\"\n            >\n              <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M17 3H5a2 2 0 0 0-2 2v14l4-4h10a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z\"/></svg>\n              Save\n            </button>\n          </div>\n        </div>\n        {showNamePrompt && (\n          <div className=\"fixed inset-0 z-[10000]\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"absolute inset-0 bg-black/40\" onClick={() => { setShowNamePrompt(false); setNameInput(\"\"); }} />\n            <div className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-neutral-900 border rounded-lg shadow-xl p-4 w-[92vw] max-w-[420px]\">\n              <div className=\"text-base font-semibold mb-2\">Save sketch</div>\n              <input\n                type=\"text\"\n                className=\"chip px-2 py-2 text-sm w-full\"\n                placeholder={defaultSketchName}\n                value={nameInput}\n                onChange={(e)=>setNameInput(e.target.value)}\n                aria-label=\"Sketch name\"\n                autoFocus\n              />\n              <div className=\"mt-3 flex items-center justify-end gap-2\">\n                <button\n                  type=\"button\"\n                  className=\"chip-pressable inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm border\"\n                  onClick={() => { setShowNamePrompt(false); setNameInput(\"\"); }}\n                >Cancel</button>\n                <button\n                  type=\"button\"\n                  className=\"chip-pressable inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm border\"\n                  onClick={doSaveSketch}\n                >OK</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Sketch Action Popup (Edit/Export/Cancel) */}\n        {selectedSketchForAction && (\n          <div className=\"fixed inset-0 z-[10001]\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"absolute inset-0 bg-black/40\" onClick={() => setSelectedSketchForAction(null)} />\n            <div className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-neutral-900 border rounded-lg shadow-xl p-4 w-[92vw] max-w-[320px]\">\n              <div className=\"text-base font-semibold mb-3\">{selectedSketchForAction.name}</div>\n              <div className=\"space-y-2\">\n                <button\n                  type=\"button\"\n                  className=\"w-full chip-pressable inline-flex items-center justify-center gap-1 px-4 py-2 rounded-lg text-sm border\"\n                  onClick={() => {\n                    try {\n                      const sk = selectedSketchForAction;\n                      const arr = new Array(12).fill(\"\");\n                      (sk?.progression?.items || []).forEach((it: any, idx: number) => { if (idx < 12) arr[idx] = String(it?.id || \"\"); });\n                      setSlots(arr);\n                      setCursorIndex(arr.findIndex(s=>!s) === -1 ? 11 : arr.findIndex(s=>!s));\n                      // Ëß£Êûê„ÇíÂÆüË°å„Åó„Å¶ÂÄôË£ú„ÇíÁîüÊàê\n                      try { runAnalyze(arr.filter(Boolean) as any); } catch {}\n                      // Apply key to analysis store if possible\n                      const tonicPc = PITCHES.indexOf(sk.key.tonic as any);\n                      if (tonicPc >= 0) {\n                        try { selectKey?.({ tonic: tonicPc as any, mode: (String(sk.key.scaleId || '')?.toLowerCase().includes('aeolian') || String(sk.key.scaleId||'').toLowerCase().includes('minor') ? 'Minor' : 'Major') as any }); } catch {}\n                      }\n                      track('open_project', { page: 'chord_progression', id: sk.id });\n                      setShowSketchList(false);\n                      setSelectedSketchForAction(null);\n                    } catch {}\n                  }}\n                >\n                  Edit\n                </button>\n                <button\n                  type=\"button\"\n                  className=\"w-full chip-pressable inline-flex items-center justify-center gap-1 px-4 py-2 rounded-lg text-sm border\"\n                  onClick={async () => {\n                    try {\n                      const sk = selectedSketchForAction;\n                      // ExportÊ©üËÉΩ„ÇíÂÆüË£ÖÔºàÂæå„ÅßËøΩÂä†Ôºâ\n                      await handleExportSketch(sk);\n                      setSelectedSketchForAction(null);\n                    } catch {}\n                  }}\n                >\n                  Export\n                </button>\n                <button\n                  type=\"button\"\n                  className=\"w-full chip-pressable inline-flex items-center justify-center gap-1 px-4 py-2 rounded-lg text-sm border\"\n                  onClick={() => setSelectedSketchForAction(null)}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Export-only compact card (offscreen) */}\n        <div\n          ref={exportCardRef}\n          aria-hidden\n          style={{\n            position: 'fixed',\n            left: 0,\n            top: 0,\n            zIndex: 9999,\n            opacity: 0.0001,\n            pointerEvents: 'none',\n            width: 800,\n            height: 600,\n            background: '#ffffff',\n            color: '#000000',\n            padding: 24,\n            borderRadius: 12,\n            border: '2px solid #cbd5e1',\n            boxShadow: '0 4px 6px rgba(0,0,0,0.1)'\n          }}\n        >\n          {(() => {\n            const exportName = currentExportName || (nameInput?.trim() ? nameInput : defaultSketchName);\n            const keyLabel = (() => {\n              const k = selFromStore;\n              if (!k) return '-';\n              return `${PITCHES[k.tonic]} ${k.mode}`;\n            })();\n            const progText = progression.join(' ');\n            const scaleLabel = (() => {\n              const s = selectedScale;\n              if (!s) return '-';\n              return scaleTypeLabel(s.type);\n            })();\n            const fb = (() => {\n              const capoN = 0;\n              const rootPc = selectedScale ? selectedScale.root : undefined;\n              const notesSounding = (selectedScale && typeof rootPc === 'number')\n                ? getScalePitchesById(rootPc, selectedScale.type as any).map(pc => PITCHES[pc])\n                : [];\n              const displayMode = isHeptatonic ? (fbDisplay as any) : ('degrees' as any);\n              const quality: Quality = (() => {\n                const q = selectedScale?.type;\n                if (!q) return 'maj';\n                return q.toLowerCase().includes('aeolian') || q.toLowerCase().startsWith('min') ? 'min' : 'maj';\n              })();\n              const rootForContext = typeof rootPc === 'number' ? rootPc : 0;\n              return (\n                <div style={{ marginTop: 8, background: '#ffffff', border: '2px solid #cbd5e1', borderRadius: '8px', padding: '12px', width: '100%' }}>\n                  <Fretboard\n                    overlay={{ viewMode: 'sounding', capo: capoN, notes: notesSounding, chordNotes: overlayChordNotes ?? undefined, showScaleGhost: Boolean(overlayChordNotes), display: displayMode, scaleRootPc: (typeof rootPc === 'number' ? rootPc : 0), scaleType: (selectedScale?.type ?? 'Ionian'), context: { chordRootPc: (typeof rootPc === 'number' ? rootPc : 0), quality } }}\n                    onRequestForms={() => {}}\n                  />\n                </div>\n              );\n            })();\n            return (\n              <div style={{\n                background: '#ffffff',\n                color: '#000000',\n                fontFamily: 'ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif',\n                width: '100%',\n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '12px',\n                padding: '8px'\n              } as any}>\n                <div style={{ fontWeight: 700, fontSize: 24, color: '#000000', lineHeight: 1.3 }}>{exportName}</div>\n                <div style={{ fontSize: 18, color: '#000000', fontWeight: 600 }}>Key: <span style={{ color: '#1e40af' }}>{keyLabel}</span></div>\n                <div style={{ fontSize: 16, color: '#000000', fontWeight: 500 }}>Progression: <span style={{ color: '#1e40af' }}>{progText || '-'}</span></div>\n                <div style={{ fontSize: 16, color: '#000000', fontWeight: 500 }}>Scale: <span style={{ color: '#1e40af' }}>{scaleLabel}</span></div>\n                <div style={{ flex: 1, background: '#ffffff', border: '2px solid #cbd5e1', borderRadius: '8px', padding: '12px', overflow: 'hidden' }}>\n                  {fb}\n                </div>\n              </div>\n            );\n          })()}\n        </div>\n          {keyCandidates.length > 0 ? (\n            <div className=\"space-y-4\">\n              {/* Low accuracy warning - only show after analyze */}\n              {keyCandidates.length > 0 && progression.length < 8 && (\n                <div className=\"text-xs px-3 py-2 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200\">\n                  ‚ö†Ô∏è Á≤æÂ∫¶Âêë‰∏ä„ÅÆ„Åü„ÇÅ„ÄÅ8„Ç≥„Éº„Éâ‰ª•‰∏ä„ÅÆÂÖ•Âäõ„ÇíÊé®Â•®„Åó„Åæ„ÅôÔºàÁèæÂú®: {progression.length}„Ç≥„Éº„ÉâÔºâ\n                </div>\n              )}\n              {/* === Key === */}\n              <H3>Key</H3>\n              <div className=\"flex items-center justify-between gap-2\">\n                <div className=\"chip-row mb-2\" role=\"tablist\" aria-label=\"Key candidates\">\n                  {keyCandidates.map((k, idx) => {\n                    const active = selFromStore && selFromStore.tonic === k.tonic && selFromStore.mode === k.mode;\n                    const label = `${PITCHES[k.tonic]} ${k.mode}`;\n                    const reasons = k.reasons.join(\"\\n\");\n                    return (\n                      <button\n                        key={`${label}-${idx}`}\n                        role=\"tab\"\n                        aria-selected={active}\n                        className={[\"chip\",\"chip--key\", active?\"chip--active\":\"\"].join(\" \")}\n                        title={`Why this key\\n${reasons}`}\n                        onClick={() => selectKey({ tonic: k.tonic, mode: k.mode })}\n                        data-roving=\"item\"\n                      >\n                        {label} {Math.round(k.confidence)}%\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n              {/* === Scale === */}\n              <div className=\"result-block\">\n                <H3>\n                  <span className=\"flex items-center gap-2\">\n                    <span>Scale</span>\n                    {(() => {\n                      const curId = (selectedScale?.type as any) ?? (scaleCandidates?.[0]?.type as any) ?? 'Ionian';\n                      const cur = SCALE_CATALOG.find(s => s.id === (curId as any));\n                      if (!cur) return null;\n                      const notesInC = getScalePitchesById(0, cur.id).map(pc => PITCHES[pc]).join(' ');\n                      return (\n                        <InfoDot title={cur.display.en} className=\"ml-1\" linkHref=\"/resources/glossary\" linkLabel=\"Glossary\">\n                          <div className=\"text-sm\">\n                            <div className=\"mb-1\"><b>Degrees:</b> {cur.degrees.join(' ')}</div>\n                            <div className=\"mb-1\"><b>Notes in C:</b> {notesInC}</div>\n                            {cur.info?.oneLiner && (<div className=\"mb-1\"><b>About:</b> {cur.info.oneLiner}</div>)}\n                          </div>\n                        </InfoDot>\n                      );\n                    })()}\n                  </span>\n                </H3>\n                <div className=\"chip-row mb-2\" role=\"tablist\" aria-label=\"Scale candidates\">\n                  {scaleCandidates.map((s, idx) => {\n                    console.log('[Scale type]', s.type);\n                    const type = normalizeScaleId(s.type as any);\n                    const active = selectedScale?.type === type && selectedScale?.root === s.root;\n                    const label = `${PITCHES[s.root]} ${scaleTypeLabel(type as any)}`;\n                    return (\n                      <button\n                        key={`${label}-${idx}`}\n                        role=\"tab\"\n                        aria-selected={active}\n                        className={[\"chip\", \"chip--key\", active ? \"chip--active\" : \"\"].join(\" \")}\n                        onClick={() => { selectScale(s); track('scale_pick', { page:'find-key', scale: s.type, key: PITCHES[s.root] }); }}\n                        data-roving=\"item\"\n                      >\n                        {label} {Math.round(s.score)}%\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n            </div>\n        ) : (\n          <div className=\"text-sm opacity-70\">Click Analyze to see results.</div>\n        )}\n      </section>\n\n      {/* Tools „Çª„ÇØ„Ç∑„Éß„É≥ÔºàFretboard‰ª•‰∏ãÔºâ */}\n      <section className=\"ot-card mt-2\">\n        <H2>Tools</H2>\n        <div className=\"space-y-4\">\n              {/* === Fretboard === */}\n              <div className=\"result-block\">\n                <H3\n                  right={\n                    <div ref={fbToggleRef} className=\"flex items-center gap-2 bg-transparent shadow-none fretboard-toggle\" aria-label=\"Fretboard notation\" role=\"tablist\">\n                      <button\n                        role=\"tab\"\n                        aria-selected={fbDisplay === 'degrees'}\n                        tabIndex={fbDisplay === 'degrees' ? 0 : -1}\n                        className={[\"chip\",\"chip--key\", fbDisplay === 'degrees' ? \"chip--active\" : \"\"].join(\" \")}\n                        onClick={()=>setFbDisplay('degrees')}\n                        data-roving=\"item\"\n                      >Degrees</button>\n                      <button\n                        role=\"tab\"\n                        aria-selected={fbDisplay === 'names'}\n                        tabIndex={isHeptatonic && fbDisplay === 'names' ? 0 : -1}\n                        aria-disabled={!isHeptatonic}\n                        className={[\"chip\",\"chip--key\", fbDisplay === 'names' ? \"chip--active\" : \"\", !isHeptatonic ? \"chip--disabled\" : \"\"].join(\" \")}\n                        onClick={()=>{ if (isHeptatonic) setFbDisplay('names'); }}\n                        data-roving=\"item\"\n                      >Names</button>\n                      {/* NamesÂè≥„ÅÆÈü≥Ëâ≤ÈÅ∏Êäû„ÅØÂâäÈô§ */}\n                    </div>\n                  }\n                >Fretboard</H3>\n                <div className=\"fret-wrap\">\n                  <div className=\"fret-inner\">\n                    {selectedScale ? (() => {\n                      const capoN = 0;\n                      const rootPc = selectedScale.root;\n                      const notesSounding = getScalePitchesById(rootPc, selectedScale.type as any).map(pc => PITCHES[pc]);\n                      const displayMode = isHeptatonic ? (fbDisplay as any) : ('degrees' as any);\n                      const quality: Quality = (() => {\n                        const q = selectedScale?.type;\n                        if (!q) return 'maj';\n                        return q.toLowerCase().includes('aeolian') || q.toLowerCase().startsWith('min') ? 'min' : 'maj';\n                      })();\n                      const rootForContext = rootPc;\n                      return (\n                        <Fretboard\n                          overlay={{ viewMode: 'sounding', capo: capoN, notes: notesSounding, chordNotes: overlayChordNotes ?? undefined, showScaleGhost: Boolean(overlayChordNotes), display: displayMode, scaleRootPc: rootPc as any, scaleType: selectedScale.type as any, context: { chordRootPc: rootPc, quality } }}\n                          onRequestForms={(at, ctx) => {\n                            setFormsPop({ at, rootPc: ctx.rootPc ?? rootForContext, quality: ctx.quality });\n                          }}\n                          formShape={formShape}\n                        />\n                      );\n                    })() : (\n                      <div className=\"text-center text-sm opacity-50 py-8\">\n                        Click Analyze to see fretboard\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* === Diatonic (Capo-based table) === */}\n              <section className=\"result-block space-y-2\">\n                <H3>\n                  <span className=\"flex items-center gap-2\">\n                    <span>Diatonic</span>\n                    <InfoDot\n                      className=\"ml-1\"\n                      title=\"Diatonic chords\"\n                      linkHref=\"/resources/glossary\"\n                      linkLabel=\"Glossary\"\n                    >\n                      <p className=\"text-sm\">Chords built only from the key‚Äôs scale tones (I‚Äìii‚Äìiii‚ÄìIV‚ÄìV‚Äìvi‚Äìvii¬∞).</p>\n                      <ul className=\"mt-2 list-disc pl-5 space-y-1 text-sm\">\n                        <li>Stable sound: everything stays inside the key.</li>\n                        <li>Use: begin inside ‚Üí add color with a borrowed chord (iv, bVII, bVI).</li>\n                        <li>Try: ii‚ÄìV‚ÄìI or IV‚ÄìV‚ÄìI for clear motion.</li>\n                      </ul>\n                      <h4 className=\"mt-3 font-medium\">Shaped vs. Sounding (Capo)</h4>\n                      <ul className=\"mt-1 list-disc pl-5 space-y-1 text-sm\">\n                        <li>Shaped: labels show the shapes you fret after capo.</li>\n                        <li>Sounding: labels show the actual pitch you hear.</li>\n                      </ul>\n                    </InfoDot>\n                  </span>\n                </H3>\n                <DiatonicCapoTable\n                  selectedId={selectedCellId}\n                  onSelectId={(id)=> setSelectedCellId(id)}\n                  onPick={async ({ id, pcs, isRightClick })=>{\n                    // Âè≥„ÇØ„É™„ÉÉ„ÇØ„ÅÆÂ†¥Âêà„ÅØ„Ç≥„Éº„ÉâÈÄ≤Ë°å„Å´ËøΩÂä†\n                    if (isRightClick) {\n                      // „ÉÄ„Ç§„Ç¢„Éà„Éã„ÉÉ„ÇØ„ÉÜ„Éº„Éñ„É´„Åã„Çâ„Ç≥„Éº„ÉâÂêç„ÇíÂèñÂæó\n                      const selectedKey = useAnalysisStore.getState().selectedKey;\n                      const selectedScale = useAnalysisStore.getState().selectedScale;\n                      if (!selectedKey || !selectedScale) return;\n                      \n                      let st = selectedScale.type as any;\n                      let ivs = (SCALE_INTERVALS as any)[st] ?? [];\n                      if (ivs.length !== 7) {\n                        const parent = parentModeOf(st);\n                        if (parent) ivs = (SCALE_INTERVALS as any)[parent] ?? [];\n                      }\n                      if (ivs.length !== 7) return;\n                      \n                      const tris = diatonicTriads({ tonicPc: selectedKey.tonic, scaleIntervals: ivs });\n                      const degreeIndex = parseInt(id.replace('open-', ''));\n                      const triad = tris[degreeIndex];\n                      if (!triad) return;\n                      \n                      const chordSym = triadToChordSym({ rootPc: triad.rootPc, quality: triad.quality });\n                      const newSlots = [...slots];\n                      newSlots[cursorIndex] = chordSym;\n                      setSlots(newSlots);\n                      if (cursorIndex < 11) setCursorIndex(cursorIndex + 1);\n                      track('diatonic_pick', { page:'find-key', action: 'right_click_add' });\n                      return;\n                    }\n                    \n                    // Âêå„Åò„Çª„É´„ÇíÂÜçÈÅ∏Êäû ‚Üí „É™„Çª„ÉÉ„ÉàÔºà„Çπ„Ç±„Éº„É´„Éà„Éº„É≥„ÅÆ„ÅøË°®Á§∫„Å´Êàª„ÅôÔºâ\n                    if (selectedCellId === id) {\n                      setOverlayChordNotes(null);\n                      setSelectedCellId(null);\n                      resetForms();\n                      return;\n                    }\n                    const mainNotes = pcs.map(pc => PITCHES[pc] as string);\n                    setOverlayChordNotes(mainNotes);\n                    setSelectedCellId(id);\n                    resetForms();\n                    track('diatonic_pick', { page:'find-key' });\n                    // ÂíåÈü≥ÂÜçÁîüÔºà„Éî„ÉÉ„ÉÅ„ÇØ„É©„Çπ‚ÜíC4Âü∫Ê∫ñ„ÅÆÂÆüÈü≥„Å´Â§âÊèõ„Åó„Å¶3Èü≥ÂêåÊôÇÔºâ\n                    try {\n                      await player.resume();\n                      const midis = pcs.map(pc => 60 + (pc % 12));\n                      player.playChord(midis, 'lightStrum', 260);\n                    } catch {}\n                  }}\n                />\n              </section>\n              \n              {/* === Roman (hide for non-heptatonic scales) === */}\n              {isHeptatonic && (\n                <>\n                  <H3>Roman</H3>\n                  <div ref={romanBoxRef} className=\"rounded-md border px-3 py-2\" aria-live=\"polite\" data-testid=\"roman-row\">\n                    <div className=\"flex-1 overflow-x-auto whitespace-nowrap text-lg md:text-xl tracking-wide\">\n                      {romanLine.length === 0 ? (\n                        <span>-</span>\n                      ) : (\n                        romanLine.map((tok, i) => (\n                          <React.Fragment key={`rom-${i}`}>\n                            <span\n                              data-idx={i}\n                              className={romanHL && i >= romanHL.start && i <= romanHL.end ? 'roman-mark' : undefined}\n                            >\n                              {String(tok || '').toUpperCase()}\n                            </span>\n                            {i < romanLine.length - 1 ? <span aria-hidden className=\"mx-1\">‚Äì</span> : null}\n                          </React.Fragment>\n                        ))\n                      )}\n                    </div>\n                  </div>\n                </>\n              )}\n\n              {/* Patterns */}\n              {patternHits.length > 0 && (\n                <div className=\"mt-2 flex flex-wrap items-center gap-2\">\n                  <span className=\"text-xs opacity-70\">Patterns</span>\n                  {(() => {\n                    const h = patternHits[0];\n                    const idToEn: Record<string, any> = {\n                      'doo-wop': 'dooWop',\n                      'axis': 'axis',\n                      'canon': 'canon',\n                      'ii-V-I': 'twoFiveOne',\n                      'turnaround': 'turnaround',\n                      'andalusian': 'andalusian',\n                      'authentic': 'authentic',\n                      'plagal': 'plagal',\n                      'deceptive': 'deceptive',\n                    };\n                    const en = idToEn[h.id] ? patternInfoEN(idToEn[h.id]) : null;\n                    const label = en?.label || upperRomansInParens(h.name).replace(/\\(I‚Äìvi‚ÄìIV‚ÄìV\\)/, \"(I‚ÄìVI‚ÄìIV‚ÄìV)\");\n                    const summary = en?.summary || (h.summary || h.name);\n                    const isActive = !!(romanHL && romanHL.start === h.start && romanHL.end === h.end);\n                    return (\n                      <>\n                        <button\n                          key={`${h.id}-0`}\n                          type=\"button\"\n                          className={[\"text-sm leading-tight font-medium hover:opacity-80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400/50 rounded\"].join(' ')}\n                          title={summary}\n                          onClick={() => {\n                            setRomanHL(prev => (prev && prev.start === h.start && prev.end === h.end)\n                              ? null\n                              : { start: Math.max(0, h.start), end: Math.max(h.start, Math.min(romanLine.length - 1, h.end)) }\n                            );\n                            requestAnimationFrame(() => {\n                              const box = romanBoxRef.current;\n                              if (!box) return;\n                              const mark = box.querySelector(`[data-idx=\"${h.start}\"]`) as HTMLElement | null;\n                              if (mark) box.scrollLeft = Math.max(0, mark.offsetLeft - 12);\n                            });\n                          }}\n                        >\n                          {label}\n                        </button>\n                        <InfoDot ariaLabel={`${label} ‚Äì info`} text={`${label}\\n\\n${summary}`} />\n                      </>\n                    );\n                  })()}\n                </div>\n              )}\n\n              {/* Cadence row (keep label in sync with Patterns) */}\n              {(cadences.length > 0 || fallbackCadence) && (\n                <div className=\"mt-2 flex flex-wrap items-center gap-2\">\n                  <span className=\"text-xs opacity-70\">Cadence</span>\n                  {(() => {\n                    const c: any = cadences[0] ?? fallbackCadence;\n                    const t = c?.type ?? c; // 'perfect' | 'deceptive' | 'half'\n                    const tail = c?.tail ?? c?.tailRoman;\n                    const label = formatCadenceShort(t, tail);\n                    return (\n                      <span className=\"inline-flex items-center gap-1.5 text-sm leading-tight\">\n                        <span className=\"font-medium\">{label}</span>\n                        <InfoDot text={cadenceTooltip(t)} />\n                      </span>\n                    );\n                  })()}\n                </div>\n              )}\n              \n              \n              {/* Capo block removed (feature gated off) */}\n              \n              \n              {/* link to open in chords removed per spec */}\n                </div>\n        </section>\n      <section className=\"ot-card\" aria-label=\"Ad\">\n        <AdSlot page=\"chord_progression\" format=\"horizontal\" />\n      </section>\n      \n      {/* Preset Popup */}\n      {showPresetPopup && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\" style={{ backdropFilter: 'blur(4px)' }}>\n          <div ref={presetPopupRef} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">Load Preset</h3>\n            \n            {/* Key selector */}\n            <div className=\"mb-4\">\n              <label className=\"text-xs opacity-70 mb-1 block\">Key</label>\n              <div className=\"flex flex-wrap gap-1\">\n                {['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'].map(k => (\n                  <button\n                    key={k}\n                    className={`chip ${presetKey === k ? 'chip--active' : ''}`}\n                    onClick={() => setPresetKey(k)}\n                  >\n                    {k}\n                  </button>\n                ))}\n              </div>\n            </div>\n            \n            {/* Preset buttons */}\n            <div className=\"space-y-2 max-h-[60vh] overflow-y-auto\">\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-V-vi-IV', ['‚Ö†', '‚Ö§', '‚Ö•m', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö§‚Äì‚Ö•m‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Pop progression</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('ii-V-I', ['‚Ö°m', '‚Ö§', '‚Ö†'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö°m‚Äì‚Ö§‚Äì‚Ö†</div>\n                <div className=\"text-xs opacity-70\">Jazz turnaround</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('12-bar-blues', ['‚Ö†', '‚Ö†', '‚Ö†', '‚Ö†', '‚Ö£', '‚Ö£', '‚Ö†', '‚Ö†', '‚Ö§', '‚Ö£', '‚Ö†', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">12-bar Blues</div>\n                <div className=\"text-xs opacity-70\">Classic blues form (all 12 slots)</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-II', ['‚Ö†', '‚Ö°'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö°</div>\n                <div className=\"text-xs opacity-70\">Simple two-chord progression</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bVII-IV', ['‚Ö†', '‚ô≠‚Ö¶', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö¶‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Rock progression</div>\n              </button>\n              \n              {/* Êñ∞Ë¶èËøΩÂä†: 5„Å§„ÅÆÊúâÁî®„Å™„Éó„É™„Çª„ÉÉ„Éà */}\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('vi-IV-I-V', ['‚Ö•m', '‚Ö£', '‚Ö†', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö•m‚Äì‚Ö£‚Äì‚Ö†‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Emotional / Ballad (I-V-vi-IV„ÅÆÈÄÜÂõûËª¢)</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-vi-IV-V', ['‚Ö†', '‚Ö•m', '‚Ö£', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö•m‚Äì‚Ö£‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">50's progression / Doo-wop</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-IV-V', ['‚Ö†', '‚Ö£', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö£‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Three-chord song / Rock classic</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('vi-ii-V-I', ['‚Ö•m', '‚Ö°m', '‚Ö§', '‚Ö†'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö•m‚Äì‚Ö°m‚Äì‚Ö§‚Äì‚Ö†</div>\n                <div className=\"text-xs opacity-70\">Circle progression / Jazz standard</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bVII-bVI-bVII', ['‚Ö†', '‚ô≠‚Ö¶', '‚ô≠‚Ö•', '‚ô≠‚Ö¶'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö¶‚Äì‚ô≠‚Ö•‚Äì‚ô≠‚Ö¶</div>\n                <div className=\"text-xs opacity-70\">Mixolydian vamp / Rock anthem</div>\n              </button>\n              \n              {/* Êñ∞Ë¶èËøΩÂä†: „Åï„Çâ„Å´10Á®ÆÈ°û„ÅÆ„Éó„É™„Çª„ÉÉ„Éà */}\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-IVm-I-V', ['‚Ö†', '‚Ö£m', '‚Ö†', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö£m‚Äì‚Ö†‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Borrowed chord / Minor IV</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('vi-IV-I-III', ['‚Ö•m', '‚Ö£', '‚Ö†', '‚Ö¢'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö•m‚Äì‚Ö£‚Äì‚Ö†‚Äì‚Ö¢</div>\n                <div className=\"text-xs opacity-70\">Andalusian cadence / Spanish feel</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bIII-bVII-IV', ['‚Ö†', '‚ô≠‚Ö¢', '‚ô≠‚Ö¶', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö¢‚Äì‚ô≠‚Ö¶‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Modal interchange / Epic progression</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-iii-IV-V', ['‚Ö†', '‚Ö¢m', '‚Ö£', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö¢m‚Äì‚Ö£‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Classic progression / Beatles style</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-V-vi-iii-IV-I-IV-V', ['‚Ö†', '‚Ö§', '‚Ö•m', '‚Ö¢m', '‚Ö£', '‚Ö†', '‚Ö£', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö§‚Äì‚Ö•m‚Äì‚Ö¢m‚Äì‚Ö£‚Äì‚Ö†‚Äì‚Ö£‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Pachelbel's Canon / Wedding classic</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bVI-bVII-I', ['‚Ö†', '‚ô≠‚Ö•', '‚ô≠‚Ö¶', '‚Ö†'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö•‚Äì‚ô≠‚Ö¶‚Äì‚Ö†</div>\n                <div className=\"text-xs opacity-70\">Power ballad / 80s rock</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('vi-V-IV-III', ['‚Ö•m', '‚Ö§', '‚Ö£', '‚Ö¢'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö•m‚Äì‚Ö§‚Äì‚Ö£‚Äì‚Ö¢</div>\n                <div className=\"text-xs opacity-70\">Descending progression / Melancholic</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-IV-bVII-IV', ['‚Ö†', '‚Ö£', '‚ô≠‚Ö¶', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö£‚Äì‚ô≠‚Ö¶‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Folk/Country vamp</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bVII-IV-I', ['‚Ö†', '‚ô≠‚Ö¶', '‚Ö£', '‚Ö†'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö¶‚Äì‚Ö£‚Äì‚Ö†</div>\n                <div className=\"text-xs opacity-70\">Stadium anthem / Closing progression</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-iii-vi-IV', ['‚Ö†', '‚Ö¢m', '‚Ö•m', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö¢m‚Äì‚Ö•m‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Smooth descent / R&B style</div>\n              </button>\n            </div>\n            \n            <button\n              className=\"mt-4 w-full px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600\"\n              onClick={() => setShowPresetPopup(false)}\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* M3.5: Toast notifications */}\n      {toastConfig && (\n        <Toast\n          message={toastConfig.message}\n          type={toastConfig.type}\n          ctaText={toastConfig.ctaText}\n          ctaHref={toastConfig.ctaHref}\n          ctaPlace={toastConfig.ctaPlace}\n          onClose={() => setToastConfig(null)}\n        />\n      )}\n    </main>\n  );\n}\n\nconst AdvSection: React.FC<{title:string; children:React.ReactNode}> = ({ title, children }) => (\n  <div>\n    <div className=\"text-xs text-black/60 dark:text-white/60 mb-1\">{title}</div>\n    <div className=\"adv-grid\">\n      {children}\n    </div>\n  </div>\n);\n\nconst Chip: React.FC<{label:string; onClick?:()=>void; disabled?:boolean; active?:boolean; small?:boolean}> = ({ label, onClick, disabled, active, small }) => (\n  <button\n    className={[\"chip\", small ? \"chip--sm\" : \"\", active ? \"chip--active\" : \"\", disabled ? \"chip--disabled\" : \"\"].join(\" \")}\n    onClick={onClick}\n    aria-disabled={disabled}\n  >\n    {label}\n  </button>\n);\n\n// moved to components/ui/InfoDot\n\n\n\n","\"use client\";\nimport React from \"react\";\nimport { usePro } from \"./ProProvider\";\n\nexport const ProGate: React.FC<{ title?: string; children?: React.ReactNode }> = ({ title = \"Advanced ‚Äî Pro\", children }) => {\n  const { upgrade } = usePro();\n  return (\n    <div className=\"relative\">\n      <div className=\"pointer-events-none opacity-50\">{children}</div>\n      <div className=\"absolute inset-0 flex items-center justify-center bg-white/60 backdrop-blur-sm rounded\">\n        <div className=\"flex flex-col items-center gap-2\">\n          <div className=\"text-sm font-medium\">üîí {title}</div>\n          <button className=\"px-3 py-1 rounded bg-[var(--brand-primary)] text-white\" onClick={upgrade}>\n            Upgrade to Pro\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\n\n","\"use client\";\nimport React from \"react\";\nimport { usePro } from \"./ProProvider\";\n\nexport default function UpgradeModal({\n  open, onClose,\n  title = \"Go Pro to unlock Advanced chords\",\n  body = \"Advanced chord qualities (aug, add9, tensions, and slash chords) are available in Pro.\",\n}: { open: boolean; onClose: () => void; title?: string; body?: string; }) {\n  const { upgrade } = usePro();\n  if (!open) return null;\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\">\n      <div className=\"w-full max-w-md rounded-2xl bg-white p-5 shadow-xl\">\n        <h3 className=\"text-lg font-semibold mb-2\">{title}</h3>\n        <p className=\"text-sm text-gray-600 mb-4\">{body}</p>\n        <div className=\"flex gap-2 justify-end\">\n          <button className=\"px-3 py-1.5 rounded border\" onClick={onClose}>Maybe later</button>\n          <button className=\"px-3 py-1.5 rounded bg-[var(--brand-primary)] text-white\" onClick={upgrade}>\n            Upgrade to Pro\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n\n","import { create } from 'zustand';\nimport { Sketch } from '@/types/sketch';\nimport { loadAll, saveLocalFree, saveCloudPro } from '@/features/sketch/storage';\n\ntype SketchState = {\n  sketches: Sketch[];\n  currentSketch: Sketch | null;\n  isLoading: boolean;\n  error: string | null;\n\n  // Actions\n  loadSketches: () => void;\n  saveSketch: (sketch: Omit<Sketch, 'id' | 'createdAt' | 'updatedAt'>) => Promise<{ ok: boolean; reason?: string }>;\n  loadSketch: (id: string) => void;\n  deleteSketch: (id: string) => void;\n  duplicateSketch: (id: string) => void;\n  renameSketch: (id: string, name: string) => void;\n\n  // Auto-save\n  startAutoSave: (sketch: Sketch) => void;\n  stopAutoSave: () => void;\n};\n\nconst generateId = () => Math.random().toString(36).substr(2, 9);\n\nexport const useSketchStore = create<SketchState>((set, get) => ({\n  sketches: [],\n  currentSketch: null,\n  isLoading: false,\n  error: null,\n\n  loadSketches: () => {\n    set({ isLoading: true, error: null });\n    try {\n      const sketches = loadAll();\n      set({ sketches, isLoading: false });\n    } catch (error) {\n      set({ error: 'Failed to load sketches', isLoading: false });\n    }\n  },\n\n  saveSketch: async (sketchData) => {\n    const sketch: Sketch = {\n      ...sketchData,\n      id: generateId(),\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    // Free„É¶„Éº„Ç∂„Éº„ÅÆÂ†¥Âêà\n    const result = saveLocalFree(sketch);\n\n    if (result.ok) {\n      // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„ÅåÊõ¥Êñ∞„Åï„Çå„Åü„ÅÆ„Åß„ÄÅ„Çπ„Éà„Ç¢„ÇÇÊõ¥Êñ∞\n      const sketches = loadAll();\n      set({ sketches, currentSketch: sketch });\n      return { ok: true };\n    } else {\n      // Pro„É¶„Éº„Ç∂„Éº„ÅÆÂ†¥ÂêàÔºà„Çπ„Ç±„É´„Éà„É≥ÂÆüË£ÖÔºâ\n      try {\n        await saveCloudPro(sketch);\n        const sketches = loadAll();\n        set({ sketches, currentSketch: sketch });\n        return { ok: true };\n      } catch (error) {\n        return { ok: false, reason: 'cloud_save_failed' };\n      }\n    }\n  },\n\n  loadSketch: (id: string) => {\n    const sketches = get().sketches;\n    const sketch = sketches.find(s => s.id === id);\n    if (sketch) {\n      set({ currentSketch: sketch });\n    }\n  },\n\n  deleteSketch: (id: string) => {\n    const sketches = get().sketches.filter(s => s.id !== id);\n    localStorage.setItem('ot_sketches', JSON.stringify(sketches));\n    set({ sketches });\n\n    if (get().currentSketch?.id === id) {\n      set({ currentSketch: null });\n    }\n  },\n\n  duplicateSketch: (id: string) => {\n    const sketches = get().sketches;\n    const original = sketches.find(s => s.id === id);\n    if (original) {\n      const duplicate: Sketch = {\n        ...original,\n        id: generateId(),\n        name: `${original.name} Copy`,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n\n      const result = saveLocalFree(duplicate);\n      if (result.ok) {\n        const updatedSketches = loadAll();\n        set({ sketches: updatedSketches, currentSketch: duplicate });\n      }\n    }\n  },\n\n  renameSketch: (id: string, name: string) => {\n    const sketches = get().sketches.map(s =>\n      s.id === id ? { ...s, name, updatedAt: new Date().toISOString() } : s\n    );\n\n    localStorage.setItem('ot_sketches', JSON.stringify(sketches));\n    set({ sketches });\n\n    if (get().currentSketch?.id === id) {\n      set({ currentSketch: { ...get().currentSketch, name, updatedAt: new Date().toISOString() } });\n    }\n  },\n\n  startAutoSave: (sketch: Sketch) => {\n    // 3Áßí„Ç¢„Ç§„Éâ„É´Âæå„Å´Ëá™Âãï‰øùÂ≠ò\n    const timeoutId = setTimeout(() => {\n      const currentState = get();\n      if (currentState.currentSketch?.id === sketch.id) {\n        // Â§âÊõ¥„Åå„ÅÇ„Å£„ÅüÂ†¥Âêà„ÅÆ„Åø‰øùÂ≠ò\n        const updatedSketch = { ...sketch, updatedAt: new Date().toISOString() };\n        const result = saveLocalFree(updatedSketch);\n        if (result.ok) {\n          const sketches = loadAll();\n          set({ sketches, currentSketch: updatedSketch });\n        }\n      }\n    }, 3000);\n\n    // „Çø„Ç§„É†„Ç¢„Ç¶„ÉàID„Çí‰øùÊåÅÔºà„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„ÉóÁî®Ôºâ\n    return timeoutId;\n  },\n\n  stopAutoSave: () => {\n    // Ëá™Âãï‰øùÂ≠ò„Çí„Ç≠„É£„É≥„Çª„É´\n  },\n}));\n","\"use client\";\nimport { useEffect, useCallback } from 'react';\nimport { useCtaTracking } from '@/hooks/useCtaTracking';\n\nexport type ToastType = 'info' | 'success' | 'warning';\nexport type ToastCtaPlace = 'limit_toast' | 'png_toast';\n\nexport interface ToastProps {\n  message: string;\n  type?: ToastType;\n  ctaText?: string;\n  ctaHref?: string;\n  ctaPlace?: ToastCtaPlace;\n  onClose: () => void;\n  duration?: number;\n}\n\nconst TOAST_COLORS: Record<ToastType, string> = {\n  info: 'bg-blue-600',\n  success: 'bg-green-600',\n  warning: 'bg-orange-600',\n};\n\nconst DEFAULT_DURATION = 5000;\n\n/**\n * M3.5: Toast notification component\n * Displays temporary notifications with optional CTA\n * Auto-dismisses after duration (default 5s)\n */\nexport default function Toast({ \n  message, \n  type = 'info', \n  ctaText, \n  ctaHref, \n  ctaPlace,\n  onClose, \n  duration = DEFAULT_DURATION \n}: ToastProps) {\n  const { trackClick } = useCtaTracking();\n\n  useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(onClose, duration);\n      return () => clearTimeout(timer);\n    }\n  }, [duration, onClose]);\n\n  const handleCtaClick = useCallback(() => {\n    if (ctaPlace) {\n      trackClick(ctaPlace);\n    }\n  }, [ctaPlace, trackClick]);\n\n  const bgColor = TOAST_COLORS[type];\n\n  return (\n    <div \n      className=\"fixed bottom-20 sm:bottom-6 left-1/2 -translate-x-1/2 z-50 animate-slide-up max-w-md w-full mx-4\"\n      role=\"alert\"\n      aria-live=\"polite\"\n    >\n      <div className={`${bgColor} text-white rounded-lg shadow-2xl p-4 flex items-center justify-between gap-3`}>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm font-medium\">{message}</p>\n        </div>\n        {ctaText && ctaHref && (\n          <a\n            href={ctaHref}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex-shrink-0 px-3 py-1.5 text-sm font-medium bg-white/20 hover:bg-white/30 rounded transition-colors\"\n            onClick={handleCtaClick}\n          >\n            {ctaText}\n          </a>\n        )}\n        <button\n          onClick={onClose}\n          className=\"flex-shrink-0 w-6 h-6 flex items-center justify-center hover:bg-white/20 rounded transition-colors\"\n          aria-label=\"Close notification\"\n        >\n          ‚úï\n        </button>\n      </div>\n    </div>\n  );\n}\n\n","export const QUICK_QUALITIES = [\"M\",\"m\",\"7\",\"M7\",\"m7\",\"sus4\",\"dim\"] as const;\n\n// Advanced categories\nexport const ADV_EXTENSIONS = [\n  \"6\",\"m6\",\"9\",\"m9\",\"11\",\"M11\",\"13\",\"M13\"\n] as const;\n\nexport const ADV_ALTERED_DOM = [\n  \"7b5\",\"7#5\",\"7b9\",\"7#9\",\"7#11\",\"7b13\",\"7alt\"\n] as const;\n\nexport const ADV_DIM_VARIANTS = [\n  \"dim7\",\"m7b5\"\n] as const;\n\nexport const ADV_SUS_ADDS = [\n  \"sus2\",\"add9\",\"add11\",\"add13\",\"6/9\"\n] as const;\n\nexport const ADV_AUG_MAJMIN = [\n  \"aug\",\"mM7\"\n] as const;\n\nexport const ADVANCED_QUALITIES = [\n  ...ADV_EXTENSIONS,\n  ...ADV_ALTERED_DOM,\n  ...ADV_DIM_VARIANTS,\n  ...ADV_SUS_ADDS,\n  ...ADV_AUG_MAJMIN,\n  \"/bass\",\n] as const;\n\nexport type Quality = typeof QUICK_QUALITIES[number] | typeof ADVANCED_QUALITIES[number];\n\nexport const isAdvanced = (q: string): boolean => (ADVANCED_QUALITIES as readonly string[]).includes(q);\nexport const isQuick = (q: string): boolean => (QUICK_QUALITIES as readonly string[]).includes(q);\n\nexport const BASS_NOTES = [\"C\",\"C#\",\"D\",\"Eb\",\"E\",\"F\",\"F#\",\"G\",\"Ab\",\"A\",\"Bb\",\"B\"] as const;\nexport type BassNote = typeof BASS_NOTES[number];\n\n\n",null,null,null,null,null,null,null,null,null,"export type CadenceType = 'perfect' | 'deceptive' | 'half' | null;\n\nexport function formatCadenceLabel(\n  t: CadenceType,\n  tailRoman?: { from?: string; to?: string }\n): string {\n  if (!t) return 'Cadence: ‚Äî';\n  if (t === 'perfect')   return `Cadence: Perfect (${tailRoman?.from ?? 'V'} ‚Üí ${tailRoman?.to ?? 'I'})`;\n  if (t === 'deceptive') return `Cadence: Deceptive (${tailRoman?.from ?? 'V'} ‚Üí ${tailRoman?.to ?? 'vi'})`;\n  // half cadence ends on V\n  return `Cadence: Half (${tailRoman?.from ? `${tailRoman.from} ‚Üí ` : '‚Ä¶ ‚Üí '}V)`;\n}\n\nexport function cadenceTooltip(t: CadenceType): string {\n  if (!t) return 'No cadence detected.';\n  if (t === 'perfect')   return 'Resolves to the Tonic: V ‚Üí I. Feels fully resolved.';\n  if (t === 'deceptive') return 'Surprises by avoiding I: V ‚Üí vi (or similar).';\n  return 'Phrase ends on the Dominant: ‚Ä¶ ‚Üí V. Feels unresolved.';\n}\n\n// Short inline label for Roman box\nexport function formatCadenceShort(\n  t: CadenceType,\n  tail?: { from?: string; to?: string }\n): string {\n  if (!t) return '';\n  if (t === 'perfect')   return `Perfect (${tail?.from ?? 'V'} ‚Üí ${tail?.to ?? 'I'})`;\n  if (t === 'deceptive') return `Deceptive (${tail?.from ?? 'V'} ‚Üí ${tail?.to ?? 'vi'})`;\n  return `Half (${tail?.from ? `${tail.from} ‚Üí ` : '‚Ä¶ ‚Üí '}V)`;\n}\n\n\n","export type BaseKind = \"major\" | \"minor\" | \"dominant\" | \"diminished\" | \"augmented\" | \"unknown\";\n\nexport const getBaseKind = (q: string): BaseKind => {\n  if (q.startsWith(\"M\") || q === \"M\") return \"major\";\n  if (q.startsWith(\"m\")) return \"minor\";\n  if (q === \"7\" || /^7/.test(q) || [\"9\",\"11\",\"13\"].includes(q)) return \"dominant\";\n  if (q.startsWith(\"dim\") || q === \"m7b5\") return \"diminished\";\n  if (q === \"aug\") return \"augmented\";\n  return \"unknown\";\n};\n\nexport const preferredBase = (candidate: string): BaseKind | \"any\" => {\n  if ([\"M9\",\"M11\",\"M13\",\"6\"].includes(candidate)) return \"major\";\n  if ([\"m6\",\"m9\"].includes(candidate)) return \"minor\";\n  if ([\"7b5\",\"7#5\",\"7b9\",\"7#9\",\"7#11\",\"7b13\",\"7alt\",\"9\",\"11\",\"13\"].includes(candidate)) return \"dominant\";\n  if ([\"dim7\",\"m7b5\"].includes(candidate)) return \"diminished\";\n  if ([\"add9\",\"add11\",\"add13\",\"sus2\",\"6/9\"].includes(candidate)) return \"any\";\n  if (candidate === \"aug\" || candidate === \"mM7\") return \"any\";\n  return \"any\";\n};\n\nexport const isCompatible = (currentBase: BaseKind, candidate: string): boolean => {\n  const pref = preferredBase(candidate);\n  if (pref === \"any\") return true;\n  if (currentBase === \"unknown\") return true;\n  if (currentBase === \"major\" && pref === \"minor\") return false;\n  if (currentBase === \"minor\" && pref === \"major\") return false;\n  if (currentBase !== \"dominant\" && [\"7b5\",\"7#5\",\"7b9\",\"7#9\",\"7#11\",\"7b13\",\"7alt\",\"9\",\"11\",\"13\"].includes(candidate)) {\n    return false;\n  }\n  if (currentBase !== \"diminished\" && [\"dim7\",\"m7b5\"].includes(candidate)) return false;\n  return true;\n};\n\n\n\n","import { PATTERNS } from \"./patterns\";\n\nexport function normalizeRomanToken(tok: string): string {\n  const t = (tok || \"\").toString().trim().toUpperCase();\n  // Remove qualities/extensions, keep degree with optionally B/#\n  return t\n    .replace(/MAJ7|M7|7|MAJ|MIN|MI|DIM|AUG|SUS\\d?|ADD\\d+|√ò|O/g, \"\")\n    .replace(/\\(|\\)/g, \"\")\n    .replace(/[^IVB#]+/g, \"\")\n    .replace(/B/g, \"B\");\n}\n\nexport type Match = {\n  id: string; name: string; summary: string;\n  start: number; end: number; // [start, end)\n};\n\nexport function matchPatterns(\n  romanLine: string[], mode: 'major'|'minor'\n): Match[] {\n  const rom = romanLine.map(normalizeRomanToken);\n  const hits: Match[] = [];\n\n  for (const p of PATTERNS) {\n    const seqs = [p.seq, ...(p.variants ?? [])].map(s => s.map(normalizeRomanToken));\n    for (const seq of seqs) {\n      const L = seq.length;\n      // slide over roman tokens\n      for (let i = 0; i + L <= rom.length; i++) {\n        let ok = true;\n        for (let k = 0; k < L; k++) {\n          if (rom[i + k] !== seq[k]) { ok = false; break; }\n        }\n        if (ok) {\n          hits.push({ id: p.id, name: p.name, summary: p.tooltip, start: i, end: i + L });\n          break; // prefer first longest match for this pattern\n        }\n      }\n    }\n  }\n  hits.sort((a,b)=> (b.end-b.start)-(a.end-a.start));\n  return dedupe(hits);\n}\n\nfunction dedupe(xs: Match[]): Match[] {\n  const res: Match[] = [];\n  for (const m of xs) {\n    if (res.some(r => !(m.end <= r.start || r.end <= m.start))) continue;\n    res.push(m);\n  }\n  return res;\n}\n\n\n",null,"// src/features/sketch/storage.ts\nimport { Sketch } from '@/types/sketch';\n\nconst KEY = 'ot_sketches';\nconst FREE_LIMIT = 3;\n\nexport const loadAll = (): Sketch[] =>\n  JSON.parse(localStorage.getItem(KEY) || '[]');\n\nexport const saveLocalFree = (sk: Sketch): { ok: boolean; reason?: string } => {\n  const list = loadAll().filter(s => s.id !== sk.id);\n  list.unshift(sk); // ÂÖàÈ†≠„ÅåÊúÄÊñ∞\n  if (list.length > FREE_LIMIT) {\n    // LRUË∂ÖÈÅé ‚Üí ProË™òÂ∞é\n    localStorage.setItem(KEY, JSON.stringify(list.slice(0, FREE_LIMIT)));\n    return { ok: false, reason: 'limit_exceeded' };\n  }\n  localStorage.setItem(KEY, JSON.stringify(list));\n  return { ok: true };\n};\n\n// ProÂêåÊúü„ÅØ„Çπ„Ç±„É´„Éà„É≥ÔºàÂÆüË£ÖÊ∏à„ÅøAPI„Åå„ÅÇ„Çå„Å∞Â∑Æ„ÅóÊõø„ÅàÔºâ\nexport const saveCloudPro = async (sk: Sketch) => {\n  // await fetch('/api/sketch', { method:'POST', body: JSON.stringify(sk) })\n  return { ok: true };\n};\n\n// Free/Pro„ÅÆÂ¢ÉÁïå„ÅØSSOT„ÅÆÈÄö„Çä„ÄÇ‰øùÂ≠ò/Âëº„Å≥Âá∫„Åó/Ëá™Âãï‰øùÂ≠ò„ÅÆ3ÁÇπ„ÅåM1„ÅÆÊ†∏„ÄÇ\n","// src/features/sketch/useSketch.ts\nimport { useEffect, useRef, useState } from 'react';\nimport { Sketch } from '@/types/sketch';\nimport * as store from './storage';\nimport * as t from '@/lib/telemetry';\n\nexport const useSketch = (isPro: boolean) => {\n  const [sketch, setSketch] = useState<Sketch | null>(null);\n  const timer = useRef<number | null>(null);\n\n  const scheduleAutosave = () => {\n    if (timer.current) window.clearTimeout(timer.current);\n    timer.current = window.setTimeout(() => {\n      if (!sketch) return;\n      (async () => {\n        const r = isPro ? await store.saveCloudPro(sketch) : store.saveLocalFree(sketch);\n        if (!r.ok && r.reason === 'limit_exceeded') {\n          t.track('project_limit_warn', { page: 'chord_progression' });\n          // UIÂÅ¥„Åß„Äå3‰ª∂„Åæ„Åß„Äç„Éà„Éº„Çπ„ÉàË°®Á§∫\n        } else {\n          t.track('save_project', { page: 'chord_progression' });\n        }\n      })();\n    }, 3000); // 3Áßí„Ç¢„Ç§„Éâ„É´\n  };\n\n  // Áä∂ÊÖã„ÅåÂ§â„Çè„Çã„Åü„Å≥„Å´Ëá™Âãï‰øùÂ≠ò„Çí‰∫àÁ¥Ñ\n  useEffect(() => { scheduleAutosave(); /* eslint-disable-next-line */ }, [sketch]);\n\n  return { sketch, setSketch };\n};\n","// src/lib/export/png.ts\nimport * as t from '@/lib/telemetry';\nimport { toPng } from 'html-to-image';\n\nlet exporting = false;\n\nexport async function exportPng(el: HTMLElement, theme:'auto'|'light'|'dark'='auto') {\n  if (exporting) return; // ÈáçË§áÈò≤Ê≠¢\n  exporting = true;\n  try {\n    // ‰∏ÄÊôÇÁöÑ„Å´ÂèØË¶ñÂåñ„Åó„Å¶„É¨„É≥„ÉÄ„É™„É≥„Ç∞„ÇíÁ¢∫ÂÆü„Å´„Åô„Çã\n    const originalOpacity = el.style.opacity;\n    const originalVisibility = el.style.visibility;\n    el.style.opacity = '1';\n    el.style.visibility = 'visible';\n    \n    // FretboardÂÜÖ„ÅÆÂÖ®„Å¶„ÅÆ„ÉÜ„Ç≠„Çπ„ÉàË¶ÅÁ¥†„ÇíÂº∑Âà∂ÁöÑ„Å´ÈªíËâ≤„Å´„Åó„ÄÅ„Éï„É¨„ÉÉ„ÉàÁï™Âè∑„Éú„ÉÉ„ÇØ„Çπ„ÅÆËÉåÊôØ„ÇíË™øÊï¥\n    const allElements = el.querySelectorAll('*');\n    const originalStyles: Array<{ elem: HTMLElement; color: string; fill: string; bg: string }> = [];\n    allElements.forEach((elem) => {\n      const htmlElem = elem as HTMLElement;\n      const originalColor = htmlElem.style.color;\n      const originalFill = htmlElem.style.fill;\n      const originalBg = htmlElem.style.background;\n      originalStyles.push({ elem: htmlElem, color: originalColor, fill: originalFill, bg: originalBg });\n      \n      // ÂÖ®„Å¶„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„ÇíÈªíËâ≤„Å´\n      htmlElem.style.color = '#000000';\n      if (htmlElem.tagName === 'text' || htmlElem.tagName === 'tspan') {\n        htmlElem.style.fill = '#000000';\n      }\n      \n      // „Éï„É¨„ÉÉ„ÉàÁï™Âè∑„ÇíÂê´„ÇÄspanË¶ÅÁ¥†„ÅÆËÉåÊôØ„ÇíËñÑ„ÅÑ„Ç∞„É¨„Éº„Å´Â§âÊõ¥\n      if (htmlElem.tagName === 'SPAN' && htmlElem.className.includes('inline-block')) {\n        const text = htmlElem.textContent?.trim();\n        if (text && /^\\d+$/.test(text)) {\n          htmlElem.style.background = '#f3f4f6'; // ËñÑ„ÅÑ„Ç∞„É¨„Éº (Tailwind gray-100Áõ∏ÂΩì)\n          htmlElem.style.color = '#000000';\n        }\n      }\n    });\n    \n    // „É¨„É≥„ÉÄ„É™„É≥„Ç∞ÂÆå‰∫Ü„ÇíÂæÖ„Å§\n    await new Promise(resolve => setTimeout(resolve, 150));\n    \n    el.dataset.export = theme; // CSS„Åß„ÉÜ„Éº„ÉûÂèçËª¢„ÇíÂà∂Âæ°\n    const dataUrl = await toPng(el, { pixelRatio: 2, backgroundColor: '#ffffff', cacheBust: true });\n    \n    // ÂÖÉ„Å´Êàª„Åô\n    el.style.opacity = originalOpacity;\n    el.style.visibility = originalVisibility;\n    originalStyles.forEach(({ elem, color, fill, bg }) => {\n      elem.style.color = color;\n      elem.style.fill = fill;\n      elem.style.background = bg;\n    });\n    \n    const a = document.createElement('a');\n    a.href = dataUrl; a.download = 'ot-progression.png'; a.click();\n    t.track('export_png', { page: 'chord_progression', ok: true });\n  } catch (e) {\n    t.track('export_png', { page: 'chord_progression', ok: false, err: String(e) });\n  } finally {\n    el.removeAttribute('data-export');\n    exporting = false;\n  }\n}\n","// Roman numeral utilities for chord degree display\n// Mode and functions are intentionally minimal and self-contained.\n\nimport { PITCHES, noteToPc } from \"../theory\";\n\nexport type Mode = \"major\" | \"minor\";\n\n// Ionian/Aeolian degree maps ‚Üí roman index\nconst DEGREE_TO_INDEX_MAJOR: Record<number, number> = {\n  0: 0, // I\n  2: 1, // ii\n  4: 2, // iii\n  5: 3, // IV\n  7: 4, // V\n  9: 5, // vi\n  11: 6, // vii¬∞\n};\n\nconst DEGREE_TO_INDEX_MINOR: Record<number, number> = {\n  0: 0,  // i\n  2: 1,  // ii¬∞\n  3: 2,  // III\n  5: 3,  // iv\n  7: 4,  // v\n  8: 5,  // VI\n  10: 6, // VII\n};\n\nexport const ROMAN_NUMERALS_MAJOR = [\"I\", \"ii\", \"iii\", \"IV\", \"V\", \"vi\", \"vii¬∞\"] as const;\nexport const ROMAN_NUMERALS_MINOR = [\"i\", \"ii¬∞\", \"III\", \"iv\", \"v\", \"VI\", \"VII\"] as const;\n\nfunction isMaj7(sym: string): boolean {\n  return /maj7|M7/.test(sym);\n}\n\nfunction hasGeneric7(sym: string): boolean {\n  // append \"7\" for dominant/mi7 etc. but avoid maj7 and m7b5/dim7\n  if (isMaj7(sym)) return false;\n  if (/m7b5|√∏|dim7/.test(sym)) return false;\n  return /(\\b|[^a-zA-Z])7(?![b#0-9])/i.test(sym) || /\\bm7\\b/i.test(sym);\n}\n\nfunction normalizePcName(input: string): string {\n  const pc = noteToPc(input);\n  return PITCHES[pc] ?? input;\n}\n\ntype RomanOptions = {\n  showQuality?: boolean; // append M7/7 markers\n  accidentalsForNonDiatonic?: boolean; // prefer bII/#iv instead of (F#)\n  uppercase?: boolean; // force uppercase numerals\n};\n\nexport function toRoman(chordSym: string, keyRoot: string, mode: Mode, opts: RomanOptions = {}): string {\n  // Default: prefer diatonic mapping; only use accidentals whenÊòéÁ§∫\n  const { showQuality = true, accidentalsForNonDiatonic = false } = opts;\n  if (!chordSym || !keyRoot) return \"\";\n  const keyPc = noteToPc(keyRoot);\n\n  // Parse root (head of symbol, before slash)\n  const head = chordSym.split(\"/\")[0];\n  const m = head.match(/^([A-G](?:#|b)?)(.*)$/i);\n  if (!m) return chordSym;\n  const chordRoot = normalizePcName(m[1].toUpperCase());\n  const rest = (m[2] || \"\");\n\n  const deg = (noteToPc(chordRoot) - keyPc + 12) % 12;\n\n  const degreeTable = mode === \"major\" ? DEGREE_TO_INDEX_MAJOR : DEGREE_TO_INDEX_MINOR;\n  const romanBase = mode === \"major\" ? ROMAN_NUMERALS_MAJOR : ROMAN_NUMERALS_MINOR;\n  const romanUpper = [\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\"] as const;\n  const idx = degreeTable[deg as keyof typeof degreeTable] as number | undefined;\n\n  if (idx !== undefined) {\n    let roman = (opts.uppercase ? romanUpper[idx] : romanBase[idx]) as string;\n    // preserve diminished mark when forcing uppercase\n    if (opts.uppercase) {\n      if ((mode === \"major\" && idx === 6) || (mode === \"minor\" && idx === 1)) {\n        roman += \"¬∞\";\n      }\n    }\n    if (!showQuality) return roman;\n    if (isMaj7(rest)) return roman + \"M7\";\n    if (hasGeneric7(rest)) return roman + \"7\";\n    return roman;\n  }\n\n  // Try single-step accidentals (# or b) relative to scale degrees\n  if (accidentalsForNonDiatonic) {\n    const scale = mode === \"major\" ? [0,2,4,5,7,9,11] : [0,2,3,5,7,8,10];\n    for (let j = 0; j < scale.length; j++) {\n      const s = scale[j];\n      if ((s + 1) % 12 === deg) {\n        return \"#\" + romanBase[j];\n      }\n      if ((s + 11) % 12 === deg) { // s - 1\n        return \"b\" + romanBase[j];\n      }\n    }\n  }\n  // Fallback: actual root\n  return `(${chordRoot})`;\n}\n\nexport function progressionToRoman(\n  chords: string[],\n  keyRoot: string,\n  mode: Mode\n): string[] {\n  return chords.map((c) => toRoman(c, keyRoot, mode));\n}\n\n\n","export type RomanToken = string; // e.g., 'I','vi','IV','V','bVII','vii¬∞'\n\nexport type Pattern = {\n  id: string;\n  name: string;\n  mode: 'major' | 'minor' | 'any';\n  seq: RomanToken[];\n  variants?: RomanToken[][];\n  summary: string;\n  tags?: string[];\n};\n\nexport const PATTERNS: Pattern[] = [\n  {\n    id: 'doo-wop',\n    name: 'Doo‚ÄëWop (I‚Äìvi‚ÄìIV‚ÄìV)',\n    mode: 'major',\n    seq: ['I','vi','IV','V'],\n    summary: \"50s/60s loop: I‚Üívi‚ÜíIV‚ÜíV back to I.\",\n  },\n  {\n    id: 'axis',\n    name: 'Axis (I‚ÄìV‚Äìvi‚ÄìIV)',\n    mode: 'major',\n    seq: ['I','V','vi','IV'],\n    summary: 'Modern pop four‚Äëchords loop.',\n  },\n  {\n    id: 'canon',\n    name: \"Pachelbel's Canon\",\n    mode: 'major',\n    seq: ['I','V','vi','iii','IV','I','IV','V'],\n    variants: [['I','V','vi','IV']],\n    summary: 'Pachelbel‚Äëstyle ground; long loop back to I.',\n  },\n  {\n    id: 'ii-V-I',\n    name: 'ii‚ÄìV‚ÄìI',\n    mode: 'any',\n    seq: ['ii','V','I'],\n    summary: 'The classic resolution run‚Äëup.',\n  },\n  {\n    id: 'turnaround',\n    name: 'Turnaround (I‚Äìvi‚Äìii‚ÄìV)',\n    mode: 'any',\n    seq: ['I','vi','ii','V'],\n    summary: 'Quick loop returning to the top.',\n  },\n  {\n    id: 'andalusian',\n    name: 'Andalusian (i‚ÄìVII‚ÄìVI‚ÄìV)',\n    mode: 'minor',\n    seq: ['i','VII','VI','V'],\n    summary: 'Classic minor descent; flamenco/Latin flavor.',\n  },\n  {\n    id: 'authentic',\n    name: 'Authentic cadence (V‚ÄìI)',\n    mode: 'any',\n    seq: ['V','I'],\n    summary: 'Perfect cadence V‚ÜíI.',\n  },\n  {\n    id: 'plagal',\n    name: 'Plagal cadence (IV‚ÄìI)',\n    mode: 'any',\n    seq: ['IV','I'],\n    summary: 'Gentle IV‚ÜíI resolution.',\n  },\n  {\n    id: 'deceptive',\n    name: 'Deceptive cadence (V‚Äìvi)',\n    mode: 'major',\n    seq: ['V','vi'],\n    summary: 'Deceptive V‚Üívi keeps motion going.',\n  },\n];\n\n// --- English microcopy for pattern tooltips ------------------------------\nexport type RomanPatternId =\n  | \"dooWop\"\n  | \"axis\"\n  | \"canon\"\n  | \"twoFiveOne\"\n  | \"turnaround\"\n  | \"andalusian\"\n  | \"authentic\"   // perfect V‚ÜíI\n  | \"plagal\"      // IV‚ÜíI\n  | \"deceptive\";  // V‚Üívi\n\nexport const PATTERN_LABEL_EN: Record<RomanPatternId, string> = {\n  dooWop: \"Doo‚ÄëWop (I‚ÄìVI‚ÄìIV‚ÄìV)\",\n  axis: \"Axis (I‚ÄìV‚Äìvi‚ÄìIV)\",\n  canon: \"Canon (I‚ÄìV‚Äìvi‚Äìiii‚ÄìIV‚ÄìI‚ÄìIV‚ÄìV)\",\n  twoFiveOne: \"ii‚ÄìV‚ÄìI\",\n  turnaround: \"Turnaround\",\n  andalusian: \"Andalusian cadence\",\n  authentic: \"Perfect cadence (V ‚Üí I)\",\n  plagal: \"Plagal cadence (IV ‚Üí I)\",\n  deceptive: \"Deceptive cadence (V ‚Üí vi)\",\n};\n\nexport const PATTERN_SUMMARY_EN: Record<RomanPatternId, string> = {\n  dooWop:\n    \"‚Äô50s progression. Nostalgic loop: tonic ‚Üí relative minor ‚Üí subdominant ‚Üí dominant. Try adding 7ths for color.\",\n  axis:\n    \"Modern pop staple. A catchy loop that feels forward yet stable. Swap to ii‚ÄìV at the end for a stronger landing.\",\n  canon:\n    \"Pachelbel‚Äëstyle ground. Persistent bass motion with rotating functions; great for variations and melodies.\",\n  twoFiveOne:\n    \"The classic run‚Äëup then land. Link by guide tones (3rd‚Üî7th). Works anywhere you want a clear resolution.\",\n  turnaround:\n    \"Short cycle that brings you back to the top (e.g., I‚ÄìVI7‚Äìii7‚ÄìV7). Use at phrase ends or between sections.\",\n  andalusian:\n    \"Descending minor flavor (e.g., i‚Äì‚ô≠VII‚Äì‚ô≠VI‚ÄìV). Adds drama; land clearly on the target chord.\",\n  authentic:\n    \"Strong homecoming: dominant pulls into tonic. Extend V with 7/9/13; keep the landing clean on I.\",\n  plagal:\n    \"Gentler IV ‚Üí I resolution. Use to soften endings or after a bright Lydian moment.\",\n  deceptive:\n    \"Twist the expectation: V ‚Üí vi instead of I. Keeps energy moving; return to I later for closure.\",\n};\n\nexport function patternInfoEN(id: RomanPatternId) {\n  return { label: PATTERN_LABEL_EN[id], summary: PATTERN_SUMMARY_EN[id] };\n}\n\n"],"names":[],"mappings":"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"}
module.exports=[78908,a=>{"use strict";a.s(["default",()=>D],78908);var b=a.i(87924),c=a.i(72131),d=a.i(34747),e=a.i(10516),f=a.i(50944),g=a.i(14511),h=a.i(58037);let i=(0,c.createContext)(null),j=({children:a})=>{let[b,d]=(0,c.useState)("Degrees"),[e,f]=(0,c.useState)(null),[g,j]=(0,c.useState)(null),k=(0,c.useRef)(!1),l=(0,c.useCallback)(a=>{j(b=>(k.current||b||!a||(h.track("overlay_shown",{page:"chord_progression",control:"chord"}),k.current=!0),a))},[]),m=(0,c.useCallback)(()=>{j(null),h.track("overlay_reset",{page:"chord_progression"})},[]);return c.default.createElement(i.Provider,{value:{viewMode:b,scale:e,chord:g,setViewMode:a=>{a!==b&&(d(a),h.track("fb_toggle",{page:"chord_progression",value:a}))},setScale:f,setChordFromUser:l,resetChord:m,setScaleLayer:a=>f(a),resetChordLayer:()=>m()}},a)};var k=a.i(79735),l=a.i(21482),m=a.i(55147),n=a.i(6164),o=a.i(58078),p=a.i(46617),q=a.i(1731),r=a.i(47473);async function s(a,b){try{let c=window.__SCALES_API__;if(!c?.getScalePitchesById)return;let d=c.getScalePitchesById(a,b),e=d.slice(0,Math.min(5,d.length)),f=e.slice(),g=e.slice().reverse().slice(1),i=[...f,...g];for(let a of(await r.player.resume(),i))r.player.playNote(60+a,100),await new Promise(a=>setTimeout(a,100));(0,h.track)("scale_arpeggio_play",{page:"find-chords",scaleId:b,rootPc:a})}catch{}}let t=function({chordQuality:a,rootPc:d,onPreviewScale:e,onResetPreview:f,openGlossary:g,activeScaleId:i}){let{scales:j}=function(a){switch(a){case"maj":case"maj7":return{scales:["Ionian","Lydian"],why:["maj_ionian","maj_lydian"]};case"min":case"m7":return{scales:["Aeolian","Dorian","Phrygian"],why:["min_aeolian","min_dorian","min_phrygian"]};case"dom7":case"7":return{scales:["Mixolydian","Altered"],why:["dom_mixolydian","dom_altered"]};case"m7b5":return{scales:["Locrian","DiminishedWholeHalf"],why:["m7b5_locrian","dim_wh"]};case"dim":return{scales:["DiminishedWholeHalf","Locrian"],why:["dim_wh","m7b5_locrian"]}}}(a),k=(0,c.useRef)(null);return(0,l.useRovingTabs)(k,{orientation:"horizontal"}),(0,b.jsx)("div",{className:"ot-scale-table","data-testid":"scale-chips","aria-label":"Suggested scales",children:(0,b.jsxs)("details",{className:"rounded border p-2 bg-background/40",children:[(0,b.jsx)("summary",{className:"text-sm cursor-pointer select-none",children:"Suggested scales for this chord"}),(0,b.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-2",children:[(0,b.jsx)("div",{role:"tablist","aria-label":"Preview scale",className:"flex flex-wrap gap-2",ref:k,children:j.map((c,f)=>(0,b.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)("button",{role:"tab",className:["chip",i===c?"chip--active":""].join(" "),onClick:()=>{e(c),(0,h.track)("overlay_shown",{control:"scale",scaleId:c}),s(d,c)},"aria-describedby":`why-${c}`,"data-roving":"item",children:function(a,b,c){if("maj"===b||"maj7"===b){if(0===c)return"Ionian (Major Scale)";if(1===c)return"Lydian (#4 Color)"}if("min"===b||"m7"===b){if(0===c)return"Aeolian (Natural Minor)";if(1===c)return"Dorian (Bright Minor)";if(2===c)return"Phrygian (Dark Minor)"}if("dom7"===b||"7"===b){if(0===c)return"Mixolydian (Dominant)";if(1===c)return"Altered (Tension)"}if("m7b5"===b){if(0===c)return"Locrian (Half-Dim)";if(1===c)return"Whole–Half Dim"}if("dim"===b){if(0===c)return"Whole–Half Dim";if(1===c)return"Locrian"}return a}(c,a,f)}),(0,b.jsx)("button",{type:"button",className:"inline-flex items-center justify-center w-5 h-5 rounded-full text-xs opacity-60 hover:opacity-100 hover:bg-black/5 dark:hover:bg-white/10 transition-opacity",onClick:()=>g(c),"aria-label":`Learn more about ${c}`,title:"Learn more in Glossary",children:"ⓘ"})]},c))}),(0,b.jsx)("button",{className:"btn-ghost text-xs ml-auto",onClick:f,children:"Reset"})]}),(0,b.jsx)("div",{className:"mt-2 flex flex-wrap gap-x-4 gap-y-1 items-center text-xs opacity-80",children:j.map(a=>(0,b.jsx)("span",{id:`why-${a}`,children:{maj_ionian:"Foundation for major chords – fits all diatonic tones",maj_lydian:"Bright color with raised 4th (#11) – jazz/modern sound",maj_mixolydian:"Dominant-like major – contains the b7 for blues flavor",min_aeolian:"Natural minor foundation – matches all minor scale tones",min_dorian:"Brighter minor with natural 6th – popular in jazz and funk",min_phrygian:"Dark minor with flat 2nd – Spanish/flamenco character",min_harmonic:"Dramatic minor with raised 7th – classical and exotic sound",min_melodic:"Jazz minor – ascending melodic scale with natural 6th and 7th",dom_mixolydian:"Perfect for dominant 7th – contains the b7 tension",dom_altered:"Maximum tension – all alterations (b9, #9, #11, b13)",dom_wholetone:"Symmetrical whole-tone pattern – dreamy, unresolved quality",m7b5_locrian:"Outlines half-diminished chord – starts on the 7th degree",dim_wh:"Symmetrical whole-half pattern – creates tension over diminished chords"}[({Ionian:"maj_ionian",Lydian:"maj_lydian",Aeolian:"min_aeolian",Dorian:"min_dorian",Phrygian:"min_phrygian",Mixolydian:"dom_mixolydian",Locrian:"m7b5_locrian",DiminishedWholeHalf:"dim_wh",Altered:"dom_altered",HarmonicMinor:"min_harmonic",MelodicMinor:"min_melodic",WholeTone:"dom_wholetone"})[a]]||""},`why-${a}`))})]})})};var u=a.i(35112);function v({at:a,quality:d,rootPc:e,onPick:f,onClose:g,page:i="analyze"}){let j=(0,c.useRef)(null),k=(0,c.useRef)(g);k.current=g;let m=(0,c.useRef)(!1),n=(0,c.useRef)(!1),o=(0,c.useRef)(null);(0,l.useRovingTabs)(o,{orientation:"horizontal"}),(0,c.useEffect)(()=>{m.current||(m.current=!0,(0,h.trackOverlayShown)({control:"forms",open:!0,page:i}));let a=j.current?.querySelector("button");function b(a){"Escape"===a.key&&k.current()}function c(a){j.current&&(j.current.contains(a.target)||k.current())}return a?.focus({preventScroll:!0}),document.addEventListener("keydown",b),document.addEventListener("mousedown",c),()=>{document.removeEventListener("keydown",b),document.removeEventListener("mousedown",c)}},[i]);let p={position:"fixed",left:a.x,top:a.y,zIndex:0x7fffffff,pointerEvents:"auto"},q=a=>{n.current||(n.current=!0,(0,h.trackOverlayShown)({control:"forms",value:a,page:i}),f(a),g())},s=async a=>{try{await r.player.resume();let b=("maj"===d?[0,4,7]:[0,3,7]).map(a=>60+e+a);r.player.playChord(b,"lightStrum",300),(0,h.track)("play_chord",{page:i,source:"form_preview",kind:a})}catch{}},t=(0,b.jsxs)("div",{role:"dialog","aria-modal":"true","aria-label":"Chord forms",ref:j,style:p,className:"ot-pop",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"ot-h3",style:{margin:0},children:"Chord Forms"}),(0,b.jsx)("button",{type:"button",onClick:g,className:"text-xs opacity-60 hover:opacity-100 px-2 py-1 rounded hover:bg-black/5 dark:hover:bg-white/10","aria-label":"Close",children:"✕"})]}),(0,b.jsxs)("p",{className:"text-xs opacity-70 mb-3",children:["Select a fingering pattern for ","maj"===d?"major":"minor"," chord"]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",ref:o,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>q("open"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,b.jsx)("div",{className:"font-medium",children:"Open Position"}),(0,b.jsx)("div",{className:"text-xs opacity-70",children:"Uses open strings"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>s("open"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview open position",title:"Preview sound",children:"▶"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>q("barreE"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,b.jsx)("div",{className:"font-medium",children:"Barre (E-shape)"}),(0,b.jsx)("div",{className:"text-xs opacity-70",children:"6th string root"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>s("barreE"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview E-shape barre",title:"Preview sound",children:"▶"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{type:"button","data-roving":"item",onClick:()=>q("barreA"),className:"flex-1 px-3 py-2 rounded border text-left hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,b.jsx)("div",{className:"font-medium",children:"Barre (A-shape)"}),(0,b.jsx)("div",{className:"text-xs opacity-70",children:"5th string root"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>s("barreA"),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"Preview A-shape barre",title:"Preview sound",children:"▶"})]})]}),(0,b.jsx)("p",{className:"ot-hint mt-3",children:"Right-click or long-press a chord to open."})]});return"undefined"!=typeof document?(0,u.createPortal)(t,document.body):t}function w(a){return(a%12+12)%12}function x(a,b){let c=w(b);for(let b=1;b<=12;b++)if(w(a+b)===c)return b;return 1}let y={1:({rootPc:a})=>[{chord:`${(0,q.pcToName)(a)}maj7`,reason:"Richer tonic sound with major 7th",examples:["The Girl from Ipanema","Fly Me to the Moon"]},{chord:`${(0,q.pcToName)(a)}6`,reason:"Jazz tonic with added 6th",examples:["All the Things You Are","Autumn Leaves"]},{chord:`${(0,q.pcToName)((0,q.mod12)(a+9))}m`,reason:"Relative minor shares the same notes",examples:["Let It Be","No Woman No Cry"]}],2:({rootPc:a,key:b})=>[{chord:`${(0,q.pcToName)(a)}m7`,reason:"Jazz ii with minor 7th",examples:["Autumn Leaves","Fly Me to the Moon"]},{chord:(0,q.pcToName)((0,q.mod12)(b.tonic+5)),reason:"IV chord shares subdominant function",examples:["Let It Be","Hey Jude"]}],4:({rootPc:a,key:b})=>[{chord:`${(0,q.pcToName)(a)}maj7`,reason:"Lydian color with major 7th",examples:["The Girl from Ipanema","Dreams (Fleetwood Mac)"]},{chord:`${(0,q.pcToName)((0,q.mod12)(b.tonic+2))}m`,reason:"ii chord shares subdominant function",examples:["Autumn Leaves","Fly Me to the Moon"]},{chord:`${(0,q.pcToName)(a)}m`,reason:"Borrowed minor IV for color",examples:["Yesterday","Creep"]}],5:({rootPc:a,key:b})=>[{chord:`${(0,q.pcToName)(a)}7`,reason:"Dominant 7th creates strong tension",examples:["Sweet Home Alabama","Twist and Shout"]},{chord:`${(0,q.pcToName)(a)}sus4`,reason:"Suspended 4th delays resolution",examples:["Pinball Wizard","The Edge of Glory"]},{chord:`${(0,q.pcToName)((0,q.mod12)(b.tonic+11))}dim`,reason:"vii° shares dominant function",examples:["Girl from Ipanema","Michelle"]}],6:({rootPc:a,key:b})=>[{chord:`${(0,q.pcToName)(a)}m7`,reason:"Jazz minor with added 7th",examples:["Stairway to Heaven","Hotel California"]},{chord:(0,q.pcToName)(b.tonic),reason:"Relative major shares the same notes",examples:["Let It Be","Hey Jude"]}]},z={1:({rootPc:a})=>[{chord:`${(0,q.pcToName)(a)}m7`,reason:"Natural minor 7th",examples:["Stairway to Heaven","Smooth"]},{chord:`${(0,q.pcToName)(a)}m6`,reason:"Minor 6th for Dorian color",examples:["Scarborough Fair","So What"]},{chord:(0,q.pcToName)((0,q.mod12)(a+3)),reason:"Relative major (bIII) shares notes",examples:["Stairway to Heaven","All Along the Watchtower"]}],4:({rootPc:a})=>[{chord:`${(0,q.pcToName)(a)}m7`,reason:"Minor 7th for subdominant color",examples:["Light My Fire","Losing My Religion"]}],5:({rootPc:a,quality:b})=>"min"===b?[{chord:`${(0,q.pcToName)(a)}7`,reason:"Raised 3rd (V7) for stronger resolution",examples:["Stairway to Heaven","House of the Rising Sun"]}]:[{chord:`${(0,q.pcToName)(a)}7`,reason:"Dominant 7th for tension",examples:["Smooth","Black Magic Woman"]}]};var A=a.i(61478);function B({substitute:a,onPlay:c,onAdd:d}){return(0,b.jsxs)("div",{className:"rounded border p-2 bg-white dark:bg-neutral-900/50 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-medium text-base",children:a.chord}),(0,b.jsx)("div",{className:"text-sm opacity-80 mt-0.5",children:a.reason})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>c(a),className:"w-8 h-8 flex items-center justify-center rounded border hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":`Preview ${a.chord}`,title:"Preview sound","data-roving":"item",children:"▶"}),d&&(0,b.jsx)("button",{type:"button",onClick:()=>d(a),className:"px-2 py-1 text-xs rounded border bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition-colors","aria-label":`Add ${a.chord} to progression`,title:"Add to progression",children:"+ Add"})]})]}),a.examples&&a.examples.length>0&&(0,b.jsxs)("div",{className:"text-xs opacity-60 mt-1 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"opacity-70",children:"Examples:"}),(0,b.jsx)("span",{children:a.examples.join(" · ")})]})]})}let C=function({rootPc:a,quality:d,degree:e,keyContext:f,onAdd:g,page:i="find-chords"}){let j=(0,c.useRef)(null);(0,l.useRovingTabs)(j,{orientation:"horizontal"});let k=(0,c.useMemo)(()=>({rootPc:a,quality:d,degree:e,key:f}),[a,d,e,f]),m=(0,c.useMemo)(()=>(function(a){let{degree:b,key:c}=a,d=("Major"===c.mode?y:z)[b];return(d?d(a):function(a){let{rootPc:b,quality:c}=a,d=[];return"maj"===c?d.push({chord:`${(0,q.pcToName)(b)}maj7`,reason:"Added major 7th for richer sound"}):"min"===c&&d.push({chord:`${(0,q.pcToName)(b)}m7`,reason:"Added minor 7th for jazz flavor"}),d}(a)).slice(0,3)})(k),[k]);(0,c.useEffect)(()=>{m.length>0&&(0,h.track)("substitute_shown",{page:i,rootPc:a,quality:d,degree:e,count:m.length})},[m,i,a,d,e]);let n=(0,c.useCallback)(async a=>{try{await r.player.resume();let b=(0,A.chordToMidi)(a.chord);if(!b||0===b.length)return void console.warn(`Failed to parse chord: ${a.chord}`);r.player.playChord(b,"lightStrum",300),(0,h.track)("play_chord",{page:i,source:"substitute_preview",chord:a.chord})}catch(a){console.error("Failed to play substitute chord:",a)}},[i]),o=(0,c.useCallback)(b=>{g&&(g(b.chord),(0,h.track)("substitute_add",{page:i,rootPc:a,originalQuality:d,substituteChord:b.chord}))},[g,i,a,d]);return 0===m.length?null:(0,b.jsxs)("details",{className:"rounded border p-2 bg-background/40 mt-2",children:[(0,b.jsxs)("summary",{className:"text-sm cursor-pointer select-none font-medium",children:["Substitute Chords (",m.length,")"]}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("p",{className:"text-xs opacity-70 mb-3 px-1",children:"Alternative chords with similar harmonic function"}),(0,b.jsx)("div",{className:"space-y-2",ref:j,children:m.map((a,c)=>(0,b.jsx)(B,{substitute:a,onPlay:n,onAdd:g?o:void 0},`${a.chord}-${c}`))})]})]})};function D(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"ot-page",children:"Loading..."}),children:(0,b.jsx)(E,{})})}function E(){let a=(0,f.useSearchParams)(),i=(0,c.useMemo)(()=>q.PC_NAMES,[]),r=p.SCALE_CATALOG,[s,u]=(0,c.useState)(a.get("key")||"C"),w="minor"===a.get("mode")?"Aeolian":"Ionian",[y,z]=(0,c.useState)(w),A=(0,c.useMemo)(()=>{let a=r.find(a=>a.id===y);return(a?.degrees.length??7)===7},[y]);(0,c.useMemo)(()=>{let a=r.find(a=>a.id===y);if(7!==a.degrees.length)return[];let b="Aeolian"===a.id?"minor":"major";return(0,e.getDiatonicChordsFor)({tonic:s,quality:b,scale:a.id}).chords},[s,y]),(0,c.useMemo)(()=>"Aeolian"===y?"minor":"major",[y]);let B=(0,c.useRef)(null);(0,l.useRovingTabs)(B,{orientation:"horizontal"});let D=(0,c.useRef)(null);(0,l.useRovingTabs)(D,{orientation:"horizontal"});let[E,G]=(0,c.useState)("degrees"),[H,I]=(0,c.useState)(0),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(null),V=(0,c.useCallback)(()=>{S(null),U(null)},[]);(0,c.useEffect)(()=>{},[E,J]);let{selectKey:W}=(0,n.useAnalysisStore)();async function X(){let a=i.indexOf(s);W({tonic:a,mode:"major"==("Aeolian"===y?"minor":"major")?"Major":"Minor"}),K(null)}(0,c.useEffect)(()=>{X()},[]);let Y=(0,c.useMemo)(()=>i.indexOf(s),[s]),Z=(0,c.useMemo)(()=>y,[y]),$=(0,c.useCallback)(()=>{G("degrees"),I(0),K(null),M(null),O(null),Q(null),V(),(0,h.track)("overlay_reset",{page:"find-chords",scale:y,key:s})},[Y,Z,V]);return(0,c.useEffect)(()=>{let a=a=>{"Escape"===a.key&&$()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[$]),q.PC_NAMES,(0,b.jsx)(j,{children:(0,b.jsxs)("main",{className:"ot-page ot-stack","data-page":"find-chords",children:[(0,b.jsx)("h1",{className:"sr-only",children:"Find Chords"}),(0,b.jsxs)("section",{className:"ot-card",children:[(0,b.jsx)("h2",{className:"ot-h2",children:"Select Key & Scale"}),(0,b.jsxs)("div",{className:"mt-3 grid sm:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm mb-1",children:"Key"}),(0,b.jsx)("div",{className:"flex flex-col gap-2",role:"tablist","aria-label":"Select key",ref:B,children:[["C","C#","D","Eb","E","F"],["F#","G","Ab","A","Bb","B"]].map((a,c)=>(0,b.jsx)("div",{ref:0===c?B:void 0,className:"flex flex-wrap gap-2",children:a.map(a=>(0,b.jsx)("button",{role:"tab","aria-selected":s===a,tabIndex:s===a?0:-1,className:["chip chip--key",s===a?"chip--active":""].join(" "),"data-roving":"item",onClick:()=>{u(a);let b="major"==("Aeolian"===y?"minor":"major")?"Major":"Minor";W({tonic:i.indexOf(a),mode:b}),(0,h.track)("key_pick",{page:"find-chords",key:a,mode:b}),X()},title:`Key ${a}`,children:a},a))},`krow-${c}`))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"scale",className:"block text-sm mb-1",children:[(0,b.jsx)("span",{children:"Scale"}),(()=>{let a=r.find(a=>a.id===y),c=(0,o.getScalePitchesById)(0,a.id).map(a=>q.PC_NAMES[a]).join(" "),d=`${a.group} scale — ${a.degrees.length}-note pattern.`;return(0,b.jsx)(m.default,{title:a.display.en,className:"ml-2",linkHref:"/resources/glossary",linkLabel:"Glossary",children:(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsxs)("div",{className:"mb-1",children:[(0,b.jsx)("b",{children:"Degrees:"})," ",a.degrees.join(" ")]}),(0,b.jsxs)("div",{className:"mb-1",children:[(0,b.jsx)("b",{children:"Notes in C:"})," ",c]}),(0,b.jsxs)("div",{className:"mb-1",children:[(0,b.jsx)("b",{children:"About:"})," ",a.info?.oneLiner??d]}),!!a.info?.examples?.length&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("b",{className:"text-xs",children:"Song examples"}),(0,b.jsx)("ul",{className:"text-xs mt-1 space-y-1",children:a.info.examples.map((a,c)=>(0,b.jsxs)("li",{children:[a.url?(0,b.jsx)("a",{href:a.url,target:"_blank",rel:"noreferrer",children:a.title}):a.title,a.artist?` — ${a.artist}`:"",a.cue?` (${a.cue})`:""]},c))})]})]})})})()]}),(0,b.jsx)("select",{id:"scale",name:"scale",className:"w-full rounded border px-3 py-2 text-sm bg-transparent",value:y,onChange:a=>{var b;z(b=a.target.value),i.indexOf(s),(0,h.track)("scale_pick",{page:"find-chords",scale:b,key:s}),X()},children:r.map(a=>(0,b.jsx)("option",{value:a.id,children:a.display.en},a.id))})]})]})]}),(0,b.jsxs)("section",{className:"ot-card",children:[(0,b.jsx)("h2",{className:"ot-h2",children:"Result"}),(0,b.jsxs)("div",{className:"ot-stack",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"ot-h3 flex items-center gap-2",children:[(0,b.jsx)("span",{children:"Diatonic"}),(0,b.jsxs)(m.default,{title:"Diatonic chords",linkHref:"/resources/glossary",linkLabel:"Glossary",children:[(0,b.jsx)("p",{className:"text-sm",children:"Chords built only from the key’s scale tones (I–ii–iii–IV–V–vi–vii°)."}),(0,b.jsx)("p",{className:"text-sm mt-2",children:"Capo rows show the shapes you fret. The sounding chord tones on the fretboard are the same as the Open row."}),(0,b.jsx)("p",{className:"text-xs mt-1",children:"See details in Reference → Capo & Shapes"})]})]}),!A&&(0,b.jsx)("p",{className:"text-xs text-foreground/70 mt-1",children:"This scale is not heptatonic; Roman numerals are hidden. Diatonic suggestions are limited to the Open row."}),(0,b.jsx)("div",{"data-testid":A?void 0:"diatonic-open-only",children:(0,b.jsx)(k.default,{selectedId:N,onSelectId:a=>{N!==a&&O(a)},onPick:({pcs:a})=>{K(a.map(a=>q.PC_NAMES[a])),Q(a),V(),(0,h.track)("diatonic_pick",{page:"find-chords",id:N,scale:y,key:s})}})})]}),N&&P&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(t,{chordQuality:F(P),rootPc:Y,onPreviewScale:a=>{M(a)},onResetPreview:()=>{M(null),$()},openGlossary:a=>{try{window.open("/resources/glossary","_blank")}catch{}},activeScaleId:L})}),N&&P&&(0,b.jsx)(C,{rootPc:Y,quality:F(P),degree:parseInt(N.split("-")[1]||"0",10)+1,keyContext:{tonic:i.indexOf(s),mode:"Aeolian"===y?"Minor":"Major"},page:"find-chords"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"ot-h3 flex items-center justify-between",children:[(0,b.jsx)("span",{children:"Fretboard"}),(0,b.jsxs)("span",{ref:D,className:"flex items-center gap-2",role:"tablist","aria-orientation":"horizontal","aria-label":"Fretboard notation",children:[(0,b.jsx)("button",{role:"tab","aria-selected":"degrees"===E,tabIndex:"degrees"===E?0:-1,className:["chip","degrees"===E?"chip--on":""].join(" "),"data-roving":"item",onClick:()=>{V(),G("degrees")},children:"Degrees"}),(0,b.jsx)("button",{role:"tab","aria-selected":"names"===E,tabIndex:"names"===E?0:-1,className:["chip","names"===E?"chip--on":""].join(" "),"data-roving":"item",onClick:()=>{V(),G("names")},children:"Names"}),N&&(0,b.jsx)("button",{role:"tab","aria-selected":!1,tabIndex:-1,className:"chip",onClick:$,"aria-label":"Reset",children:"Reset"})]})]}),(0,b.jsx)(g.default,{overlay:{viewMode:"sounding",capo:H,display:E,scaleRootPc:Y,scaleType:L??Z,showScaleGhost:!!N,chordNotes:J??void 0,context:{chordRootPc:P&&P.length?P[0]:void 0,quality:(()=>{let a=P??[];return"min"===F(a.length?a:[Y])?"min":"maj"})()}},onRequestForms:(a,b)=>{S({at:a,rootPc:b.rootPc,quality:b.quality})},formShape:T})]})]})]}),(0,b.jsx)("section",{className:"ot-card ad-placeholder","aria-label":"Ad",children:(0,b.jsx)(d.default,{page:"find_chords",format:"horizontal"})}),R&&(0,b.jsx)(v,{at:R.at,quality:R.quality,rootPc:R.rootPc,page:"find-chords",onPick:a=>{U(function(a,b,c){if("open"===a)return{kind:"open",quality:b,rootPc:c,rootString:6,dots:"maj"===b?[{string:6,fret:0,deg:"1"},{string:5,fret:2,deg:"5"},{string:4,fret:2,deg:"1"},{string:3,fret:1,deg:"3"},{string:2,fret:0,deg:"5"},{string:1,fret:0,deg:"1"}]:[{string:6,fret:0,deg:"1"},{string:5,fret:2,deg:"5"},{string:4,fret:2,deg:"1"},{string:3,fret:0,deg:"b3"},{string:2,fret:0,deg:"5"},{string:1,fret:0,deg:"1"}]};if("barreE"===a){let a=x(4,c);return{kind:"barreE",quality:b,rootPc:c,rootString:6,dots:[{string:6,fret:a,deg:"1"},{string:5,fret:a+2,deg:"5"},{string:4,fret:a+2,deg:"1"},{string:3,fret:"maj"===b?a+1:a,deg:"maj"===b?"3":"b3"},{string:2,fret:a,deg:"5"},{string:1,fret:a,deg:"1"}],barre:{stringFrom:6,fret:a}}}let d=x(9,c);return{kind:"barreA",quality:b,rootPc:c,rootString:5,dots:[{string:5,fret:d,deg:"1"},{string:4,fret:d+2,deg:"5"},{string:3,fret:"maj"===b?d+2:d,deg:"maj"===b?"3":"b3"},{string:2,fret:d+2,deg:"1"},{string:1,fret:d,deg:"5"}],barre:{stringFrom:5,fret:d}}}(a,R.quality,R.rootPc))},onClose:()=>S(null)})]})})}function F(a){let b=new Set(a.map(b=>(b-a[0]+12)%12));return b.has(0)&&b.has(4)&&b.has(7)?"maj":b.has(0)&&b.has(3)&&b.has(7)?"min":b.has(0)&&b.has(3)&&b.has(6)?"dim":b.has(0)&&b.has(4)&&b.has(7)&&b.has(10)?"dom7":b.has(0)&&b.has(3)&&b.has(6)&&b.has(10)?"m7b5":"maj"}}];

//# sourceMappingURL=src_app_find-chords_page_tsx_466bd14b._.js.map
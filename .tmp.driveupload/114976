module.exports=[10516,a=>{"use strict";function b(a){return null!==a&&"object"==typeof a&&"name"in a&&"string"==typeof a.name}a.s(["analyzeChordProgression",()=>function a(b,c={}){let d,e=b.map(a=>a.trim()).filter(Boolean).map(ed).filter(a=>!!a),f=function(a,b){let c=Array(a).fill(1),d=b.sections||[],e={...d9,...b.weights?.section??{}},f=b.weights?.songHead??ea.songHead,g=b.weights?.songTail??ea.songTail,h=b.weights?.sectionEdge??ea.sectionEdge;for(let b of d){let d=b.repeat??1,f=(b.weightMul??e[b.name]??1)*Math.sqrt(d);for(let d=b.start;d<=b.end&&d<a;d++)c[d]*=f;b.start<a&&(c[b.start]*=h),b.end<a&&(c[b.end]*=h)}a>0&&(c[0]*=f),a>1&&(c[a-1]*=g);let i=c.reduce((a,b)=>a+b,0)||1;return c.map(a=>a/i)}(e.length,c),g=[];for(let a of d8)for(let b of["major","minor"]){let{score:c,reasons:d}=function(a,b,c){let d=ee(b),e=[],f=c||a.map((b,c)=>0===c?1.2:c===a.length-1?1.3:1),g=f.reduce((a,b)=>a+b,0),h=0;a.forEach((a,c)=>{let g=f[c];!function(a,b){let c=a.root+("maj"===a.triad?"":"min"===a.triad?"m":"dim");return b.includes(c)}(a,d)?function(a,b){let c=ef(b.tonic),d=ef(c);return a.root===d&&("maj"===a.triad||a.isDominantLike)}(a,b)?(h+=.9*g,e.push(`Secondary dominant tolerated: ${a.raw}`)):function(a,b){if("major"!==b.quality)return!1;let c=d5.majorKey(b.tonic).scale||[],d=c[3],e=c[6],f=d?ec(d):"",g=e?ec(ec(d6.transpose(e,"-1m"))):"",h=a.root===f&&"min"===a.triad,i=a.root===g&&"maj"===a.triad;return!!(h||i)}(a,b)?(h+=.8*g,e.push(`Borrowed chord tolerated: ${a.raw}`)):h+=.5*g:h+=+g});let i=Math.round(h/g*100);return e.unshift(`${d.length} diatonic chords in ${b.tonic} ${b.quality}`),{score:i,reasons:e}}(e,{tonic:a,quality:b},f);g.push({key:{tonic:a,quality:b},confidence:c,reasons:d})}g.sort((a,b)=>b.confidence-a.confidence);let h=g.slice(0,5),i=function(a,b){let c=[eb.major,eb.naturalMinor,eb.majorPent,eb.minorPent,eb.blues,eb.dorian,eb.mixolydian,eb.lydian,eb.harmonicMinor,eb.melodicMinor],d=new Set(b.map(a=>a.root)),e=a.tonic,f=c.map(a=>{let b="major"===a.id?"Major":"naturalMinor"===a.id?"Natural Minor":"majorPent"===a.id?"Major Pentatonic":"minorPent"===a.id?"Minor Pentatonic":"blues"===a.id?"Blues":"dorian"===a.id?"Dorian":"mixolydian"===a.id?"Mixolydian":"lydian"===a.id?"Lydian":"harmonicMinor"===a.id?"Harmonic Minor":"Melodic Minor",c=new Set((d7.get(`${e} ${b}`).notes||[]).map(ec));return{scale:a,score:Array.from(d).filter(a=>c.has(a)).length/Math.max(1,d.size)}});return f.sort((a,b)=>b.score-a.score),f.slice(0,5)}(h[0].key,e);return c.sections&&c.sections.length>0&&(d=c.sections.map(c=>{let d=a(b.slice(c.start,Math.min(c.end+1,b.length)),{weights:{songHead:1,songTail:1}});return{section:c,best:d.keyCandidates[0],ranking:d.keyCandidates}})),{keyCandidates:h,recommendedScales:i,perSection:d}},"getDiatonicChordsFor",()=>eg],10516),a.s(["abcToScientificNotation",()=>M,"default",()=>Q,"distance",()=>P,"scientificToAbcNotation",()=>N,"tokenize",()=>L,"transpose",()=>O],82071),a.s(["distance",()=>I,"tonicIntervalsTransposer",()=>H,"transpose",()=>G],88681),a.s(["coordToInterval",()=>u,"interval",()=>r,"tokenizeInterval",()=>p],74002),a.s(["chroma",()=>d,"coordinates",()=>j,"height",()=>e,"isNamedPitch",()=>b,"isPitch",()=>g,"midi",()=>f,"pitch",()=>l],18362);var c=[0,2,4,5,7,9,11],d=({step:a,alt:b})=>(c[a]+b+120)%12,e=({step:a,alt:b,oct:d,dir:e=1})=>e*(c[a]+b+12*(void 0===d?-100:d)),f=a=>{let b=e(a);return void 0!==a.oct&&b>=-12&&b<=115?b+12:null};function g(a){return!(null===a||"object"!=typeof a||!("step"in a)||"number"!=typeof a.step||!("alt"in a)||"number"!=typeof a.alt||isNaN(a.step)||isNaN(a.alt))}var h=[0,2,4,-1,1,3,5],i=h.map(a=>Math.floor(7*a/12));function j(a){let{step:b,alt:c,oct:d,dir:e=1}=a,f=h[b]+7*c;return void 0===d?[e*f]:[e*f,e*(d-i[b]-4*c)]}var k=[3,0,4,1,5,2,6];function l(a){let[b,c,d]=a,e=k[function(a){let b=(a+1)%7;return b<0?7+b:b}(b)],f=Math.floor((b+1)/7);if(void 0===c)return{step:e,alt:f,dir:d};let g=c+4*f+i[e];return{step:e,alt:f,oct:g,dir:d}}var m=(a,b)=>Array(Math.abs(b)+1).join(a),n=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),o=RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$");function p(a){let b=o.exec(`${a}`);return null===b?["",""]:b[1]?[b[1],b[2]]:[b[4],b[3]]}var q={};function r(a){return"string"==typeof a?q[a]||(q[a]=function(a){var b,c;let d=p(a);if(""===d[0])return n;let e=+d[0],f=d[1],g=(Math.abs(e)-1)%7,h=t[g];if("M"===h&&"P"===f)return n;let i="M"===h?"majorable":"perfectable",k=""+e+f,l=e<0?-1:1,m=8===e||-8===e?e:l*(g+1),o=(b=i,"M"===(c=f)&&"majorable"===b||"P"===c&&"perfectable"===b?0:"m"===c&&"majorable"===b?-1:/^A+$/.test(c)?c.length:/^d+$/.test(c)?-1*("perfectable"===b?c.length:c.length+1):0),q=Math.floor((Math.abs(e)-1)/7),r=l*(s[g]+o+12*q),u=(l*(s[g]+o)%12+12)%12,v=j({step:g,alt:o,oct:q,dir:l});return{empty:!1,name:k,num:e,q:f,step:g,alt:o,dir:l,type:i,simple:m,semitones:r,chroma:u,coord:v,oct:q}}(a)):g(a)?r(function(a){var b,c;let{step:d,alt:e,oct:f=0,dir:g}=a;if(!g)return"";let h=d+1+7*f,i="M"===t[d]?"majorable":"perfectable";return(g<0?"-":"")+(0===h?d+1:h)+(b=i,0===(c=e)?"majorable"===b?"M":"P":-1===c&&"majorable"===b?"m":c>0?m("A",c):m("d","perfectable"===b?c:c+1))}(a)):b(a)?r(a.name):n}var s=[0,2,4,5,7,9,11],t="PMMPPMM";function u(a,b){let[c,d=0]=a;return r(l(b||7*c+12*d<0?[-c,-d,-1]:[c,d,1]))}a.s(["accToAlt",()=>A,"altToAcc",()=>z,"coordToNote",()=>E,"note",()=>B,"stepToLetter",()=>y,"tokenizeNote",()=>D],87495);var v=(a,b)=>Array(Math.abs(b)+1).join(a),w=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),x=new Map,y=a=>"CDEFGAB".charAt(a),z=a=>a<0?v("b",-a):v("#",a),A=a=>"b"===a[0]?-a.length:a.length;function B(a){let c=JSON.stringify(a),d=x.get(c);if(d)return d;let e="string"==typeof a?function(a){let b=D(a);if(""===b[0]||""!==b[3])return w;let c=b[0],d=b[1],e=b[2],f=(c.charCodeAt(0)+3)%7,g=A(d),h=e.length?+e:void 0,i=j({step:f,alt:g,oct:h}),k=c+d+e,l=c+d,m=(F[f]+g+120)%12,n=void 0===h?((F[f]+g)%12+12)%12-1188:F[f]+g+12*(h+1);return{empty:!1,acc:d,alt:g,chroma:m,coord:i,freq:void 0===h?null:440*Math.pow(2,(n-69)/12),height:n,letter:c,midi:n>=0&&n<=127?n:null,name:k,oct:h,pc:l,step:f}}(a):g(a)?B(function(a){let{step:b,alt:c,oct:d}=a,e=y(b);if(!e)return"";let f=e+z(c);return d||0===d?f+d:f}(a)):b(a)?B(a.name):w;return x.set(c,e),e}var C=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function D(a){let b=C.exec(a);return b?[b[1].toUpperCase(),b[2].replace(/x/g,"##"),b[3],b[4]]:["","","",""]}function E(a){return B(l(a))}var F=[0,2,4,5,7,9,11];function G(a,b){let c=B(a),d=Array.isArray(b)?b:r(b).coord;if(c.empty||!d||d.length<2)return"";let e=c.coord;return E(1===e.length?[e[0]+d[0]]:[e[0]+d[0],e[1]+d[1]]).name}function H(a,b){let c=a.length;return d=>{if(!b)return"";let e=G(b,[0,Math.floor(d/c)]);return G(e,a[d<0?(c- -d%c)%c:d%c])}}function I(a,b){let c=B(a),d=B(b);if(c.empty||d.empty)return"";let e=c.coord,f=d.coord,g=f[0]-e[0],h=2===e.length&&2===f.length?f[1]-e[1]:-Math.floor(7*g/12);return u([g,h],d.height===c.height&&null!==d.midi&&c.oct===d.oct&&c.step>d.step).name}var J=(a,b)=>Array(b+1).join(a),K=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function L(a){let b=K.exec(a);return b?[b[1],b[2],b[3]]:["","",""]}function M(a){let[b,c,d]=L(a);if(""===c)return"";let e=4;for(let a=0;a<d.length;a++)e+=","===d.charAt(a)?-1:1;let f="_"===b[0]?b.replace(/_/g,"b"):"^"===b[0]?b.replace(/\^/g,"#"):"";return c.charCodeAt(0)>96?c.toUpperCase()+f+(e+1):c+f+e}function N(a){let b=B(a);if(b.empty||!b.oct&&0!==b.oct)return"";let{letter:c,acc:d,oct:e}=b,f="b"===d[0]?d.replace(/b/g,"_"):d.replace(/#/g,"^");return f+(e>4?c.toLowerCase():c)+(5===e?"":e>4?J("'",e-5):J(",",4-e))}function O(a,b){return N(G(M(a),b))}function P(a,b){return I(M(a),M(b))}var Q={abcToScientificNotation:M,scientificToAbcNotation:N,tokenize:L,transpose:O,distance:P};function R(a,b){return a<b?function(a,b){let c=[];for(;b--;c[b]=b+a);return c}(a,b-a+1):function(a,b){let c=[];for(;b--;c[b]=a-b);return c}(a,a-b+1)}function S(a,b){let c=b.length,d=(a%c+c)%c;return b.slice(d,c).concat(b.slice(0,d))}function T(a){return a.filter(a=>0===a||a)}function U(a){return a.map(a=>B(a)).filter(a=>!a.empty).sort((a,b)=>a.height-b.height).map(a=>a.name)}function V(a){return U(a).filter((a,b,c)=>0===b||a!==c[b-1])}function W(a,b=Math.random){let c,d,e=a.length;for(;e;)c=Math.floor(b()*e--),d=a[e],a[e]=a[c],a[c]=d;return a}function X(a,b){return a<b?function(a,b){let c=[];for(;b--;c[b]=b+a);return c}(a,b-a+1):function(a,b){let c=[];for(;b--;c[b]=a-b);return c}(a,a-b+1)}function Y(a,b){let c=b.length,d=(a%c+c)%c;return b.slice(d,c).concat(b.slice(0,d))}function Z(a){return a.filter(a=>0===a||a)}function $(a,b=Math.random){let c,d,e=a.length;for(;e;)c=Math.floor(b()*e--),d=a[e],a[e]=a[c],a[c]=d;return a}function _(a){return 0===a.length?[[]]:_(a.slice(1)).reduce((b,c)=>b.concat(a.map((b,d)=>{let e=c.slice();return e.splice(d,0,a[0]),e})),[])}a.i(82071),a.s(["compact",()=>T,"permutations",()=>function a(b){return 0===b.length?[[]]:a(b.slice(1)).reduce((a,c)=>a.concat(b.map((a,d)=>{let e=c.slice();return e.splice(d,0,b[0]),e})),[])},"range",()=>R,"rotate",()=>S,"shuffle",()=>W,"sortedNoteNames",()=>U,"sortedUniqNoteNames",()=>V],88577),a.i(88577),a.s(["chord",()=>bq,"chordScales",()=>bs,"default",()=>by,"degrees",()=>bw,"extended",()=>bt,"get",()=>bo,"getChord",()=>bp,"notes",()=>bv,"reduced",()=>bu,"steps",()=>bx,"tokenize",()=>bm,"transpose",()=>br],30417),a.s(["add",()=>aI,"addAlias",()=>aJ,"all",()=>aF,"chordType",()=>aB,"default",()=>aK,"entries",()=>aG,"get",()=>aA,"keys",()=>aE,"names",()=>aC,"removeAll",()=>aH,"symbols",()=>aD],53887),a.s(["EmptyPcset",()=>ab,"chroma",()=>aj,"chromas",()=>ao,"default",()=>aw,"filter",()=>av,"get",()=>ah,"includes",()=>au,"intervals",()=>ak,"isChroma",()=>af,"isEqual",()=>aq,"isNoteIncludedIn",()=>at,"isSubsetOf",()=>ar,"isSupersetOf",()=>as,"modes",()=>ap,"notes",()=>an,"num",()=>al,"pcset",()=>ai],17802),a.s(["compact",()=>Z,"default",()=>aa,"permutations",()=>_,"range",()=>X,"rotate",()=>Y,"shuffle",()=>$],30416);var aa={compact:Z,permutations:_,range:X,rotate:Y,shuffle:$},ab={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},ac=a=>Number(a).toString(2).padStart(12,"0"),ad=a=>parseInt(a,2),ae=/^[01]{12}$/;function af(a){return ae.test(a)}var ag={[ab.chroma]:ab};function ah(a){let b=af(a)?a:"number"==typeof a&&a>=0&&a<=4095?ac(a):Array.isArray(a)?function(a){let b;if(0===a.length)return ab.chroma;let c=[0,0,0,0,0,0,0,0,0,0,0,0];for(let d=0;d<a.length;d++)(b=B(a[d])).empty&&(b=r(a[d])),b.empty||(c[b.chroma]=1);return c.join("")}(a):a&&af(a.chroma)?a.chroma:ab.chroma;return ag[b]=ag[b]||function(a){let b=ad(a),c=ac((function(a){let b=a.split("");return b.map((a,c)=>Y(c,b).join(""))})(a).map(ad).filter(a=>a>=2048).sort()[0]),d=function(a){let b=[];for(let c=0;c<12;c++)"1"===a.charAt(c)&&b.push(am[c]);return b}(a);return{empty:!1,name:"",setNum:b,chroma:a,normalized:c,intervals:d}}(b)}var ai=ah,aj=a=>ah(a).chroma,ak=a=>ah(a).intervals,al=a=>ah(a).setNum,am=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function an(a){return ah(a).intervals.map(a=>G("C",a))}function ao(){return X(2048,4095).map(ac)}function ap(a,b=!0){let c=ah(a).chroma.split("");return Z(c.map((a,d)=>{let e=Y(d,c);return b&&"0"===e[0]?null:e.join("")}))}function aq(a,b){return ah(a).setNum===ah(b).setNum}function ar(a){let b=ah(a).setNum;return a=>{let c=ah(a).setNum;return b&&b!==c&&(c&b)===c}}function as(a){let b=ah(a).setNum;return a=>{let c=ah(a).setNum;return b&&b!==c&&(c|b)===c}}function at(a){let b=ah(a);return a=>{let c=B(a);return b&&!c.empty&&"1"===b.chroma.charAt(c.chroma)}}var au=at;function av(a){let b=at(a);return a=>a.filter(b)}var aw={get:ah,chroma:aj,num:al,intervals:ak,chromas:ao,isSupersetOf:as,isSubsetOf:ar,isNoteIncludedIn:at,isEqual:aq,filter:av,modes:ap,notes:an,pcset:ai},ax={...ab,name:"",quality:"Unknown",intervals:[],aliases:[]},ay=[],az={};function aA(a){return az[a]||ax}var aB=aA;function aC(){return ay.map(a=>a.name).filter(a=>a)}function aD(){return ay.map(a=>a.aliases[0]).filter(a=>a)}function aE(){return Object.keys(az)}function aF(){return ay.slice()}var aG=aF;function aH(){ay=[],az={}}function aI(a,b,c){let d=function(a){let b=b=>-1!==a.indexOf(b);return b("5A")?"Augmented":b("3M")?"Major":b("5d")?"Diminished":b("3m")?"Minor":"Unknown"}(a),e={...ah(a),name:c||"",quality:d,intervals:a,aliases:b};ay.push(e),e.name&&(az[e.name]=e),az[e.setNum]=e,az[e.chroma]=e,e.aliases.forEach(a=>{var b;return b=e,void(az[a]=b)})}function aJ(a,b){az[b]=a}[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]].forEach(([a,b,c])=>aI(a.split(" "),c.split(" "),b)),ay.sort((a,b)=>a.setNum-b.setNum);var aK={names:aC,symbols:aD,get:aA,all:aF,add:aI,removeAll:aH,keys:aE,entries:aG,chordType:aB};function aL(a,b={}){let c=a.map(a=>B(a).pc).filter(a=>a);return 0===B.length?[]:(function(a,b,c){let d=a[0],e=B(d).chroma,f=(a=>{let b=a.reduce((a,b)=>{let c=B(b).chroma;return void 0!==c&&(a[c]=a[c]||B(b).name),a},{});return a=>b[a]})(a),g=ap(a,!1),h=[];return g.forEach((a,g)=>{let i=c.assumePerfectFifth&&function(a){let b=parseInt(a,2);return aR(b)?a:(16|b).toString(2)}(a);aF().filter(b=>c.assumePerfectFifth&&function(a){let b=parseInt(a.chroma,2);return aO(b)&&aP(b)&&aQ(b)}(b)?b.chroma===i:b.chroma===a).forEach(a=>{let c=a.aliases[0],i=f(g);g!==e?h.push({weight:.5,name:`${i}${c}/${d}`}):h.push({weight:+b,name:`${i}${c}`})})}),h})(c,1,b).filter(a=>a.weight).sort((a,b)=>b.weight-a.weight).map(a=>a.name)}var aM={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},aN=a=>b=>!!(b&a),aO=aN(aM.anyThirds),aP=aN(aM.perfectFifth),aQ=aN(aM.anySeventh),aR=aN(aM.nonPerfectFifths);function aS(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}a.s(["add",()=>a2,"addTo",()=>a3,"default",()=>a6,"distance",()=>a1,"fromSemitones",()=>a0,"get",()=>aT,"invert",()=>aZ,"name",()=>aU,"names",()=>aS,"num",()=>aX,"quality",()=>aW,"semitones",()=>aV,"simplify",()=>aY,"subtract",()=>a4,"transposeFifths",()=>a5],8385);var aT=r,aU=a=>r(a).name,aV=a=>r(a).semitones,aW=a=>r(a).q,aX=a=>r(a).num;function aY(a){let b=r(a);return b.empty?"":b.simple+b.q}function aZ(a){let b=r(a);return b.empty?"":r({step:(7-b.step)%7,alt:"perfectable"===b.type?-b.alt:-(b.alt+1),oct:b.oct,dir:b.dir}).name}var a$=[1,2,2,3,3,4,5,5,6,6,7,7],a_="P m M m M P d P m M m M".split(" ");function a0(a){let b=Math.abs(a),c=b%12,d=Math.floor(b/12);return(a<0?-1:1)*(a$[c]+7*d)+a_[c]}var a1=I,a2=a7((a,b)=>[a[0]+b[0],a[1]+b[1]]),a3=a=>b=>a2(a,b),a4=a7((a,b)=>[a[0]-b[0],a[1]-b[1]]);function a5(a,b){let c=aT(a);if(c.empty)return"";let[d,e,f]=c.coord;return u([d+b,e,f]).name}var a6={names:aS,get:aT,name:aU,num:aX,semitones:aV,quality:aW,fromSemitones:a0,distance:a1,invert:aZ,simplify:aY,add:a2,addTo:a3,subtract:a4,transposeFifths:a5};function a7(a){return(b,c)=>{let d=r(b).coord,e=r(c).coord;if(d&&e)return u(a(d,e)).name}}a.s(["NoScaleType",()=>a8,"add",()=>bi,"addAlias",()=>bj,"all",()=>be,"default",()=>bk,"entries",()=>bf,"get",()=>bc,"keys",()=>bg,"names",()=>bb,"removeAll",()=>bh,"scaleType",()=>bd],88142);var a8={...ab,intervals:[],aliases:[]},a9=[],ba={};function bb(){return a9.map(a=>a.name)}function bc(a){return ba[a]||a8}var bd=bc;function be(){return a9.slice()}var bf=be;function bg(){return Object.keys(ba)}function bh(){a9=[],ba={}}function bi(a,b,c=[]){let d={...ah(a),name:b,intervals:a,aliases:c};return a9.push(d),ba[d.name]=d,ba[d.setNum]=d,ba[d.chroma]=d,d.aliases.forEach(a=>{var b;return b=d,void(ba[a]=b)}),d}function bj(a,b){ba[b]=a}[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]].forEach(([a,b,...c])=>bi(a.split(" "),b,c));var bk={names:bb,get:bc,all:be,add:bi,removeAll:bh,keys:bg,entries:bf,scaleType:bd},bl={empty:!0,name:"",symbol:"",root:"",bass:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function bm(a){let[b,c,d,e]=D(a);return""===b?bn("",a):"A"===b&&"ug"===e?bn("","aug"):bn(b+c,d+e)}function bn(a,b){let c=b.split("/");if(1===c.length)return[a,c[0],""];let[d,e,f,g]=D(c[1]);return""!==d&&""===f&&""===g?[a,c[0],d+e]:[a,b,""]}function bo(a){if(Array.isArray(a))return bp(a[1]||"",a[0],a[2]);{if(""===a)return bl;let[b,c,d]=bm(a),e=bp(c,b,d);return e.empty?bp(a):e}}function bp(a,b,c){let d=aA(a),e=B(b||""),f=B(c||"");if(d.empty||b&&e.empty||c&&f.empty)return bl;let g=I(e.pc,f.pc),h=d.intervals.indexOf(g),i=h>=0,j=i?f:B(""),k=-1===h?NaN:h+1,l=f.pc&&f.pc!==e.pc,m=Array.from(d.intervals);if(i)for(let a=1;a<k;a++){let a=m[0][0],b=m[0][1],c=parseInt(a,10)+7;m.push(`${c}${b}`),m.shift()}else if(l){let a=a4(I(e.pc,f.pc),"8P");a&&m.unshift(a)}let n=e.empty?[]:m.map(a=>G(e.pc,a));a=-1!==d.aliases.indexOf(a)?a:d.aliases[0];let o=`${e.empty?"":e.pc}${a}${i&&k>1?"/"+j.pc:l?"/"+f.pc:""}`,p=`${b?e.pc+" ":""}${d.name}${i&&k>1?" over "+j.pc:l?" over "+f.pc:""}`;return{...d,name:p,symbol:o,tonic:e.pc,type:d.name,root:j.pc,bass:l?f.pc:"",intervals:m,rootDegree:k,notes:n}}var bq=bo;function br(a,b){let[c,d,e]=bm(a);if(!c)return a;let f=G(e,b);return G(c,b)+d+(f?"/"+f:"")}function bs(a){let b=as(bo(a).chroma);return be().filter(a=>b(a.chroma)).map(a=>a.name)}function bt(a){let b=bo(a),c=as(b.chroma);return aF().filter(a=>c(a.chroma)).map(a=>b.tonic+a.aliases[0])}function bu(a){let b=bo(a),c=ar(b.chroma);return aF().filter(a=>c(a.chroma)).map(a=>b.tonic+a.aliases[0])}function bv(a,b){let c=bo(a),d=b||c.tonic;return!d||c.empty?[]:c.intervals.map(a=>G(d,a))}function bw(a,b){let c=bo(a),d=b||c.tonic,e=H(c.intervals,d);return a=>a?e(a>0?a-1:a):""}function bx(a,b){let c=bo(a),d=b||c.tonic;return H(c.intervals,d)}var by={getChord:bp,get:bo,detect:aL,chordScales:bs,extended:bt,reduced:bu,tokenize:bm,transpose:br,degrees:bw,steps:bx,notes:bv,chord:bq};a.s(["chord",()=>bq,"chordScales",()=>bs,"default",()=>by,"degrees",()=>bw,"detect",()=>aL,"extended",()=>bt,"get",()=>bo,"getChord",()=>bp,"notes",()=>bv,"reduced",()=>bu,"steps",()=>bx,"tokenize",()=>bm,"transpose",()=>br],29705),a.i(30417),a.i(29705),a.i(53887),a.i(30416),a.s(["default",()=>bH,"fraction",()=>bG,"get",()=>bE,"names",()=>bB,"shorthands",()=>bC,"value",()=>bF],6651);var bz=[];[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]].forEach(([a,b,c])=>(function(a,b,c){bz.push({empty:!1,dots:"",name:"",value:1/a,fraction:a<1?[1/a,1]:[1,a],shorthand:b,names:c})})(a,b,c));var bA={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function bB(){return bz.reduce((a,b)=>(b.names.forEach(b=>a.push(b)),a),[])}function bC(){return bz.map(a=>a.shorthand)}var bD=/^([^.]+)(\.*)$/;function bE(a){let[b,c,d]=bD.exec(a)||[],e=bz.find(a=>a.shorthand===c||a.names.includes(c));if(!e)return bA;let f=function(a,b){let c=Math.pow(2,b),d=a[0]*c,e=a[1]*c,f=d;for(let a=0;a<b;a++)d+=f/Math.pow(2,a+1);for(;d%2==0&&e%2==0;)d/=2,e/=2;return[d,e]}(e.fraction,d.length),g=f[0]/f[1];return{...e,name:a,dots:d,value:g,fraction:f}}var bF=a=>bE(a).value,bG=a=>bE(a).fraction,bH={names:bB,shorthands:bC,get:bE,value:bF,fraction:bG};function bI(a){return+a>=0&&127>=+a}function bJ(a){if(bI(a))return+a;let b=B(a);return b.empty?null:b.midi}function bK(a,b=440){return Math.pow(2,(a-69)/12)*b}a.i(6651),a.i(8385),a.s(["default",()=>cW,"majorKey",()=>cQ,"majorKeyChords",()=>cR,"majorTonicFromKeySignature",()=>cV,"minorKey",()=>cU,"minorKeyChords",()=>cS],75215),a.s(["accidentals",()=>b2,"ascending",()=>cl,"chroma",()=>b6,"default",()=>cr,"descending",()=>cm,"distance",()=>cb,"enharmonic",()=>cq,"freq",()=>b5,"fromFreq",()=>b8,"fromFreqSharps",()=>b9,"fromMidi",()=>b7,"fromMidiSharps",()=>ca,"get",()=>b_,"midi",()=>b4,"name",()=>b0,"names",()=>b$,"octave",()=>b3,"pitchClass",()=>b1,"simplify",()=>cp,"sortedNames",()=>cn,"sortedUniqNames",()=>co,"tr",()=>cd,"trBy",()=>cf,"trFifths",()=>cj,"trFrom",()=>ch,"transpose",()=>cc,"transposeBy",()=>ce,"transposeFifths",()=>ci,"transposeFrom",()=>cg,"transposeOctaves",()=>ck],51739),a.s(["chroma",()=>bR,"default",()=>bW,"freqToMidi",()=>bN,"isMidi",()=>bI,"midiToFreq",()=>bK,"midiToNoteName",()=>bQ,"pcset",()=>bS,"pcsetDegrees",()=>bV,"pcsetNearest",()=>bT,"pcsetSteps",()=>bU,"toMidi",()=>bJ],3946);var bL=Math.log(2),bM=Math.log(440);function bN(a){return Math.round(100*(12*(Math.log(a)-bM)/bL+69))/100}var bO="C C# D D# E F F# G G# A A# B".split(" "),bP="C Db D Eb E F Gb G Ab A Bb B".split(" ");function bQ(a,b={}){if(isNaN(a)||a===-1/0||a===1/0)return"";a=Math.round(a);let c=(!0===b.sharps?bO:bP)[a%12];return b.pitchClass?c:c+(Math.floor(a/12)-1)}function bR(a){return a%12}function bS(a){return Array.isArray(a)?a.map(bR).sort((a,b)=>a-b).filter((a,b,c)=>0===b||a!==c[b-1]):a.split("").reduce((a,b,c)=>(c<12&&"1"===b&&a.push(c),a),[])}function bT(a){let b=bS(a);return a=>{let c=bR(a);for(let d=0;d<12;d++){if(b.includes(c+d))return a+d;if(b.includes(c-d))return a-d}}}function bU(a,b){let c=bS(a),d=c.length;return a=>{let e=Math.floor(a/d);return c[a<0?(d- -a%d)%d:a%d]+12*e+b}}function bV(a,b){let c=bU(a,b);return a=>{if(0!==a)return c(a>0?a-1:a)}}var bW={chroma:bR,freqToMidi:bN,isMidi:bI,midiToFreq:bK,midiToNoteName:bQ,pcsetNearest:bT,pcset:bS,pcsetDegrees:bV,pcsetSteps:bU,toMidi:bJ},bX=["C","D","E","F","G","A","B"],bY=a=>a.name,bZ=a=>a.map(B).filter(a=>!a.empty);function b$(a){return void 0===a?bX.slice():Array.isArray(a)?bZ(a).map(bY):[]}var b_=B,b0=a=>b_(a).name,b1=a=>b_(a).pc,b2=a=>b_(a).acc,b3=a=>b_(a).oct,b4=a=>b_(a).midi,b5=a=>b_(a).freq,b6=a=>b_(a).chroma;function b7(a){return bQ(a)}function b8(a){return bQ(bN(a))}function b9(a){return bQ(bN(a),{sharps:!0})}function ca(a){return bQ(a,{sharps:!0})}var cb=I,cc=G,cd=G,ce=a=>b=>cc(b,a),cf=ce,cg=a=>b=>cc(a,b),ch=cg;function ci(a,b){return cc(a,[b,0])}var cj=ci;function ck(a,b){return cc(a,[0,b])}var cl=(a,b)=>a.height-b.height,cm=(a,b)=>b.height-a.height;function cn(a,b){return b=b||cl,bZ(a).sort(b).map(bY)}function co(a){return cn(a,cl).filter((a,b,c)=>0===b||a!==c[b-1])}var cp=a=>{let b=b_(a);return b.empty?"":bQ(b.midi||b.chroma,{sharps:b.alt>0,pitchClass:null===b.midi})};function cq(a,b){let c=b_(a);if(c.empty)return"";let d=b_(b||bQ(c.midi||c.chroma,{sharps:c.alt<0,pitchClass:!0}));if(d.empty||d.chroma!==c.chroma)return"";if(void 0===c.oct)return d.pc;let e=c.chroma-c.alt,f=d.chroma-d.alt,g=c.oct+(e>11||f<0?-1:+(e<0||f>11));return d.pc+g}var cr={names:b$,get:b_,name:b0,pitchClass:b1,accidentals:b2,octave:b3,midi:b4,ascending:cl,descending:cm,distance:cb,sortedNames:cn,sortedUniqNames:co,fromMidi:b7,fromMidiSharps:ca,freq:b5,fromFreq:b8,fromFreqSharps:b9,chroma:b6,transpose:cc,tr:cd,transposeBy:ce,trBy:cf,transposeFrom:cg,trFrom:ch,transposeFifths:ci,transposeOctaves:ck,trFifths:cj,simplify:cp,enharmonic:cq};a.s(["default",()=>cC,"get",()=>cu,"names",()=>cw,"romanNumeral",()=>cv,"tokenize",()=>cy],38763);var cs={empty:!0,name:"",chordType:""},ct={};function cu(a){var c;return"string"==typeof a?ct[a]||(ct[a]=function(a){let[b,c,d,e]=cy(a);if(!d)return cs;let f=d.toUpperCase(),g=cA.indexOf(f),h=A(c);return{empty:!1,name:b,roman:d,interval:r({step:g,alt:h,dir:1}).name,acc:c,chordType:e,alt:h,step:g,major:d===f,oct:0,dir:1}}(a)):"number"==typeof a?cu(cA[a]||""):g(a)?cu(z((c=a).alt)+cA[c.step]):b(a)?cu(a.name):cs}var cv=cu;function cw(a=!0){return(a?cA:cB).slice()}var cx=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function cy(a){return cx.exec(a)||["","","",""]}var cz="I II III IV V VI VII",cA=cz.split(" "),cB=cz.toLowerCase().split(" "),cC={names:cw,get:cu,romanNumeral:cv},cD=Object.freeze([]),cE={type:"major",tonic:"",alteration:0,keySignature:""},cF={tonic:"",grades:cD,intervals:cD,scale:cD,triads:cD,chords:cD,chordsHarmonicFunction:cD,chordScales:cD,secondaryDominants:cD,secondaryDominantSupertonics:cD,substituteDominantsMinorRelative:cD,substituteDominants:cD,substituteDominantSupertonics:cD,secondaryDominantsMinorRelative:cD},cG={...cE,...cF,type:"major",minorRelative:"",scale:cD,substituteDominants:cD,secondaryDominantSupertonics:cD,substituteDominantsMinorRelative:cD},cH={...cE,type:"minor",relativeMajor:"",natural:cF,harmonic:cF,melodic:cF},cI=(a,b,c="")=>b.map((b,d)=>`${a[d]}${c}${b}`);function cJ(a,b,c,d,e){return f=>{let g=a.map(a=>cu(a).interval||""),h=g.map(a=>cc(f,a)),i=cI(h,c),j=h.map(a=>cc(a,"5P")).map(a=>h.includes(a)&&!i.includes(a+"7")?a+"7":""),k=cK(j,b),l=j.map(a=>a?cc(a.slice(0,-1),"5d")+"7":""),m=cK(l,b);return{tonic:f,grades:a,intervals:g,scale:h,triads:cI(h,b),chords:i,chordsHarmonicFunction:d.slice(),chordScales:cI(h,e," "),secondaryDominants:j,secondaryDominantSupertonics:k,substituteDominants:l,substituteDominantSupertonics:m,secondaryDominantsMinorRelative:k,substituteDominantsMinorRelative:m}}}var cK=(a,b)=>a.map((a,c)=>{if(!a)return"";let d=cc(a.slice(0,-1),"5P");return b[c].endsWith("m")?d+"m7":d+"m7b5"}),cL=(a,b)=>{let c=B(a),d=B(b);return c.empty||d.empty?0:d.coord[0]-c.coord[0]},cM=cJ("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),cN=cJ("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),cO=cJ("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),cP=cJ("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function cQ(a){let b=B(a).pc;if(!b)return cG;let c=cM(b),d=cL("C",b);return{...c,type:"major",minorRelative:cc(b,"-3m"),alteration:d,keySignature:z(d)}}function cR(a){let b=cQ(a),c=[];return cT(b,c),c}function cS(a){let b=cU(a),c=[];return cT(b.natural,c),cT(b.harmonic,c),cT(b.melodic,c),c}function cT(a,b){let c=(a,c)=>{if(!a)return;let d=b.find(b=>b.name===a);d||(d={name:a,roles:[]},b.push(d)),c&&!d.roles.includes(c)&&d.roles.push(c)};a.chords.forEach((b,d)=>c(b,a.chordsHarmonicFunction[d])),a.secondaryDominants.forEach((b,d)=>c(b,`V/${a.grades[d]}`)),a.secondaryDominantSupertonics.forEach((b,d)=>c(b,`ii/${a.grades[d]}`)),a.substituteDominants.forEach((b,d)=>c(b,`subV/${a.grades[d]}`)),a.substituteDominantSupertonics.forEach((b,d)=>c(b,`subii/${a.grades[d]}`))}function cU(a){let b=B(a).pc;if(!b)return cH;let c=cL("C",b)-3;return{type:"minor",tonic:b,relativeMajor:cc(b,"3m"),alteration:c,keySignature:z(c),natural:cN(b),harmonic:cO(b),melodic:cP(b)}}function cV(a){return"number"==typeof a?ci("C",a):"string"==typeof a&&/^b+|#+$/.test(a)?ci("C",A(a)):null}var cW={majorKey:cQ,majorTonicFromKeySignature:cV,minorKey:cU},cX=a.i(75215);a.i(3946),a.s(["all",()=>c2,"default",()=>db,"distance",()=>c9,"entries",()=>c3,"get",()=>c0,"mode",()=>c1,"names",()=>c4,"notes",()=>c5,"relativeTonic",()=>da,"seventhChords",()=>c8,"triads",()=>c7],31706);var cY=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],cZ={...ab,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},c$=cY.map(function(a){let[b,c,d,e,f,g,h]=a,i=Number(c).toString(2);return{empty:!1,intervals:bc(e).intervals,modeNum:b,chroma:i,normalized:i,name:e,setNum:c,alt:d,triad:f,seventh:g,aliases:h?[h]:[]}}),c_={};function c0(a){return"string"==typeof a?c_[a.toLowerCase()]||cZ:a&&a.name?c0(a.name):cZ}c$.forEach(a=>{c_[a.name]=a,a.aliases.forEach(b=>{c_[b]=a})});var c1=c0;function c2(){return c$.slice()}var c3=c2;function c4(){return c$.map(a=>a.name)}function c5(a,b){return c0(a).intervals.map(a=>G(b,a))}function c6(a){return(b,c)=>{let d=c0(b);if(d.empty)return[];let e=Y(d.modeNum,a),f=d.intervals.map(a=>G(c,a));return e.map((a,b)=>f[b]+a)}}var c7=c6(cY.map(a=>a[4])),c8=c6(cY.map(a=>a[5]));function c9(a,b){let c=c0(b),d=c0(a);return c.empty||d.empty?"":aY(a5("1P",d.alt-c.alt))}function da(a,b,c){return G(c,c9(a,b))}var db={get:c0,names:c4,all:c2,distance:c9,relativeTonic:da,notes:c5,triads:c7,seventhChords:c8,entries:c3,mode:c1};a.i(31706);var dc=a.i(51739);function dd(a,b){return b.map(cu).map(b=>G(a,r(b))+b.chordType)}function de(a,b){return b.map(b=>{let[c,d]=bm(b);return cu(r(I(a,c))).name+d})}a.i(17802),a.s(["default",()=>df,"fromRomanNumerals",()=>dd,"toRomanNumerals",()=>de],34125);var df={fromRomanNumerals:dd,toRomanNumerals:de};function dg(a){let b=Z(a.map(a=>"number"==typeof a?a:bJ(a)));return a.length&&b.length===a.length?b.reduce((a,b)=>{let c=a[a.length-1];return a.concat(X(c,b).slice(1))},[b[0]]):[]}function dh(a,b){return dg(a).map(a=>bQ(a,b))}a.i(34125),a.s(["chromatic",()=>dh,"default",()=>di,"numeric",()=>dg],76124);var di={numeric:dg,chromatic:dh};function dj(...a){return a.reduce((a,b)=>(b.toString(2).split("").forEach(b=>{a.push(parseInt(b))}),a),[])}function dk(a){let b=[];for(let c=0;c<a.length;c++){let d=parseInt("0x"+a[c]);(isNaN(d)?"0000":d.toString(2).padStart(4,"0")).split("").forEach(a=>{b.push(+("1"===a))})}return b}function dl(...a){return a.reduce((a,b)=>{a.push(1);for(let c=0;c<b;c++)a.push(0);return a},[])}function dm(a,b=.5,c=Math.random){let d=[];for(let e=0;e<a;e++)d.push(+(c()>=b));return d}function dn(a,b=Math.random){return a.map(a=>+(b()<=a))}function dp(a,b){let c=a.length,d=[];for(let e=0;e<c;e++){let f=((e-b)%c+c)%c;d[e]=a[f]}return d}function dq(a,b){let c=[],d=-1;for(let e=0;e<a;e++){let f=Math.floor(b/a*e);c[e]=+(f!==d),d=f}return c}a.i(76124),a.s(["binary",()=>dj,"euclid",()=>dq,"hex",()=>dk,"onsets",()=>dl,"probability",()=>dn,"random",()=>dm,"rotate",()=>dp],94576),a.i(94576),a.i(38763),a.s(["default",()=>dF,"degrees",()=>dD,"detect",()=>dw,"extended",()=>dy,"get",()=>du,"modeNames",()=>dB,"names",()=>dt,"rangeOf",()=>dC,"reduced",()=>dz,"scale",()=>dv,"scaleChords",()=>dx,"scaleNotes",()=>dA,"steps",()=>dE,"tokenize",()=>ds],18234);var dr={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function ds(a){if("string"!=typeof a)return["",""];let b=a.indexOf(" "),c=B(a.substring(0,b));if(c.empty){let b=B(a);return b.empty?["",a.toLowerCase()]:[b.name,""]}let d=a.substring(c.name.length+1).toLowerCase();return[c.name,d.length?d:""]}var dt=bb;function du(a){let b=Array.isArray(a)?a:ds(a),c=B(b[0]).name,d=bc(b[1]);if(d.empty)return dr;let e=d.name,f=c?d.intervals.map(a=>G(c,a)):[],g=c?c+" "+e:e;return{...d,name:g,type:e,tonic:c,notes:f}}var dv=du;function dw(a,b={}){let c=aj(a),d=B(b.tonic??a[0]??""),e=d.chroma;if(void 0===e)return[];let f=c.split("");f[e]="1";let g=Y(e,f).join(""),h=be().find(a=>a.chroma===g),i=[];return h&&i.push(d.name+" "+h.name),"exact"===b.match||dy(g).forEach(a=>{i.push(d.name+" "+a)}),i}function dx(a){let b=ar(du(a).chroma);return aF().filter(a=>b(a.chroma)).map(a=>a.aliases[0])}function dy(a){let b=as(af(a)?a:du(a).chroma);return be().filter(a=>b(a.chroma)).map(a=>a.name)}function dz(a){let b=ar(du(a).chroma);return be().filter(a=>b(a.chroma)).map(a=>a.name)}function dA(a){let b=a.map(a=>B(a).pc).filter(a=>a),c=b[0],d=co(b);return Y(d.indexOf(c),d)}function dB(a){let b=du(a);if(b.empty)return[];let c=b.tonic?b.notes:b.intervals;return ap(b.chroma).map((a,b)=>{let d=du(a).name;return d?[c[b],d]:["",""]}).filter(a=>a[0])}function dC(a){let b=function(a){let b=Array.isArray(a)?dA(a):du(a).notes,c=b.map(a=>B(a).chroma);return a=>{let d="number"==typeof a?B(bQ(a)):B(a),e=d.height;if(void 0===e)return;let f=c.indexOf(e%12);if(-1!==f)return cq(d.name,b[f])}}(a);return(a,c)=>{let d=B(a).height,e=B(c).height;return void 0===d||void 0===e?[]:X(d,e).map(b).filter(a=>a)}}function dD(a){let{intervals:b,tonic:c}=du(a),d=H(b,c);return a=>a?d(a>0?a-1:a):""}function dE(a){let{intervals:b,tonic:c}=du(a);return H(b,c)}var dF={degrees:dD,detect:dw,extended:dy,get:du,modeNames:dB,names:dt,rangeOf:dC,reduced:dz,scaleChords:dx,scaleNotes:dA,steps:dE,tokenize:ds,scale:dv},dG=a.i(18234);a.i(88142),a.s(["default",()=>dO,"get",()=>dM,"names",()=>dJ,"parse",()=>dN],93633);var dH={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},dI=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function dJ(){return dI.slice()}var dK=/^(\d*\d(?:\+\d)*)\/(\d+)$/,dL=new Map;function dM(a){let b=JSON.stringify(a),c=dL.get(b);if(c)return c;let d=function([a,b]){let c=Array.isArray(a)?a.reduce((a,b)=>a+b,0):a;if(0===c||0===b)return dH;let d=Array.isArray(a)?`${a.join("+")}/${b}`:`${a}/${b}`;return{empty:!1,name:d,type:4===b||2===b?"simple":8===b&&c%3==0?"compound":Math.log(b)/Math.log(2)%1==0?"irregular":"irrational",upper:c,lower:b,additive:Array.isArray(a)?a:[]}}(dN(a));return dL.set(b,d),d}function dN(a){if("string"==typeof a){let[b,c,d]=dK.exec(a)||[];return dN([c,d])}let[b,c]=a,d=+c;if("number"==typeof b)return[b,d];let e=b.split("+").map(a=>+a);return 1===e.length?[e[0],d]:[e,d]}var dO={names:dJ,parse:dN,get:dM};a.i(93633),a.s(["default",()=>dQ,"topNoteDiff",()=>dP],35041);var dP=(a,b)=>{if(!b||!b.length)return a[0];let c=a=>cr.midi(a[a.length-1])||0,d=a=>Math.abs(c(b)-c(a));return a.sort((a,b)=>d(a)-d(b))[0]},dQ={topNoteDiff:dP};a.i(35041),a.s(["default",()=>d1,"get",()=>d$,"search",()=>d_,"sequence",()=>d0],85001),a.s(["all",()=>dT,"default",()=>dW,"defaultDictionary",()=>dU,"lefthand",()=>dS,"lookup",()=>dV,"triads",()=>dR],9144);var dR={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},dS={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},dT={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},dU=dS;function dV(a,b=dU){if(b[a])return b[a];let{aliases:c}=by.get("C"+a),d=Object.keys(b).find(a=>c.includes(a))||"";if(void 0!==d)return b[d]}var dW={lookup:dV,lefthand:dS,triads:dR,all:dT,defaultDictionary:dU},dX=["C3","C5"],dY=dW.all,dZ=dQ.topNoteDiff;function d$(a,b=dX,c=dY,d=dZ,e){let f=d_(a,b,c);return e&&e.length?d(f,e):f[0]}function d_(a,b=dX,c=dW.triads){let[d,e]=by.tokenize(a),f=dW.lookup(e,c);if(!f)return[];let g=f.map(a=>a.split(" ")),h=di.chromatic(b);return g.reduce((a,c)=>{let e=c.map(a=>a6.subtract(a,c[0])||""),f=cr.transpose(d,c[0]),g=h.filter(a=>cr.chroma(a)===cr.chroma(f)).filter(a=>(cr.midi(cr.transpose(a,e[e.length-1]))||0)<=(cr.midi(b[1])||0)).map(a=>cr.enharmonic(a,f)).map(a=>e.map(b=>cr.transpose(a,b)));return a.concat(g)},[])}function d0(a,b=dX,c=dY,d=dZ,e){let{voicings:f}=a.reduce(({voicings:a,lastVoicing:e},f)=>{let g=d$(f,b,c,d,e);return e=g,a.push(g),{voicings:a,lastVoicing:e}},{voicings:[],lastVoicing:e});return f}var d1={get:d$,search:d_,sequence:d0};a.i(85001),a.i(9144),a.s(["deprecate",()=>d3,"fillStr",()=>d2,"isNamed",()=>d4],49382);var d2=(a,b)=>Array(Math.abs(b)+1).join(a);function d3(a,b,c){return function(...d){return console.warn(`${a} is deprecated. Use ${b}.`),c.apply(this,d)}}var d4=d3("isNamed","isNamedPitch",b);a.s(["accToAlt",()=>A,"altToAcc",()=>z,"chroma",()=>d,"coordToInterval",()=>u,"coordToNote",()=>E,"coordinates",()=>j,"deprecate",()=>d3,"distance",()=>I,"fillStr",()=>d2,"height",()=>e,"interval",()=>r,"isNamed",()=>d4,"isNamedPitch",()=>b,"isPitch",()=>g,"midi",()=>f,"note",()=>B,"pitch",()=>l,"stepToLetter",()=>y,"tokenizeInterval",()=>p,"tokenizeNote",()=>D,"tonicIntervalsTransposer",()=>H,"transpose",()=>G],7285),a.i(49382),a.i(18362),a.i(88681),a.i(74002),a.i(87495),a.i(7285);var d5=cX,d6=dc,d7=dG;let d8=["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"],d9={Intro:.8,Verse:1,PreChorus:1.2,Chorus:1.6,PostChorus:1.3,Bridge:.9,Solo:1,Interlude:.8,Outro:.9,Breakdown:.9,Custom:1},ea={songHead:1.2,songTail:1.3,sectionEdge:1.1},eb={major:{id:"major",name:"Major Scale",tier:"free"},naturalMinor:{id:"naturalMinor",name:"Natural Minor Scale",tier:"free"},majorPent:{id:"majorPent",name:"Major Pentatonic",tier:"free"},minorPent:{id:"minorPent",name:"Minor Pentatonic",tier:"free"},blues:{id:"blues",name:"Blues Scale",tier:"free"},dorian:{id:"dorian",name:"Dorian Mode",tier:"pro"},mixolydian:{id:"mixolydian",name:"Mixolydian Mode",tier:"pro"},lydian:{id:"lydian",name:"Lydian Mode",tier:"pro"},harmonicMinor:{id:"harmonicMinor",name:"Harmonic Minor",tier:"pro"},melodicMinor:{id:"melodicMinor",name:"Melodic Minor",tier:"pro"}};function ec(a){return d6.pitchClass(a)||a}function ed(a){if(!a)return null;let[b]=a.split("/"),c=b.match(/^([A-Ga-g])([#b]?)(.*)$/);if(!c)return null;let d=ec((c[1]+c[2]).toUpperCase()),e=(c[3]||"").toLowerCase(),f="maj";return/(m7b5|ø|dim)/.test(e)?f="dim":/maj/.test(e)?f="maj":/(^|[^a-z])m(?!aj)/.test(e)?f="min":(/sus|aug/.test(e),f="maj"),{raw:a,root:d,triad:f,isDominantLike:/(^|[^a-z])7(?![a-z0-9])/.test(e)||/7/.test(e)}}function ee(a){if("major"===a.quality)return d5.majorKey(a.tonic).chords||[];let b=d5.minorKey(a.tonic);return b.natural?.chords||b.chords||[]}function ef(a){return ec(d6.transpose(a,"5P"))}function eg(a){return{chords:ee({tonic:a.tonic,quality:a.quality})}}},14511,46617,58078,a=>{"use strict";a.s(["default",()=>v],14511);var b=a.i(87924),c=a.i(72131);a.s(["SCALE_CATALOG",()=>d],46617);let d=[{id:"Ionian",display:{en:"Major Scale"},group:"Diatonic",degrees:["1","2","3","4","5","6","7"],info:{oneLiner:"Major scale; bright and stable.",examples:[{title:"Let It Be",artist:"The Beatles"},{title:"Do-Re-Mi",artist:"Richard Rodgers"}]}},{id:"Dorian",display:{en:"Dorian Scale"},group:"Diatonic",degrees:["1","2","b3","4","5","6","b7"],info:{oneLiner:"Minor with a natural 6th; cool, modal colour.",examples:[{title:"So What",artist:"Miles Davis"}]}},{id:"Phrygian",display:{en:"Phrygian Scale"},group:"Diatonic",degrees:["1","b2","b3","4","5","b6","b7"],info:{oneLiner:"Dark, Spanish/Arabic flavour with flat 2."}},{id:"Lydian",display:{en:"Lydian Scale"},group:"Diatonic",degrees:["1","2","3","#4","5","6","7"],info:{oneLiner:"Dreamy major with raised 4th (♯4).",examples:[{title:"The Simpsons Theme",artist:"Danny Elfman"}]}},{id:"Mixolydian",display:{en:"Mixolydian Scale"},group:"Diatonic",degrees:["1","2","3","4","5","6","b7"],info:{oneLiner:"Major with flat 7; dominant, bluesy feel.",examples:[{title:"Sweet Home Alabama",artist:"Lynyrd Skynyrd"}]}},{id:"Aeolian",display:{en:"Natural Minor Scale"},group:"Diatonic",degrees:["1","2","b3","4","5","b6","b7"],info:{oneLiner:"Natural minor; sad or moody colour.",examples:[{title:"House of the Rising Sun",artist:"Traditional"}]}},{id:"Locrian",display:{en:"Locrian Scale"},group:"Diatonic",degrees:["1","b2","b3","4","b5","b6","b7"],info:{oneLiner:"Diminished 5th; unstable, rarely used as a key."}},{id:"MajorPentatonic",display:{en:"Major Pentatonic"},group:"Pentatonic",degrees:["1","2","3","5","6"],info:{oneLiner:"Five-note, open and melodic; fits many chords.",examples:[{title:"My Girl",artist:"The Temptations"}]}},{id:"MinorPentatonic",display:{en:"Minor Pentatonic"},group:"Pentatonic",degrees:["1","b3","4","5","b7"],info:{oneLiner:"Five-note minor staple for rock/blues solos.",examples:[{title:"Purple Haze",artist:"Jimi Hendrix"}]}},{id:"Blues",display:{en:"Blues Scale (minor)"},group:"Pentatonic",degrees:["1","b3","4","b5","5","b7"],info:{oneLiner:"Minor pentatonic plus blue note (♭5).",examples:[{title:"Smoke on the Water",artist:"Deep Purple"}]}},{id:"HarmonicMinor",display:{en:"Harmonic Minor"},group:"Minor",degrees:["1","2","b3","4","5","b6","7"],info:{oneLiner:"Minor with raised 7th; exotic dominant pull.",examples:[{title:"Misirlou",artist:"Traditional"}]}},{id:"MelodicMinor",display:{en:"Melodic Minor Scale"},group:"Minor",degrees:["1","2","b3","4","5","6","7"],info:{oneLiner:"Jazz minor (ascending); smooth minor/major blend."}},{id:"DiminishedWholeHalf",display:{en:"Diminished Scale (Whole–Half)"},group:"Other",degrees:["1","2","b3","4","b5","b6","6","7"],info:{oneLiner:"Symmetric 8-note (whole–half) scale; over dim7."}},{id:"DiminishedHalfWhole",display:{en:"Diminished Scale (Half–Whole)"},group:"Other",degrees:["1","b2","b3","3","#4","5","6","b7"],info:{oneLiner:"Symmetric 8-note (half–whole); over 7♭9 chords."}}];a.s(["SCALE_INTERVALS",()=>e,"degreeLabelFor",()=>i,"degreeRomanFor",()=>j,"getScalePitches",()=>f,"getScalePitchesById",()=>p,"parentModeOf",()=>k,"romanDegreeLabelsForScale",()=>n,"scaleTypeLabel",()=>g],58078);let e={Ionian:[0,2,4,5,7,9,11],Dorian:[0,2,3,5,7,9,10],Phrygian:[0,1,3,5,7,8,10],Lydian:[0,2,4,6,7,9,11],Mixolydian:[0,2,4,5,7,9,10],Aeolian:[0,2,3,5,7,8,10],Locrian:[0,1,3,5,6,8,10],HarmonicMinor:[0,2,3,5,7,8,11],MelodicMinor:[0,2,3,5,7,9,11],MajorPentatonic:[0,2,4,7,9],MinorPentatonic:[0,3,5,7,10],Blues:[0,3,5,6,7,10],DiminishedWholeHalf:[0,2,3,5,6,8,9,11],DiminishedHalfWhole:[0,1,3,4,6,7,9,10]};function f(a,b){try{return p(a,b)}catch{}let c=e[b];if(!c||0===c.length)throw Error(`Unknown scale id: ${String(b)}`);return c.map(b=>(a+b+120)%12)}function g(a){let b={Ionian:"Major Scale",Dorian:"Dorian",Phrygian:"Phrygian",Lydian:"Lydian",Mixolydian:"Mixolydian",Aeolian:"Natural Minor",Locrian:"Locrian",HarmonicMinor:"Harmonic Minor",MelodicMinor:"Melodic Minor",MajorPentatonic:"Major Pentatonic",MinorPentatonic:"Minor Pentatonic"}[a];if(b)return b;let c=d.find(b=>b.id===a);return(c?.display.en||String(a)).replace(/\s*\(.*\)$/,"")}let h={Ionian:["1","2","3","4","5","6","7"],Dorian:["1","2","♭3","4","5","6","♭7"],Phrygian:["1","♭2","♭3","4","5","♭6","♭7"],Lydian:["1","2","3","♯4","5","6","7"],Mixolydian:["1","2","3","4","5","6","♭7"],Aeolian:["1","2","♭3","4","5","♭6","♭7"],Locrian:["1","♭2","♭3","4","♭5","♭6","♭7"],HarmonicMinor:["1","2","♭3","4","5","♭6","7"],MelodicMinor:["1","2","♭3","4","5","6","7"],MajorPentatonic:["1","2","3","5","6"],MinorPentatonic:["1","♭3","4","5","♭7"],Blues:["1","♭3","4","♭5","5","♭7"]};function i(a,b,c){let f=d.find(a=>a.id===c),g=((f?f.degrees.map(a=>o[a]):void 0)??e[c]??[]).indexOf((a-b+120)%12);if(-1===g)return null;let i=f?.degrees??h[c]??void 0;return i?i[g]??null:null}function j(a,b,c){let f=d.find(a=>a.id===c),g=((f?f.degrees.map(a=>o[a]):void 0)??e[c]??[]).indexOf((a-b+120)%12);if(-1===g)return null;let i=f?.degrees??h[c]??void 0;if(!i)return null;let j=(i[g]??"").replace(/\s+/g,"").replace(/bb/g,"♭♭").replace(/b/g,"♭").replace(/##/g,"♯♯").replace(/#/g,"♯"),k=j.match(/^(♭|♯|♭♭|♯♯)?(\d)$/);if(!k)return j;let l=k[1]??"",m=k[2];return`${l}${({1:"R",2:"II",3:"III",4:"IV",5:"V",6:"VI",7:"VII"})[m]??m}`}function k(a){switch(a){case"MajorPentatonic":return"Ionian";case"MinorPentatonic":return"Aeolian";default:return null}}let l=[0,2,4,5,7,9,11],m=["I","II","III","IV","V","VI","VII"];function n(a){let b=e[a];return b&&7===b.length?b.map((a,b)=>{let c=m[b],d=a-l[b];return 0===d?c:d>0?"#".repeat(d)+c:"b".repeat(-d)+c}):[...m]}let o={1:0,b2:1,2:2,b3:3,3:4,4:5,"#4":6,b5:6,5:7,"#5":8,b6:8,6:9,bb7:9,b7:10,7:11};function p(a,b){let c=d.find(a=>a.id===b);if(!c)throw Error(`Scale not found in catalog: ${String(b)}`);return c.degrees.map(b=>(a+o[b]+120)%12)}var q=a.i(47473);let r=["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"],s="hsl(210 10% 72% / .70)",t=(a,b)=>{let c=b?24:26;return{width:c,height:c,borderRadius:c,background:a,color:"#0b0b0b",fontWeight:700,fontSize:b?13:14,display:"flex",alignItems:"center",justifyContent:"center",transform:"translate(-50%, -50%)",textShadow:"0 0 1px rgba(0,0,0,.55)",WebkitTextStroke:"0.3px rgba(255,255,255,.35)",userSelect:"none"}};function u(a,b,c,d,e){if(!d)return"hsl(210 6% 38% / .30)";if(a)return c?"hsl(0 85% 55% / .95)":s;if(e)return"hsl(355 80% 60% / .95)";if(!b)return s;let f=b.replace(/\s/g,"");return f.includes("3")?"hsl(205 90% 56% / .90)":f.includes("5")?"hsl(150 65% 45% / .90)":f.includes("7")?"hsl(48 95% 55% / .92)":s}function v({strings:a=["E","B","G","D","A","E"],frets:e=15,dotPositions:g=[3,5,7,9,12,15],overlay:h=null,onRequestForms:k,formShape:l=null}){let m=(0,c.useRef)(null),[n,o]=(0,c.useState)(!1),[p,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=()=>{try{o(window.innerWidth<380)}catch{}};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);let v=h??null,w=a=>`48px repeat(${a}, minmax(28px, 1fr))`;return(0,c.useRef)(null),(0,c.useEffect)(()=>{},[e,a.length]),(0,b.jsxs)("div",{className:"rounded-lg border p-3 overflow-x-auto ot-fretboard ot-fb-compact",children:[(0,b.jsx)("div",{className:"min-w-[640px]",children:(0,b.jsxs)("div",{ref:m,className:"relative",style:{height:32+28*a.length+16},children:[(0,b.jsx)("div",{className:"pointer-events-none absolute top-1 grid text-[12px] md:text-sm text-foreground/80",style:{gridTemplateColumns:w(e),height:32,left:44,right:0},children:Array.from({length:e+1}).map((a,c)=>[0,1,3,5,7,9,12,15].includes(c)?(0,b.jsx)("div",{className:"flex items-start justify-center",children:(0,b.jsx)("span",{className:"inline-block px-1 rounded bg-background/80",children:c})},c):(0,b.jsx)("div",{},c))}),(0,b.jsx)("div",{className:"absolute select-none",style:{left:0,top:32,width:44,height:28*a.length,display:"grid",gridTemplateRows:`repeat(${a.length}, 28px)`},"aria-hidden":"true",children:a.map((a,c)=>(0,b.jsx)("div",{className:"flex items-center justify-center text-xs md:text-sm leading-none text-muted-foreground",children:a},`lbl-${c}`))}),(0,b.jsxs)("div",{className:"absolute right-0 bottom-0 grid",style:{top:32,left:44,width:"calc(100% - 44px)",gridTemplateColumns:w(e),gridTemplateRows:`repeat(${a.length}, 28px)`},children:[a.map((g,h)=>(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsx)("div",{className:"relative",children:function({overlay:a,strings:c,rowIdx:e,isMobile:g}){if(!a)return null;let h=a.chordNotes??a.notes??[],k=(h?.length??0)>0?x(h[0]??"C"):0,l=new Set((h||[]).map(a=>x(a??"C"))),m=x(c[e]??"E"),n=[64,59,55,50,45,40],o=n[Math.min(e,n.length-1)]??64,p=a.scaleRootPc,s=a.scaleType,v=(()=>{if("number"!=typeof p||!s)return!0;let b=(m-p+120)%12;return f(p,a.scaleType).map(a=>(a-p+120)%12).includes(b)})(),w=(h?.length??0)>0,z=(a.showScaleGhost??!0)&&w&&v&&!l.has(m),A=l.has(m),B=!w&&v;if(!z&&!A&&!B)return null;let C="number"==typeof p?(m-p+120)%12:0,D=[0,4,7,10,11].includes(C)&&v,E=v&&"number"==typeof p&&s?i(m,p,a.scaleType)??null:null,F=u(!1,E,D,v,0===C),G="degrees"===a.display?j(m,k,a.scaleType)??E??y(m,k):r[m],H=(()=>{let b=d.find(b=>b.id===a.scaleType);return(b?.degrees?.length??0)>7})(),I=`string ${e+1}, fret 0, ${"1"===G?"root":G}`;return(0,b.jsxs)("div",{className:"absolute inset-0",children:[z&&(0,b.jsx)("div",{className:`absolute left-1/2 top-1/2 fret-dot--ghost${H?" ghost--dense":""}`,style:{color:"hsl(210 12% 58% / .60)"},"aria-hidden":!0}),B&&(0,b.jsx)("button",{type:"button",onClick:async()=>{await q.player.resume(),q.player.playNote(o)},style:t(F,g),className:"absolute left-1/2 top-1/2 fret-dot fret-dot--main","aria-label":I,children:G}),A&&(0,b.jsx)("button",{type:"button",onClick:async()=>{await q.player.resume(),q.player.playNote(o)},style:t(F,g),className:"absolute left-1/2 top-1/2 fret-dot fret-dot--main fret-dot--chord","aria-label":I,children:G})]})}({overlay:v,strings:a,rowIdx:h,isMobile:n})},`open-${h}`),Array.from({length:e}).map((c,e)=>(0,b.jsx)("div",{className:`relative ${0===e?"border-l border-transparent":"border-l border-black/10 dark:border-white/10"} ${p&&p.r===h&&p.c===e?"fb-pressed":""} cursor-pointer select-none`,onClick:async()=>{let a=[64,59,55,50,45,40],b=a[Math.min(h,a.length-1)]??64;s(a=>({r:h,c:e,ver:(a?.ver??0)+1}));let c=(p?.ver??0)+1;window.setTimeout(()=>{s(a=>a&&a.r===h&&a.c===e&&a.ver===c?null:a)},180);try{await q.player.resume(),q.player.playNote(b+(e+1),240)}catch{}},children:function({overlay:a,strings:c,rowIdx:e,colIdx:g,isMobile:h}){if(!a)return null;let k=a.chordNotes??a.notes??[],l=(k?.length??0)>0?x(k[0]??"C"):0,m=new Set((k||[]).map(a=>x(a??"C"))),n=x(c[e]??"E"),o=g+1,p=(n+o)%12,s=[64,59,55,50,45,40],v=(s[Math.min(e,s.length-1)]??64)+o,w=a.scaleRootPc,z=a.scaleType,A=(()=>{if("number"!=typeof w||!z)return!0;let b=(p-w+120)%12;return f(w,a.scaleType).map(a=>(a-w+120)%12).includes(b)})(),B=(k?.length??0)>0,C=(a.showScaleGhost??!0)&&B&&A&&!m.has(p),D=m.has(p),E=!B&&A;if(!C&&!D&&!E)return null;let F="number"==typeof w?(p-w+120)%12:0,G=m.has(p)||[0,4,7,10,11].includes(F),H=A&&"number"==typeof w&&z?i(p,w,a.scaleType)??null:null,I=u(!1,H,G,A,0===F),J="degrees"===a.display,K="number"==typeof w?w:l,L=J?j(p,K,a.scaleType)??H??y(p,K):r[p],M=(()=>{let b=d.find(b=>b.id===a.scaleType);return(b?.degrees?.length??0)>7})(),N=`string ${e+1}, fret ${g+1}, ${"1"===L?"root":L}`;return(0,b.jsxs)("div",{className:"absolute inset-0","aria-live":"polite",children:[C&&(0,b.jsx)("div",{className:`absolute left-1/2 top-1/2 fret-dot--ghost${M?" ghost--dense":""}`,style:{color:function(a,b=.85){try{if(a.includes("/"))return a.replace(/\/(.*?)\)/,`/ ${b})`);if(a.endsWith(")"))return a.replace(/\)$/,` / ${b})`)}catch{}return a}(I)},"aria-hidden":!0}),E&&(0,b.jsx)("button",{type:"button",onClick:async()=>{await q.player.resume(),q.player.playNote(v)},style:t(I,h),className:"absolute left-1/2 top-1/2 fret-dot fret-dot--main","aria-label":N,children:L}),D&&(0,b.jsx)("button",{type:"button",onClick:async()=>{await q.player.resume(),q.player.playNote(v)},style:t(I,h),className:"absolute left-1/2 top-1/2 fret-dot fret-dot--main fret-dot--chord","aria-label":N,children:L})]})}({overlay:v,strings:a,rowIdx:h,colIdx:e,isMobile:n})},`c-${h}-${e}`))]},`row-${h}`)),(0,b.jsx)("div",{"aria-hidden":!0,className:"absolute pointer-events-none z-[20] bg-black/60 dark:bg-white/70",style:{left:46.5,top:0,bottom:0,width:3,borderRadius:2}})]})]})}),l&&function({formShape:a,LEFT_GUTTER:c,TOP_BAR_H:d,SPACE_W:e,ROW_H:f}){return a.dots.map((a,g)=>{let h="1"===a.deg?"root":a.deg.replace(/b/g,"flat ").replace(/#/g,"sharp "),i=`string ${a.string}, fret ${a.fret}, ${h}`,j=`calc(${c}px + ${a.fret*e}px)`,k=`calc(${d}px + ${(a.string-.5)*f}px)`;return(0,b.jsx)("div",{className:"absolute",role:"img","aria-label":i,style:{left:j,top:k,transform:"translate(-50%, -50%)"},children:(0,b.jsx)("span",{className:"fret-dot--form","aria-hidden":!0})},`form-${g}`)})}({formShape:l,LEFT_GUTTER:44,TOP_BAR_H:32,SPACE_W:28,ROW_H:28})]})}let w={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},x=a=>w[a]??0;function y(a,b){return["1","b2","2","b3","3","4","#4","5","b6","6","b7","7"][(a-b+12)%12]}},20226,a=>{"use strict";a.s(["create",()=>e],20226);var b=a.i(72131);let c=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},d=a=>{let d=(a=>a?c(a):c)(a),e=a=>(function(a,c=a=>a){let d=b.default.useSyncExternalStore(a.subscribe,b.default.useCallback(()=>c(a.getState()),[a,c]),b.default.useCallback(()=>c(a.getInitialState()),[a,c]));return b.default.useDebugValue(d),d})(d,a);return Object.assign(e,d),e},e=a=>a?d(a):d},13512,1731,a=>{"use strict";a.s(["detectCadence",()=>p,"noteToPc",()=>j,"parseChord",()=>k,"rankKeys",()=>n,"romanToChordSymbol",()=>r,"scoreKeyCandidates",()=>o],13512),a.s(["DEFAULT_MIDI_OCTAVE",()=>c,"PC_NAMES",()=>b,"mod12",()=>d,"nameToPc",()=>f,"pcToName",()=>e],1731);let b=["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"],c=60;function d(a){return(a%12+12)%12}function e(a){return b[d(a)]}function f(a){let c=b.indexOf(a);return c>=0?c:-1}let g={ionian:[0,2,4,5,7,9,11],aeolian:[0,2,3,5,7,8,10]},h={maj:"M",major:"M","":"M",maj7:"M7",M7:"M7",Δ:"M7",Δ7:"M7",maj9:"M9",M9:"M9",Δ9:"M9",maj11:"M11",M11:"M11",maj13:"M13",M13:"M13",min:"m",mi:"m","-":"m",min7:"m7",mi7:"m7","-7":"m7",min9:"m9",mi9:"m9",min11:"m11",mi11:"m11",min13:"m13",mi13:"m13",mM7:"mMaj7",mMaj7:"mMaj7",minMaj7:"mMaj7",dim:"dim","°":"dim",o:"dim",dim7:"dim7","°7":"dim7",o7:"dim7",m7b5:"m7b5","m7♭5":"m7b5",ø:"m7b5",ø7:"m7b5",aug:"aug","+":"aug",aug7:"7#5","7#5":"7#5","7+5":"7#5","7♯5":"7#5",sus2:"sus2",sus4:"sus4",sus:"sus4","7sus4":"7sus4","7sus":"7sus4",6:"6",m6:"m6",min6:"m6","6/9":"6/9",69:"6/9","7b5":"7b5","7♭5":"7b5","7-5":"7b5","7b9":"7b9","7♭9":"7b9","7-9":"7b9","7#9":"7#9","7♯9":"7#9","7+9":"7#9","7b13":"7b13","7♭13":"7b13","7#11":"7#11","7♯11":"7#11","7(9)":"9","7(11)":"11","7(13)":"13","m7(9)":"m9","m7(11)":"m11","M7(9)":"M9","M7(13)":"M13","7alt":"7alt","7altered":"7alt"},i={M:[0,4,7],m:[0,3,7],aug:[0,4,8],dim:[0,3,6],sus2:[0,2,7],sus4:[0,5,7],6:[0,4,7,9],m6:[0,3,7,9],"6/9":[0,4,7,9,14],7:[0,4,7,10],M7:[0,4,7,11],m7:[0,3,7,10],dim7:[0,3,6,9],m7b5:[0,3,6,10],mMaj7:[0,3,7,11],9:[0,4,7,10,14],M9:[0,4,7,11,14],m9:[0,3,7,10,14],add9:[0,4,7,14],madd9:[0,3,7,14],11:[0,4,7,10,14,17],M11:[0,4,7,11,14,17],m11:[0,3,7,10,14,17],13:[0,4,7,10,14,21],M13:[0,4,7,11,14,21],m13:[0,3,7,10,14,21],"7sus4":[0,5,7,10],"7b5":[0,4,6,10],"7#5":[0,4,8,10],"7b9":[0,4,7,10,13],"7#9":[0,4,7,10,15],"7#11":[0,4,7,10,18],"7b13":[0,4,7,10,20],"7alt":[0,4,7,10,13,15,18]},j=a=>{let c=b.indexOf(a);if(c>=0)return c;let d={Db:"C#",Gb:"F#",Ab:"G#",Bb:"A#",Eb:"D#",Cb:"B",Fb:"E"}[a]??a;return b.indexOf(d)};function k(a){var b;let c=a.split("/"),d=c[0].match(/^([A-G](#|b)?)(.*)$/);if(!d)throw Error("bad chord: "+a);let e=j(d[1]),f=h[b=(d[3]||"").trim()||"M"]??b,g=(i[f]??i.M).map(a=>(e+a%12+12)%12);return{root:e,qual:f,bass:c[1]?j(c[1]):void 0,tones:g}}let l={0:["M","M7"],2:["m","m7"],4:["m","m7"],5:["M","M7"],7:["M","7"],9:["m","m7"],11:["dim","m7b5"]},m={0:["m","m7"],2:["dim","m7b5"],3:["M","M7"],5:["m","m7"],7:["m","7","M","7"],8:["M","M7"],10:["M","7"]};function n(a){let c=a.map(k),d=[];for(let a=0;a<12;a++)d.push({root:a,mode:"Major"},{root:a,mode:"Minor"});let e=3*c.length+3;return d.map(({root:a,mode:d})=>{let f="Major"===d?l:m,h=0;c.forEach((b,e)=>{let i=(b.root-a+12)%12,j=f[i];if(j)j.includes(b.qual)?h+=3:h+=2;else{let c="Major"===d?g.ionian:g.aeolian;b.tones.every(b=>c.includes((b-a+12)%12))&&(h+=1)}e>0&&((c[e-1].root-a+12)%12-i+12)%12==7&&(h+=1)});let i=(c[0].root-a+12)%12;"Major"===d&&(0===i||9===i)&&(h+=2),"Minor"===d&&(0===i||3===i)&&(h+=2);let j=Math.round(h/Math.max(e,1)*100),k=`${b[a]} ${d}`;return{keyRoot:a,mode:d,label:k,score:h,pct:j}}).sort((a,b)=>b.score-a.score)}function o(a){return n(a).slice(0,5).map(b=>{let c=p(a,{tonic:b.keyRoot,mode:b.mode}),d=[];return"perfect"===c&&d.push("Cadence: V→I"),"deceptive"===c&&d.push("Cadence: V→vi"),"half"===c&&d.push("Cadence: …→V"),d.unshift(`diatonic fit ${b.pct}%`),{tonic:b.keyRoot,mode:b.mode,confidence:b.pct,reasons:d}})}function p(a,b){if(a.length<2)return null;let c=k(a[a.length-1]),d=k(a[a.length-2]),e=(c.root-b.tonic+12)%12,f=(d.root-b.tonic+12)%12;return 7===f&&0===e?"perfect":7===f&&9===e?"deceptive":7===e?"half":null}let q={Ⅰ:{offset:0},ⅰ:{offset:0},Ⅱ:{offset:2},ⅱ:{offset:2},"♭Ⅱ":{offset:1},"♭ⅱ":{offset:1},Ⅲ:{offset:4},ⅲ:{offset:4},"♭Ⅲ":{offset:3},"♭ⅲ":{offset:3},Ⅳ:{offset:5},ⅳ:{offset:5},"♯Ⅳ":{offset:6},"♯ⅳ":{offset:6},Ⅴ:{offset:7},ⅴ:{offset:7},"♭Ⅵ":{offset:8},"♭ⅵ":{offset:8},Ⅵ:{offset:9},ⅵ:{offset:9},"♭Ⅶ":{offset:10},"♭ⅶ":{offset:10},Ⅶ:{offset:11},ⅶ:{offset:11}};function r(a,b,c){var d;let{deg:e,explicitQual:f}=function(a){for(let[b,{offset:c}]of Object.entries(q))if(a.startsWith(b))return{deg:c,explicitQual:a.slice(b.length).trim()||null};return console.warn(`Unknown Roman numeral: ${a}`),{deg:0,explicitQual:null}}(a),g=null!==f?f:function(a,b){let c=("Major"===b?l:m)[a];return c&&0!==c.length?c[0]:""}(e,c),h=(d=(b+e)%12,void 0===b?["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"][d]:[7,2,9,4,11,6,1].includes(b)?["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][d]:["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][d]);return`${h}${g}`}},43687,63859,a=>{"use strict";a.s(["scoreScales",()=>f],43687);var b=a.i(13512),c=a.i(58078);let d=["Ionian","Lydian","Mixolydian","MajorPentatonic"],e=["Aeolian","Dorian","Phrygian","HarmonicMinor","MelodicMinor","MinorPentatonic"];function f(a,f){let g="Major"===f.mode?d:e,h=Array.from(new Set(a.flatMap(a=>{let c=(0,b.parseChord)(a),d=c.qual.includes("m")?3:4,e=c.qual.includes("7")?c.qual.includes("M7")?11:10:null,f=[c.root%12,(c.root+d)%12,(c.root+7)%12];return null!==e&&f.push((c.root+e)%12),f}))),i=a.some(a=>/7\b/.test(a));return g.map(a=>{let b=(0,c.getScalePitches)(f.root,a),d=h.filter(a=>b.includes(a)).length/Math.max(1,h.length),e=0;"Major"===f.mode&&"Ionian"===a&&(e+=.02),"Minor"===f.mode&&"Aeolian"===a&&(e+=.02),i&&("HarmonicMinor"===a||"MelodicMinor"===a)&&(e+=.03);let g=Math.round(100*Math.min(1,d+e));return{root:f.root,type:a,score:g}}).sort((a,b)=>b.score-a.score)}a.s(["progressionToRoman",()=>h],63859);let g=["I","II","III","IV","V","VI","VII"];function h(a,d,e){return a.map(a=>(function(a,d,e){let{root:f,qual:h}=(0,b.parseChord)(a),i=(0,c.parentModeOf)(e)??e,j=(0,c.degreeLabelFor)(f,d,i),k=j?.startsWith("♭")?"♭":j?.startsWith("#")?"♯":"";if(!j){let a=(0,c.getScalePitches)(d,i),b=(f+12-1)%12,e=(f+1)%12,g=a.indexOf(b),h=a.indexOf(e);-1!==g?(j=(0,c.degreeLabelFor)(b,d,i),k="♭"):-1!==h&&(j=(0,c.degreeLabelFor)(e,d,i),k="♯")}let l=function(a){if(!a)return"I";let b=Number(a.replace(/[♭#]/g,""));return g[isFinite(b)?Math.max(1,Math.min(7,b))-1:0]}(j),m=/dim|o/.test(h)?"°":"",n=/7/.test(h)?"7":"";return`${k}${l}${m}${n}`})(a,d,e))}},32653,a=>{"use strict";function b({tonicPc:a,scaleIntervals:b}){let c=b.map(b=>(a+b+120)%12),d=[];for(let a=0;a<7;a++){let b=a%7,e=c[b],f=c[(b+2)%7],g=c[(b+4)%7],h=function(a,b,c){let d=(b-a+12)%12,e=(c-a+12)%12;return 4===d&&7===e?"maj":3===d&&7===e?"min":3===d&&6===e?"dim":4===d&&8===e?"aug":6===e?"dim":8===e?"aug":d<4?"min":"maj"}(e,f,g);d.push({degree:a+1,rootPc:e,pcs:[e,f,g],quality:h})}return d}a.s(["diatonicTriads",()=>b,"romanOfTriad",()=>d,"triadToChordSym",()=>f]);let c=["I","II","III","IV","V","VI","VII"];function d(a,b,d){let e=c[a-1];return"upper"===(d?.case??"upper")?"dim"===b?e+"°":"aug"===b?e+"+":e:"min"===b?e.toLowerCase():"dim"===b?e.toLowerCase()+"°":"aug"===b?e+"+":e}let e=["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"];function f(a){let b=e[a.rootPc%12];return"maj"===a.quality?b:"min"===a.quality?b+"m":"dim"===a.quality?b+"dim":b+"+"}},6164,69803,a=>{"use strict";a.s(["useAnalysisStore",()=>m],6164);var b=a.i(20226),c=a.i(13512),d=a.i(43687),e=a.i(63859),f=a.i(58078),g=a.i(32653);a.s(["recommendCapos",()=>l],69803);let h={C:[3,3,3,1,3,3,0],G:[3,3,1,3,3,3,0],D:[3,3,1,3,3,1,0],A:[3,1,1,3,2,1,0],E:[3,1,0,3,1,1,0]},i={Am:[3,0,3,3,3,1,3],Em:[3,0,3,3,1,3,3],Dm:[3,0,1,0,3,0,3]};function j(a){return a<=5?1:a<=7?.92:a<=9?.82:.7}let k={0:"C",1:"C#",2:"D",3:"Eb",4:"E",5:"F",6:"F#",7:"G",8:"Ab",9:"A",10:"Bb",11:"B"};function l(a,b,c=3,d={}){let e=d.includeOpen??!0,f=function(a){let b=a.toLowerCase();for(let a of["Major","Ionian","Lydian","Mixolydian","Major Pentatonic"])if(b.includes(a.toLowerCase()))return"majorish";return"minorish"}(b.type),g=[];for(let b=0;b<=11;b++){if(!e&&0===b)continue;let c=k[((a.tonic-b)%12+12)%12];if("majorish"===f){let a={C:"C",G:"G",D:"D",A:"A",E:"E"}[c];if(!a)continue;let d=h[a].reduce((a,b)=>a+b,0),e=2*(h[a][0]>=2&&h[a][3]>=2&&h[a][4]>=2),f=(d+e)*j(b);g.push({capo:b,playAs:a,score:f,reasons:[`I–IV–V ${e?"◎":"○"}`,`open ${d}/16`,0===b?"open":`capo ${b}`]})}else{let a={A:"Am",E:"Em",D:"Dm"}[c];if(!a)continue;let d=i[a].reduce((a,b)=>a+b,0),e=2*(i[a][0]>=2&&i[a][3]>=2),f=(d+e)*j(b);g.push({capo:b,playAs:a,score:f,reasons:[`i–iv ${e?"◎":"○"}`,`open ${d}/16`,0===b?"open":`capo ${b}`]})}}return g.sort((a,b)=>b.score-a.score).slice(0,c)}let m=(0,b.create)((a,b)=>({keyCandidates:[],capo:null,viewMode:"sounding",scaleCandidates:[],selectedScale:null,romanTokens:[],romanText:"",diatonic:null,recommendedCapos:[],analyze:b=>{a(a=>{let h=(0,c.scoreKeyCandidates)(b),i=h[0],j=a.selectedKey&&h.find(b=>b.tonic===a.selectedKey.tonic&&b.mode===a.selectedKey.mode),k=j&&i&&4>Math.abs((j.confidence||0)-(i.confidence||0))&&a.selectedKey?a.selectedKey:i?{tonic:i.tonic,mode:i.mode}:void 0,m=k?(0,d.scoreScales)(b,{root:k.tonic,mode:k.mode}):[],n=m[0]??null,o=k&&n?(0,e.progressionToRoman)(b,k.tonic,n.type):[],p=(()=>{if(!k||!n)return null;let a=k.tonic,b=n.type,c=f.SCALE_INTERVALS[b]??[];if(c.length<7){let a=(0,f.parentModeOf)(b);a&&(b=a,c=f.SCALE_INTERVALS[a]??[])}if(!c.length)return null;let d=(0,g.diatonicTriads)({tonicPc:a,scaleIntervals:c}),e=d.map(a=>(0,g.romanOfTriad)(a.degree,a.quality,{case:"upper"}));return{triads:d,romans:e}})(),q=k&&n?l({tonic:k.tonic,mode:k.mode},{type:n.type},3,{includeOpen:!1}):[];return{keyCandidates:h,selectedKey:k,scaleCandidates:m,selectedScale:n,lastProg:b,romanTokens:o,romanText:o.join(" – "),diatonic:p,recommendedCapos:q}})},selectKey:b=>a(a=>{let c=a.lastProg??[],h=(0,d.scoreScales)(c,{root:b.tonic,mode:b.mode}),i=h[0]??null,j=i?(0,e.progressionToRoman)(c,b.tonic,i.type):[],k=(()=>{if(!i)return null;let a=i.type,c=f.SCALE_INTERVALS[a]??[];if(c.length<7){let b=(0,f.parentModeOf)(a);b&&(a=b,c=f.SCALE_INTERVALS[b]??[])}if(!c.length)return null;let d=(0,g.diatonicTriads)({tonicPc:b.tonic,scaleIntervals:c}),e=d.map(a=>(0,g.romanOfTriad)(a.degree,a.quality,{case:"upper"}));return{triads:d,romans:e}})(),m=i?l({tonic:b.tonic,mode:b.mode},{type:i.type},3,{includeOpen:!1}):[];return{selectedKey:b,scaleCandidates:h,selectedScale:i,romanTokens:j,romanText:j.join(" – "),diatonic:k,recommendedCapos:m}}),selectScale:b=>a(a=>{let c=a.lastProg??[],d=a.selectedKey,h=c.length&&d?(0,e.progressionToRoman)(c,d.tonic,b.type):[],i=(()=>{if(!d)return null;let a=b.type,c=f.SCALE_INTERVALS[a]??[];if(c.length<7){let b=(0,f.parentModeOf)(a);b&&(a=b,c=f.SCALE_INTERVALS[b]??[])}if(!c.length)return null;let e=(0,g.diatonicTriads)({tonicPc:d.tonic,scaleIntervals:c}),h=e.map(a=>(0,g.romanOfTriad)(a.degree,a.quality,{case:"upper"}));return{triads:e,romans:h}})(),j=d?l({tonic:d.tonic,mode:d.mode},{type:b.type},3,{includeOpen:!1}):[];return{selectedScale:b,romanTokens:h,romanText:h.join(" – "),diatonic:i,recommendedCapos:j}}),chooseCapo:b=>a({capo:{capo:b.capo,shapedKey:b.shapedKey}}),setViewMode:b=>a({viewMode:b}),reset:()=>a({keyCandidates:[],selectedKey:void 0,analysis:void 0,capo:null,viewMode:"sounding",scaleCandidates:[],selectedScale:null,lastProg:[]})}))},79735,a=>{"use strict";a.s(["default",()=>i],79735);var b=a.i(87924),c=a.i(72131),d=a.i(6164),e=a.i(32653),f=a.i(58078),g=a.i(69803);let h=a.i(1731).PC_NAMES;function i({onPick:a,selectedId:i,onSelectId:j}){let k=(0,d.useAnalysisStore)(a=>a.selectedKey),l=(0,d.useAnalysisStore)(a=>a.selectedScale),m=(0,f.romanDegreeLabelsForScale)(l?.type??"Ionian"),n="px-2 py-1 text-center border rounded-[var(--chip-br)]",o=(0,c.useRef)(null),p=(0,c.useRef)(!1),q=(0,c.useCallback)((b,c,d)=>{p.current=!1,o.current=setTimeout(()=>{if(p.current=!0,window.confirm(`Add "${c}" to progression?`)){let c=`open-${b}`;j?.(c),a?.({id:c,row:"open",degree:b,pcs:d,capo:0,isRightClick:!0})}},500)},[a,j]),r=(0,c.useCallback)(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),s=c.default.useMemo(()=>{if(!k||!l)return Array(7).fill({sym:"—",pcs:[]});let a=l.type,b=f.SCALE_INTERVALS[a]??[];if(7!==b.length){let c=(0,f.parentModeOf)(a);c&&(b=f.SCALE_INTERVALS[c]??[])}return 7!==b.length?Array(7).fill({sym:"—",pcs:[]}):(0,e.diatonicTriads)({tonicPc:k.tonic,scaleIntervals:b}).map(a=>({sym:(0,e.triadToChordSym)({rootPc:a.rootPc,quality:a.quality}),pcs:a.pcs}))},[k,l]),t=c.default.useMemo(()=>{if(!k||!l)return[];let a="Major"===k.mode||"Minor"===k.mode?k.mode:"major"===k.mode?"Major":"Minor";return(0,g.recommendCapos)({tonic:k.tonic,mode:a},{type:l.type},3,{includeOpen:!0}).filter(a=>0!==a.capo).sort((a,b)=>a.capo-b.capo).slice(0,2).map(a=>{let b=a.playAs,c=/m$/.test(b)?b.replace(/m$/,""):b,d=h.indexOf(c),g=l.type,i=f.SCALE_INTERVALS[g]??[];if(7!==i.length){let a=(0,f.parentModeOf)(g);a&&(i=f.SCALE_INTERVALS[a]??[])}let j=7===i.length?(0,e.diatonicTriads)({tonicPc:d,scaleIntervals:i}):[],k=(j.length?j:Array(7).fill(null)).map(a=>a?(0,e.triadToChordSym)({rootPc:a.rootPc,quality:a.quality}):"—"),m=(j.length?j:Array(7).fill(null)).map(a=>a?a.pcs:[]);return{capo:a.capo,label:`Capo ${a.capo}`,cells:k,cellsPcs:m,tooltip:`Play as ${b}${a.reasons&&a.reasons.length?" · "+a.reasons.join(" · "):""}`}})},[k,l]),u=m.map(a=>a.replaceAll("b","♭").replaceAll("#","♯"));return(0,b.jsx)("div",{className:"overflow-x-auto capo-compact capo-compact--tight","aria-live":"polite","aria-labelledby":"diatonic-title",children:(0,b.jsxs)("table",{className:"w-full border-separate rounded-xl border text-sm md:text-[0.95rem]",style:{borderSpacing:"6px"},children:[(0,b.jsxs)("colgroup",{children:[(0,b.jsx)("col",{className:"w-12 sm:w-14 md:w-18"}),(0,b.jsx)("col",{span:7})]}),(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"px-1 py-0 text-center text-sm font-medium border-none bg-transparent rounded-none"}),u.map((a,c)=>(0,b.jsx)("th",{scope:"col",className:"px-1 py-0 text-center text-sm font-medium border-none bg-transparent rounded-none",children:a},`hdr-${c}`))]})}),(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{"data-row":"open",children:[(0,b.jsx)("th",{scope:"row",className:"px-1 py-0 text-center text-xs font-normal border-none bg-transparent rounded-none text-foreground/70",title:"Open (no capo)",children:"Open"}),s.map((c,d)=>(0,b.jsx)("td",{className:[n,"bg-emerald-50 border-emerald-200 text-emerald-900 dark:bg-emerald-800/25 dark:border-emerald-700 dark:text-emerald-100",a?"cursor-pointer select-none tapfx":"",i===`open-${d}`?"ring-2 ring-emerald-400/60 dia-cell--active":"dia-cell--idle"].join(" "),onClick:b=>{if(2===b.button)return;if(p.current){p.current=!1;return}let e=`open-${d}`;j?.(e),a?.({id:e,row:"open",degree:d,pcs:c.pcs,capo:0})},onContextMenu:b=>{if(b.preventDefault(),b.stopPropagation(),window.confirm(`Add "${c.sym}" to progression?`)){let b=`open-${d}`;j?.(b),a?.({id:b,row:"open",degree:d,pcs:c.pcs,capo:0,isRightClick:!0})}},onTouchStart:()=>q(d,c.sym,c.pcs),onTouchEnd:r,onTouchCancel:r,role:a?"button":void 0,"aria-label":a?`Open ${c.sym}`:void 0,"aria-pressed":i===`open-${d}`,children:c.sym},`open-${d}`))]}),t.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"row",className:"px-1 py-0 text-center text-xs font-normal border-none bg-transparent rounded-none text-foreground/70",title:a.tooltip,children:a.label}),a.cells.map((c,d)=>(0,b.jsx)("td",{className:[n,"border-neutral-300 dark:border-neutral-700 opacity-65 cursor-default pointer-events-none",i===`capo${a.capo}-${d}`?"dia-cell--active":"dia-cell--idle"].join(" "),role:"button",tabIndex:-1,"aria-disabled":"true","aria-label":`${a.label} ${c}`,children:c},`capo-${a.capo}-${d}`))]},`capo-${a.capo}`))]})]})})}},21482,a=>{"use strict";a.s(["useRovingTabs",()=>c]);var b=a.i(72131);function c(a,d={}){let{itemSelector:e='[role="tab"],[data-roving="item"]',orientation:f="horizontal",includeHomeEnd:g=!0}=d;(0,b.useEffect)(()=>{let b=a.current;if(!b)return;let c=()=>Array.from(b.querySelectorAll(e)).filter(a=>!a.hasAttribute("disabled")),d=(a,b)=>{a.forEach((a,c)=>a.tabIndex=c===b?0:-1)};(()=>{let a=c();if(!a.length)return;let b=a.findIndex(a=>"true"===a.getAttribute("aria-selected")||0===a.tabIndex||a===document.activeElement);b<0&&(b=0),d(a,b)})();let h=a=>{let b=c();if(!b.length)return;let e=b.indexOf(document.activeElement);if(e<0)return;let{key:h}=a,i="horizontal"===f||"both"===f,j="vertical"===f||"both"===f,k=-1;if(i&&"ArrowRight"===h&&(k=(e+1)%b.length),i&&"ArrowLeft"===h&&(k=(e-1+b.length)%b.length),j&&"ArrowDown"===h&&(k=(e+1)%b.length),j&&"ArrowUp"===h&&(k=(e-1+b.length)%b.length),k>=0){a.preventDefault(),d(b,k),b[k].focus({preventScroll:!0});return}if(g&&"Home"===h){a.preventDefault(),d(b,0),b[0].focus({preventScroll:!0});return}if(g&&"End"===h){a.preventDefault();let c=b.length-1;d(b,c),b[c].focus({preventScroll:!0})}};return b.addEventListener("keydown",h),()=>{b.removeEventListener("keydown",h)}},[a,e,f,g])}},61478,a=>{"use strict";a.s(["chordToMidi",()=>c]);var b=a.i(1731);function c(a,d=b.DEFAULT_MIDI_OCTAVE){let e=function(a){let c=a.match(/^([A-G](?:#|b)?)(.*)$/);if(!c)return null;let d=c[1],e=(c[2]||"").toLowerCase(),f=(0,b.nameToPc)(d);if(f<0)return null;let g=function(a,b){let c;if(/(^|[^a-z])m(?!aj)/.test(a))c=[0,3,7];else{if(/dim|°/.test(a))return[0,3,6];if(/aug|\+/.test(a))return[0,4,8];c=[0,4,7]}return/maj7|M7/.test(b)?[...c,11]:/7/.test(a)?[...c,10]:/6/.test(a)?[...c.slice(0,3),9]:/sus4/.test(a)?[0,5,7]:/sus2/.test(a)?[0,2,7]:/9/.test(a)?[...c,10,14]:c}(e,a);return{rootPc:f,quality:e,intervals:g}}(a);if(!e)return null;let f=d+e.rootPc;return e.intervals.map(a=>f+a)}}];

//# sourceMappingURL=_01e63119._.js.map
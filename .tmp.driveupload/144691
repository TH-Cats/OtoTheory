{"version":3,"sources":["turbopack:///[project]/src/components/ui/Heading.tsx","turbopack:///[project]/src/components/ChordBuilder.tsx","turbopack:///[project]/src/app/chord-progression/page.tsx","turbopack:///[project]/src/store/sketchStore.ts","turbopack:///[project]/src/components/Toast.client.tsx","turbopack:///[project]/src/lib/pro/guard.ts","turbopack:///[project]/src/lib/chords.ts","../src/apply-style.ts","../src/clone-node.ts","../src/dataurl.ts","../src/util.ts","../src/mimes.ts","../src/embed-resources.ts","../src/embed-images.ts","../src/embed-webfonts.ts","../src/index.ts","turbopack:///[project]/src/lib/compat.ts","turbopack:///[project]/src/lib/theory/roman/match.ts","turbopack:///[project]/src/lib/ui/cadence.ts","turbopack:///[project]/src/lib/chords/normalize.ts","turbopack:///[project]/src/lib/chords/format.ts","../src/clone-pseudos.ts","turbopack:///[project]/src/features/sketch/storage.ts","turbopack:///[project]/src/features/sketch/useSketch.ts","turbopack:///[project]/src/lib/export/png.ts","turbopack:///[project]/src/lib/theory/roman.ts","turbopack:///[project]/src/lib/theory/roman/patterns.ts","turbopack:///[project]/src/lib/quality-master.ts","turbopack:///[project]/src/lib/chords/types.ts"],"sourcesContent":["'use client';\n\nexport function H2({\n  children,\n  className = '',\n  right,\n  as: Tag = 'h2',\n}: {\n  children: React.ReactNode;\n  className?: string;\n  right?: React.ReactNode;\n  as?: keyof JSX.IntrinsicElements;\n}) {\n  return (\n    <div className={`mb-2 flex items-center gap-2 ${className}`}>\n      <Tag className=\"text-xl md:text-2xl font-semibold tracking-tight text-foreground\">\n        {children}\n      </Tag>\n      {right ? <div className=\"ml-auto\">{right}</div> : null}\n    </div>\n  );\n}\n\nexport function H3({\n  children,\n  className = '',\n  right,\n  as: Tag = 'h3',\n}: {\n  children: React.ReactNode;\n  className?: string;\n  right?: React.ReactNode;\n  as?: keyof JSX.IntrinsicElements;\n}) {\n  return (\n    <div className={`mb-1.5 flex items-center gap-2 ${className}`}>\n      <Tag className=\"text-sm md:text-base font-semibold tracking-wide text-foreground\">\n        {children}\n      </Tag>\n      {right ? (\n        <div className=\"ml-auto text-xs md:text-sm text-muted-foreground\">{right}</div>\n      ) : null}\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\"use client\";\nimport { useMemo, useState, useRef, useEffect } from \"react\";\nimport { DEFAULT_CONTEXT, type ChordContext, type ChordSpec, type Family, type Plan } from \"@/lib/chords/types\";\nimport { normalizeChordSpec } from \"@/lib/chords/normalize\";\nimport { formatChordSymbol } from \"@/lib/chords/format\";\nimport { canAddQuality, shouldShowProBadge } from \"@/lib/pro/guard\";\nimport { QUALITY_MASTER, getQualityComment, getQualitiesByCategory, isProQuality } from \"@/lib/quality-master\";\n\ntype Props = {\n  plan?: Plan;\n  onConfirm?: (symbol: string, spec: ChordSpec) => void;\n  onBlock?: (reason: 'pro_quality' | 'pro_slash', quality?: string) => void;\n  onPreview?: (symbol: string) => void;\n};\n\nconst ROOTS = ['C','C#','D','Eb','E','F','F#','G','Ab','A','Bb','B'];\n\n// Pro Badge component (small üëë at top-right of chip)\nconst ProBadge = () => (\n  <span className=\"absolute -top-1 -right-1 text-[10px]\" title=\"ProÂ∞ÇÁî®\">üëë</span>\n);\n\nexport default function ChordBuilder({ plan = 'free', onConfirm, onBlock, onPreview }: Props){\n  const baseSpec: ChordSpec = useMemo(() => ({\n    root: 'C',\n    family: 'maj',\n    seventh: 'none',\n    extMode: 'add',\n    ext: {},\n    alt: {},\n    sus: null,\n    slash: null,\n  }), []);\n  const [spec, setSpec] = useState<ChordSpec>(baseSpec);\n  const ctx: ChordContext = { ...DEFAULT_CONTEXT, plan };\n  \n  // Session state for 11th warning (show once per session)\n  const [has11thWarningShown, setHas11thWarningShown] = useState(false);\n\n  const { spec: norm, warnings } = useMemo(() => normalizeChordSpec(spec, ctx), [spec, ctx]);\n  const symbol = useMemo(() => formatChordSymbol(norm, ctx), [norm, ctx]);\n\n  const setRoot = (r: string) => setSpec(s => ({ ...s, root: r }));\n  \n  // Show 11th warning once per session\n  useEffect(() => {\n    if (!has11thWarningShown && norm.ext.eleven && (norm.family === 'maj' || norm.family === 'dom')) {\n      setHas11thWarningShown(true);\n    }\n  }, [norm.ext.eleven, norm.family, has11thWarningShown]);\n\n  // Helper function to convert Japanese category names to English\n  const getEnglishCategoryName = (japaneseCategory: string): string => {\n    switch (japaneseCategory) {\n      case 'Âü∫Êú¨': return 'Basics';\n      case 'Âü∫Êú¨„ÅÆÈ£æ„Çä‰ªò„Åë': return 'Essential Colors';\n      case '‚ú® „Ç≠„É©„Ç≠„É©„ÉªÊµÆÈÅäÊÑü': return '‚ú® Sparkle & Float';\n      case 'üåÉ „Åä„Åó„ÇÉ„Çå„ÉªÈÉΩ‰ºöÁöÑ': return 'üåÉ Stylish & Urban';\n      case '‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ': return '‚ö°Ô∏è Tension & Spice';\n      default: return japaneseCategory;\n    }\n  };\n\n  // Quality presets based on Quality Master.csv\n  const qualityPresets = useMemo(() => {\n    console.log('üîç ChordBuilder: Creating quality presets...');\n    const freeQualities = getQualitiesByCategory('Free');\n    const proQualities = getQualitiesByCategory('Pro');\n    \n    // Debug: Log the qualities\n    console.log('üîç Free qualities:', freeQualities);\n    console.log('üîç Pro qualities:', proQualities);\n    console.log('üîç Total qualities in QUALITY_MASTER:', QUALITY_MASTER.length);\n    \n    const presets: Array<{ \n      label: string; \n      apply: () => void; \n      pro?: boolean; \n      locked?: boolean;\n      comment?: string;\n      category?: string;\n    }> = [];\n\n    // Free qualities only - show Japanese category names for Japanese version\n    Object.entries(freeQualities).forEach(([category, qualities]) => {\n      qualities.forEach(quality => {\n        const qualityLabel = quality.quality === 'm (minor)' ? 'm' : \n                           quality.quality === 'Major' ? 'M' : \n                           quality.quality === 'maj7' ? 'M7' : quality.quality;\n        \n        presets.push({\n          label: qualityLabel,\n          apply: () => {\n            const spec = getSpecFromQuality(quality.quality);\n            if (spec) setSpec(spec);\n          },\n          pro: false, // Free quality\n          comment: quality.commentJa,\n          category: category // Use Japanese category names\n        });\n      });\n    });\n\n    // Pro qualities - show Japanese category names, only if user has Pro\n    if (plan === 'pro') {\n      Object.entries(proQualities).forEach(([category, qualities]) => {\n        qualities.forEach(quality => {\n          const qualityLabel = quality.quality === 'M9 (maj9)' ? 'M9' : \n                             quality.quality === 'm7b5' ? 'm7b5' :\n                             quality.quality === 'mM7' ? 'mM7' :\n                             quality.quality === 'm6' ? 'm6' :\n                             quality.quality === '7(#9)' ? '7(#9)' :\n                             quality.quality === '7(b9)' ? '7(b9)' :\n                             quality.quality === '7(#5)' ? '7(#5)' :\n                             quality.quality === '7(b13)' ? '7(b13)' :\n                             quality.quality;\n          \n          presets.push({\n            label: qualityLabel,\n            apply: () => {\n              const spec = getSpecFromQuality(quality.quality);\n              if (spec) setSpec(spec);\n            },\n            pro: true,\n            comment: quality.commentJa,\n            category: category // Use Japanese category names\n          });\n        });\n      });\n    }\n\n    return presets;\n  }, [plan]);\n\n  // Helper function to convert quality string to ChordSpec\n  const getSpecFromQuality = (quality: string): ChordSpec | null => {\n    const baseSpec = { ext: {}, alt: {}, sus: null, slash: null };\n    \n    switch (quality) {\n      case 'Major': return { ...baseSpec, root: 'C', family: 'maj', seventh: 'none', extMode: 'add' };\n      case 'm (minor)': return { ...baseSpec, root: 'C', family: 'min', seventh: 'none', extMode: 'add' };\n      case '7': return { ...baseSpec, root: 'C', family: 'dom', seventh: '7', extMode: 'tension' };\n      case 'maj7': return { ...baseSpec, root: 'C', family: 'maj', seventh: 'maj7', extMode: 'add' };\n      case 'm7': return { ...baseSpec, root: 'C', family: 'min', seventh: 'm7', extMode: 'add' };\n      case 'sus4': return { ...baseSpec, root: 'C', family: 'sus', sus: 'sus4', seventh: 'none', extMode: 'add' };\n      case 'sus2': return { ...baseSpec, root: 'C', family: 'sus', sus: 'sus2', seventh: 'none', extMode: 'add' };\n      case 'add9': return { ...baseSpec, root: 'C', family: 'maj', seventh: 'none', extMode: 'add', ext: { add9: true } };\n      case 'dim': return { ...baseSpec, root: 'C', family: 'dim', seventh: 'none', extMode: 'add' };\n      case 'M9 (maj9)': return { ...baseSpec, root: 'C', family: 'maj', seventh: 'maj7', extMode: 'add', ext: { add9: true } };\n      case '6': return { ...baseSpec, root: 'C', family: 'maj', seventh: '6', extMode: 'add' };\n      case '6/9': return { ...baseSpec, root: 'C', family: 'maj', seventh: '6', extMode: 'add', ext: { add9: true } };\n      case 'add#11': return { ...baseSpec, root: 'C', family: 'maj', seventh: 'none', extMode: 'add', ext: { add11: true }, alt: { s11: true } };\n      case 'm9': return { ...baseSpec, root: 'C', family: 'min', seventh: 'm7', extMode: 'add', ext: { add9: true } };\n      case 'm11': return { ...baseSpec, root: 'C', family: 'min', seventh: 'm7', extMode: 'add', ext: { add9: true, add11: true } };\n      case 'm7b5': return { ...baseSpec, root: 'C', family: 'min', seventh: 'm7b5', extMode: 'add' };\n      case 'mM7': return { ...baseSpec, root: 'C', family: 'min', seventh: 'maj7', extMode: 'add' };\n      case 'm6': return { ...baseSpec, root: 'C', family: 'min', seventh: '6', extMode: 'add' };\n      case '7sus4': return { ...baseSpec, root: 'C', family: 'dom', seventh: '7', sus: 'sus4', extMode: 'tension' };\n      case 'aug': return { ...baseSpec, root: 'C', family: 'aug', seventh: 'none', extMode: 'add' };\n      case 'dim7': return { ...baseSpec, root: 'C', family: 'dim', seventh: 'dim7', extMode: 'add' };\n      case '7(#9)': return { ...baseSpec, root: 'C', family: 'dom', seventh: '7', extMode: 'tension', alt: { sharp9: true } };\n      case '7(b9)': return { ...baseSpec, root: 'C', family: 'dom', seventh: '7', extMode: 'tension', alt: { flat9: true } };\n      case '7(#5)': return { ...baseSpec, root: 'C', family: 'dom', seventh: '7', extMode: 'tension', alt: { sharp5: true } };\n      case '7(b13)': return { ...baseSpec, root: 'C', family: 'dom', seventh: '7', extMode: 'tension', alt: { flat13: true } };\n      default: return null;\n    }\n  };\n\n  const renderChip = (\n    label: string, \n    active: boolean, \n    onClick: () => void, \n    opts?: { disabled?: boolean; locked?: boolean; showProBadge?: boolean; comment?: string }\n  ) => (\n    <div key={label} className=\"relative inline-block\">\n      <button\n        className={`h-9 px-3 rounded border text-xs ${active ? 'bg-[var(--brand-primary)] text-white' : ''} ${opts?.locked ? 'opacity-50' : ''}`}\n        onClick={() => { \n          if (!opts?.disabled && !opts?.locked) {\n            onClick(); \n          } else if (opts?.locked) {\n            // Pro quality clicked in free plan\n            onBlock?.('pro_quality', label);\n          }\n        }}\n        title={opts?.locked ? 'Pro„ÅßËß£Êîæ' : opts?.comment}\n        aria-disabled={opts?.disabled || opts?.locked}\n        onContextMenu={(e) => {\n          e.preventDefault();\n          if (opts?.comment) {\n            // Show comment tooltip on right-click/long-press\n            // For now, we'll use the title attribute, but this could be enhanced with a custom tooltip\n          }\n        }}\n      >{label}</button>\n      {opts?.showProBadge && plan === 'free' && <ProBadge />}\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <div className=\"text-xs opacity-70 mb-0.5\">„É´„Éº„Éà</div>\n        <div className=\"flex gap-1 overflow-x-auto whitespace-nowrap py-0 -mx-2 px-2\">\n          {ROOTS.map(r => renderChip(r, norm.root === r, () => setRoot(r)))}\n        </div>\n      </div>\n\n      <div>\n        <div className=\"text-xs opacity-70 mb-0.5\">„ÇØ„Ç§„ÉÉ„ÇØ ({plan === 'free' ? qualityPresets.filter(p => !p.pro).length : qualityPresets.length}Á®ÆÈ°û)</div>\n        <div className=\"flex gap-1 overflow-x-auto whitespace-nowrap py-0 -mx-2 px-2\">\n          {qualityPresets\n            .filter(p => plan === 'free' ? !p.pro : true)\n            .map(p => (\n            <div key={p.label} className=\"relative\">\n              {renderChip(p.label, false, p.apply, { \n                locked: !!p.locked, \n                showProBadge: !!p.pro,\n                comment: p.comment \n              })}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Advanced (Pro) section - only show Pro qualities */}\n      {plan === 'free' ? (\n        <details>\n          <summary className=\"cursor-pointer text-sm\">È´òÂ∫¶„Å™Ê©üËÉΩ (Pro) üëë</summary>\n          <div className=\"mt-3 space-y-3\">\n            <div className=\"text-sm opacity-70 p-4 bg-gray-50 rounded-lg\">\n              ProÁâà„Åß„ÅØ„ÄÅ„Çà„ÇäÈ´òÂ∫¶„Å™„Ç≥„Éº„ÉâÂìÅË≥™„Çí„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ\n            </div>\n          </div>\n        </details>\n      ) : (\n        <details>\n          <summary className=\"cursor-pointer text-sm\">È´òÂ∫¶„Å™Ê©üËÉΩ (Pro)</summary>\n          <div className=\"mt-3 space-y-3\">\n            {/* Pro qualities grouped by category */}\n            {Object.entries(getQualitiesByCategory('Pro')).map(([category, qualities]) => (\n              <div key={category}>\n                <div className=\"text-xs opacity-70 mb-0.5\">{category}</div>\n                <div className=\"flex gap-1 overflow-x-auto whitespace-nowrap py-0 -mx-2 px-2\">\n                  {qualities.map(quality => {\n                    const qualityLabel = quality.quality === 'M9 (maj9)' ? 'M9' : \n                                       quality.quality === 'm7b5' ? 'm7b5' :\n                                       quality.quality === 'mM7' ? 'mM7' :\n                                       quality.quality === 'm6' ? 'm6' :\n                                       quality.quality === '7(#9)' ? '7(#9)' :\n                                       quality.quality === '7(b9)' ? '7(b9)' :\n                                       quality.quality === '7(#5)' ? '7(#5)' :\n                                       quality.quality === '7(b13)' ? '7(b13)' :\n                                       quality.quality;\n                    \n                    return (\n                      <div key={quality.quality} className=\"relative\">\n                        {renderChip(qualityLabel, false, () => {\n                          const spec = getSpecFromQuality(quality.quality);\n                          if (spec) setSpec(spec);\n                        }, { \n                          comment: quality.commentJa \n                        })}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            ))}\n          </div>\n        </details>\n      )}\n\n      {warnings.length > 0 && (\n        <div className=\"text-xs text-yellow-600 dark:text-yellow-400\">\n          {warnings[0]}\n        </div>\n      )}\n\n      <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">„Éó„É¨„Éì„É•„Éº</div>\n          <div className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">\n            {symbol || '„Ç≥„Éº„Éâ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ'}\n          </div>\n        </div>\n        <div className=\"flex gap-2 justify-center\">\n          <button \n            className=\"flex items-center gap-1 rounded-lg bg-green-500 hover:bg-green-600 text-white px-4 py-2 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            onClick={() => onPreview?.(symbol)}\n            disabled={!symbol}\n          >\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path d=\"M8 5v10l8-5-8-5z\"/>\n            </svg>\n            ÂÜçÁîü\n          </button>\n          <button \n            className=\"rounded-lg border border-gray-300 dark:border-gray-600 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\" \n            onClick={() => setSpec(baseSpec)}\n          >\n            „ÇØ„É™„Ç¢\n          </button>\n          <button\n            className=\"rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-2 text-sm font-medium transition-all transform hover:scale-105\"\n            onClick={() => {\n              // Check if chord can be added\n              const isPro = plan === 'pro';\n              const hasSlash = !!norm.slash;\n              \n              // Simple quality extraction for guard check\n              // (This is a simplified check - actual quality depends on full spec)\n              let qualityToCheck = '';\n              if (norm.ext.thirteen) qualityToCheck = '13';\n              else if (norm.alt.b9) qualityToCheck = '7b9';\n              else if (norm.alt.s9) qualityToCheck = '7#9';\n              else if (norm.alt.s11) qualityToCheck = '7#11';\n              else if (norm.alt.b13) qualityToCheck = '7b13';\n              else if (norm.alt.alt) qualityToCheck = '7alt';\n              \n              const canAdd = canAddQuality(qualityToCheck, { isPro, hasSlash });\n              \n              if (!canAdd) {\n                // Block and notify parent\n                if (hasSlash) {\n                  onBlock?.('pro_slash');\n                } else {\n                  onBlock?.('pro_quality', qualityToCheck);\n                }\n              } else {\n                // Allow add\n                onConfirm?.(symbol, norm);\n              }\n            }}\n          >\n            ËøΩÂä†\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n\n","\"use client\";\nimport React from \"react\";\nimport AdSlot from \"@/components/AdSlot.client\";\nimport { useCallback, useEffect, useMemo, useRef, useState, useTransition } from \"react\";\nimport { useRovingTabs } from \"@/hooks/useRovingTabs\";\nimport Fretboard from \"@/components/Fretboard\";\nimport CapoFold from \"@/components/CapoFold\";\nimport { rankKeys, rankScales, type ScaleRank, PITCHES, detectCadence, noteToPc, romanToChordSymbol, type Mode } from \"@/lib/theory\";\nimport { getScalePitchesById, getScalePitches, scaleTypeLabel, normalizeScaleId, SCALE_INTERVALS, parentModeOf } from \"@/lib/scales\";\nimport { diatonicTriads, triadToChordSym } from \"@/lib/theory/diatonic\";\nimport { SCALE_CATALOG } from \"@/lib/scaleCatalog\";\nimport { toRoman, type Mode as RomanMode } from \"@/lib/theory/roman\";\nimport { useAnalysisStore } from \"@/store/analysisStore\";\nimport { formatCadenceLabel, cadenceTooltip, formatCadenceShort } from \"@/lib/ui/cadence\";\nimport type { CadenceType } from \"@/lib/ui/cadence\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport InfoDot from \"@/components/ui/InfoDot\";\nimport { H2, H3 } from \"@/components/ui/Heading\";\n \nimport { inferScaleIdFromLabel, scaleNotes, SCALE_DEFS, type ScaleId } from \"@/lib/theory/scales\";\nimport ScaleChip from \"@/components/ScaleChip\";\nimport { analyzeChordProgression } from \"@/lib/music-theory\";\nimport {\n  QUICK_QUALITIES,\n  ADVANCED_QUALITIES,\n  ADV_EXTENSIONS, ADV_ALTERED_DOM, ADV_DIM_VARIANTS, ADV_SUS_ADDS, ADV_AUG_MAJMIN,\n  isAdvanced, BASS_NOTES\n} from \"@/lib/chords\";\nimport { usePro } from \"@/components/ProProvider\";\nimport { ProGate } from \"@/components/ProGate\";\nimport UpgradeModal from \"@/components/UpgradeModal\";\nimport { getBaseKind, isCompatible } from \"@/lib/compat\";\nimport { copy } from \"@/lib/copy\";\nimport DiatonicCapoTable from \"@/components/DiatonicCapoTable\";\nimport { matchPatterns } from \"@/lib/theory/roman/match\";\nimport { patternInfoEN } from \"@/lib/theory/roman/patterns\";\nimport { ChordFormsPopover } from \"@/components/ChordFormsPopover\";\nimport { player } from \"@/lib/audio/player\";\nimport { buildForm, type FormKind, type FormShape, type Quality } from \"@/lib/chordForms\";\nimport { useSketch } from \"@/features/sketch/useSketch\";\nimport { useSketchStore } from \"@/store/sketchStore\";\nimport { track, trackToast } from \"@/lib/telemetry\";\nimport { exportPng } from \"@/lib/export/png\";\nimport { chordToMidi } from \"@/lib/music/chordParser\";\nimport Toast from \"@/components/Toast.client\";\nimport { useCtaMessages } from \"@/hooks/useCtaMessages\";\nimport { usePathname } from \"next/navigation\";\nimport ChordBuilder from \"@/components/ChordBuilder\";\n\nexport default function FindKeyPage() {\n  const CTA_MESSAGES = useCtaMessages();\n  const pathname = usePathname();\n  const isJapanese = pathname.startsWith('/ja');\n  const rootRowRef = useRef<HTMLDivElement | null>(null);\n  useRovingTabs(rootRowRef, { orientation: \"horizontal\" });\n  const fbToggleRef = useRef<HTMLDivElement | null>(null);\n  useRovingTabs(fbToggleRef, { orientation: \"horizontal\" });\n  const presetRef = useRef<HTMLDivElement | null>(null);\n  useRovingTabs(presetRef, { orientation: \"horizontal\" });\n  const exportRef = useRef<HTMLDivElement | null>(null);\n  const exportCardRef = useRef<HTMLDivElement | null>(null);\n  // „Çπ„É≠„ÉÉ„ÉàÂõ∫ÂÆö„ÅÆÈÄ≤Ë°åÔºàÁ©∫„ÅØÁ©∫ÊñáÂ≠óÔºâ„ÄÇÂàùÊúüÂÄ§„ÅØ C‚ÄìAm‚ÄìF‚ÄìG „Çí 1„Äú4 „Å´ÈÖçÁΩÆ\n  const [slots, setSlots] = useState<string[]>(() => {\n    const a = new Array(12).fill(\"\");\n    a[0] = \"C\"; a[1] = \"Am\"; a[2] = \"F\"; a[3] = \"G\";\n    return a;\n  });\n  // Ë°®Á§∫Áî®„ÅÆË©∞„ÇÅ„ÅüÈÖçÂàó„Å®„ÄÅÂÖÉ„Çπ„É≠„ÉÉ„Éà„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ\n  const filledIndices = useMemo(() => slots.reduce((acc:number[], v, i)=>{ if (v) acc.push(i); return acc; }, [] as number[]), [slots]);\n  const progression = useMemo(() => filledIndices.map(i => slots[i]), [filledIndices, slots]);\n  // ËøΩÂä†ÂÖ•Âäõ„ÅÆ„Ç´„Éº„ÇΩ„É´‰ΩçÁΩÆÔºàÊ¨°„ÅÆÁ©∫„Çπ„É≠„ÉÉ„ÉàÔºâ\n  const firstEmpty = useMemo(() => { const idx = slots.findIndex(s => !s); return idx === -1 ? 11 : idx; }, [slots]);\n  const [cursorIndex, setCursorIndex] = useState<number>(0);\n  useEffect(() => { setCursorIndex(firstEmpty); }, [firstEmpty]);\n  const ROOTS = useMemo(() => [\n    'C','C#','D','Eb','E','F','F#','G','Ab','A','Bb','B'\n  ], []);\n  const QUALITIES = useMemo(() => [\n    { label: 'M', value: '' },\n    { label: 'M7', value: 'maj7' },\n    { label: '7', value: '7' },\n    { label: '6', value: '6' },\n    { label: 'add9', value: 'add9' },\n    { label: 'sus4', value: 'sus4' },\n    { label: 'sus2', value: 'sus2' },\n    { label: 'm', value: 'm' },\n    { label: 'm7', value: 'm7' },\n    { label: 'dim', value: 'dim' },\n    { label: 'm7b5', value: 'm7b5' },\n    { label: 'aug', value: 'aug' },\n  ], []);\n  const [rootSel, setRootSel] = useState<string>('C');\n  const [qualitySel, setQualitySel] = useState<string>('M');\n  const [modifiers, setModifiers] = useState<string[]>([]);\n  const TENSIONS = useMemo(() => [\n    { label: 'sus2', value: 'sus2' },\n    { label: 'sus4', value: 'sus4' },\n    { label: 'add9', value: 'add9' },\n    { label: 'add11', value: 'add11' },\n    { label: 'add13', value: 'add13' },\n  ], []);\n  const [tensionsSel, setTensionsSel] = useState<string[]>([]);\n  const [bassSel, setBassSel] = useState<string>('');\n\n  const composeChord = (root: string, quality: string, tensions: string[], bass: string) => {\n    if (!root) return '';\n    const qualityPart = quality || '';\n    const tensionPart = tensions.length ? tensions.join('') : '';\n    const chord = `${root}${qualityPart}${tensionPart}`;\n    return bass ? `${chord}/${bass}` : chord;\n  };\n\n  const toggleTension = (val: string) => {\n    setTensionsSel((prev) => prev.includes(val) ? prev.filter(v => v !== val) : [...prev, val]);\n  };\n  const [result, setResult] = useState<ReturnType<typeof analyzeChordProgression> | null>(null);\n  const [keys, setKeys] = useState<ReturnType<typeof rankKeys>>([]);\n  const [scales, setScales] = useState<ScaleRank[]>([]);\n  const [selectedScaleRank, setSelectedScaleRank] = useState<ScaleRank | null>(null);\n  const [romanLine, setRomanLine] = useState<string[]>([]);\n  const { keyCandidates, selectedKey: selFromStore, analyze: runAnalyze, selectKey, scaleCandidates, selectedScale, selectScale, reset: resetAnalysis } = useAnalysisStore();\n  const [fbDisplay, setFbDisplay] = useState<'degrees'|'names'>('degrees');\n  const [selectedCellId, setSelectedCellId] = useState<string | null>(null);\n  const [overlayChordNotes, setOverlayChordNotes] = useState<string[]|null>(null);\n  const [formsPop, setFormsPop] = useState<null | { at:{x:number;y:number}; rootPc:number; quality:Quality }>(null);\n  const [formShape, setFormShape] = useState<FormShape | null>(null);\n  const resetForms = useCallback(() => { setFormsPop(null); setFormShape(null); }, []);\n  const isHeptatonic = useMemo(() => {\n    const t = selectedScale?.type as any;\n    const ivs = t ? (SCALE_INTERVALS as any)[t] : null;\n    return !ivs || ivs.length === 7;\n  }, [selectedScale?.type]);\n  useEffect(() => {\n    if (!isHeptatonic && fbDisplay !== 'degrees') setFbDisplay('degrees');\n  }, [isHeptatonic]);\n  const [selectedKey, setSelectedKey] = useState<{ tonic: string; mode: RomanMode } | null>(null);\n  const gridRef = useRef<HTMLDivElement | null>(null);\n  const leftWrapRef = useRef<HTMLDivElement | null>(null);\n  const resultRef = useRef<HTMLElement | null>(null);\n  const rightRef = useRef<HTMLElement | null>(null);\n  const [dragIndex, setDragIndex] = useState<number | null>(null);\n  \n  // Mobile touch drag support\n  const touchStartRef = useRef<{ index: number; startX: number; startY: number } | null>(null);\n  const dragPreviewRef = useRef<HTMLDivElement | null>(null);\n  \n  // Playback state\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [bpm, setBpm] = useState(120);\n  const playbackTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const [currentChordIndex, setCurrentChordIndex] = useState<number>(-1);\n  \n  const moveSlot = useCallback((from: number, to: number) => {\n    setSlots(prev => {\n      if (from === to) return prev;\n      const arr = prev.slice();\n      const tmp = arr[from];\n      arr[from] = arr[to];\n      arr[to] = tmp;\n      return arr;\n    });\n  }, []);\n\n  // Mobile drag handlers\n  const [touchDragTarget, setTouchDragTarget] = useState<number | null>(null);\n  \n  const handleTouchStartDrag = useCallback((e: React.TouchEvent, i: number) => {\n    if (!slots[i]) return; // Only drag filled slots\n    e.stopPropagation();\n    const touch = e.touches[0];\n    touchStartRef.current = { index: i, startX: touch.clientX, startY: touch.clientY };\n    setDragIndex(i);\n    setTouchDragTarget(null);\n  }, [slots]);\n\n  const handleTouchMoveDrag = useCallback((e: React.TouchEvent, currentIndex: number) => {\n    if (touchStartRef.current === null || dragIndex === null) return;\n    \n    const touch = e.touches[0];\n    const element = document.elementFromPoint(touch.clientX, touch.clientY);\n    \n    // Find the slot element\n    let slotElement = element;\n    while (slotElement && !slotElement.hasAttribute('data-slot-index')) {\n      slotElement = slotElement.parentElement;\n    }\n    \n    if (slotElement) {\n      const targetIndex = parseInt(slotElement.getAttribute('data-slot-index') || '-1');\n      if (targetIndex >= 0 && targetIndex !== dragIndex) {\n        setTouchDragTarget(targetIndex);\n      }\n    }\n  }, [dragIndex]);\n\n  const handleTouchEndDrag = useCallback((e: React.TouchEvent) => {\n    if (touchStartRef.current !== null && dragIndex !== null && touchDragTarget !== null && dragIndex !== touchDragTarget) {\n      moveSlot(dragIndex, touchDragTarget);\n    }\n    touchStartRef.current = null;\n    setDragIndex(null);\n    setTouchDragTarget(null);\n  }, [dragIndex, touchDragTarget, moveSlot]);\n  \n  // Playback state flag to ensure stopPlayback is effective\n  const isPlayingRef = useRef(false);\n  \n  // Playback functions\n  const stopPlayback = useCallback(() => {\n    isPlayingRef.current = false;\n    if (playbackTimerRef.current) {\n      clearInterval(playbackTimerRef.current);\n      playbackTimerRef.current = null;\n    }\n    setIsPlaying(false);\n    setCurrentChordIndex(-1);\n  }, []);\n  \n  const startPlayback = useCallback(async () => {\n    const filledSlots = slots.map((s, i) => ({ chord: s, index: i })).filter(x => x.chord);\n    if (filledSlots.length === 0) return;\n    \n    // ÂâçÂõû„ÅÆÂÜçÁîü„ÅåÊÆã„Å£„Å¶„ÅÑ„Åü„ÇâÁ¢∫ÂÆü„Å´ÂÅúÊ≠¢\n    stopPlayback();\n    \n    await player.resume();\n    isPlayingRef.current = true;\n    setIsPlaying(true);\n    setCurrentChordIndex(0);\n    \n    // Count-in: simple metronome click\n    const countInBeats = 4;\n    const beatDuration = (60 / bpm) * 1000;\n    \n    for (let i = 0; i < countInBeats; i++) {\n      if (!isPlayingRef.current) return; // ÂÅúÊ≠¢„Åï„Çå„Åü„Çâ„Ç´„Ç¶„É≥„Éà„Ç§„É≥‰∏≠„Åß„ÇÇ‰∏≠Êñ≠\n      await new Promise(resolve => setTimeout(resolve, beatDuration));\n      if (!isPlayingRef.current) return;\n      // Play a simple click sound (high MIDI note, short duration)\n      player.playNote(84, 100); // C6, 100ms\n    }\n    \n    // Start progression playback (4 beats per chord)\n    let chordIdx = 0;\n    let beatCount = 0;\n    const playBeat = async () => {\n      if (!isPlayingRef.current) {\n        // ÂÅúÊ≠¢„Éï„É©„Ç∞„ÅåÁ´ã„Å£„Å¶„ÅÑ„Åü„Çâ„Çø„Ç§„Éû„Éº„Çí„ÇØ„É™„Ç¢\n        if (playbackTimerRef.current) {\n          clearInterval(playbackTimerRef.current);\n          playbackTimerRef.current = null;\n        }\n        return;\n      }\n      if (beatCount % 4 === 0) {\n        // New chord every 4 beats\n        if (chordIdx >= filledSlots.length) {\n          chordIdx = 0; // Loop\n        }\n        const { chord, index } = filledSlots[chordIdx];\n        setCurrentChordIndex(index);\n        await playChordSymbol(chord);\n        chordIdx++;\n      } else {\n        // Re-trigger the same chord\n        if (chordIdx > 0 && chordIdx <= filledSlots.length) {\n          const { chord } = filledSlots[chordIdx - 1];\n          await playChordSymbol(chord);\n        }\n      }\n      beatCount++;\n    };\n    \n    if (!isPlayingRef.current) return;\n    await playBeat(); // Play first beat immediately\n    if (!isPlayingRef.current) return;\n    playbackTimerRef.current = setInterval(playBeat, beatDuration);\n    \n    track('progression_play', { page: 'chord_progression', bpm, chordCount: filledSlots.length });\n  }, [slots, bpm, stopPlayback]);\n  \n  const togglePlayback = useCallback(() => {\n    if (isPlaying) {\n      stopPlayback();\n    } else {\n      startPlayback();\n    }\n  }, [isPlaying, startPlayback, stopPlayback]);\n  \n  // Stop playback when component unmounts or slots change\n  useEffect(() => {\n    return () => {\n      if (playbackTimerRef.current) {\n        clearInterval(playbackTimerRef.current);\n      }\n    };\n  }, []);\n  \n  useEffect(() => {\n    if (isPlaying) {\n      stopPlayback();\n    }\n  }, [slots]);\n  \n  const removeSlot = useCallback((idx: number) => {\n    setSlots(prev => { const arr = prev.slice(); arr[idx] = \"\"; return arr; });\n  }, []);\n  const { isPro } = usePro();\n  const { sketch, setSketch } = useSketch(isPro);\n  const sketchIdRef = useRef<string | null>(null);\n  const ensureSketchId = () => { if (!sketchIdRef.current) sketchIdRef.current = Math.random().toString(36).slice(2, 10); return sketchIdRef.current; };\n  const { sketches, loadSketches, deleteSketch, saveSketch } = useSketchStore();\n  const [showSketchList, setShowSketchList] = useState(false);\n  const [selectedSketchForAction, setSelectedSketchForAction] = useState<any>(null);\n  const sketchesDropRef = useRef<HTMLDivElement | null>(null);\n  const [sketchName, setSketchName] = useState<string>(\"\");\n  \n  // Preset popup state\n  const [showPresetPopup, setShowPresetPopup] = useState(false);\n  const [presetKey, setPresetKey] = useState<string>('C');\n  const presetPopupRef = useRef<HTMLDivElement>(null);\n  useEffect(() => { if (showSketchList) loadSketches(); }, [showSketchList, loadSketches]);\n  useEffect(() => {\n    const onDown = (e: MouseEvent) => {\n      if (!showSketchList) return;\n      const el = sketchesDropRef.current;\n      if (el && !el.contains(e.target as Node)) setShowSketchList(false);\n    };\n    const onKey = (e: KeyboardEvent) => { if (e.key === 'Escape') setShowSketchList(false); };\n    document.addEventListener('mousedown', onDown);\n    document.addEventListener('keydown', onKey);\n    return () => { document.removeEventListener('mousedown', onDown); document.removeEventListener('keydown', onKey); };\n  }, [showSketchList]);\n  \n  // Close preset popup on outside click or ESC\n  useEffect(() => {\n    if (!showPresetPopup) return;\n    const onDown = (e: MouseEvent) => {\n      const el = presetPopupRef.current;\n      if (el && !el.contains(e.target as Node)) setShowPresetPopup(false);\n    };\n    const onKey = (e: KeyboardEvent) => { if (e.key === 'Escape') setShowPresetPopup(false); };\n    document.addEventListener('mousedown', onDown);\n    document.addEventListener('keydown', onKey);\n    return () => { document.removeEventListener('mousedown', onDown); document.removeEventListener('keydown', onKey); };\n  }, [showPresetPopup]);\n\n  // SaveÔºàResultÂÜÖ„ÅÆ„Éó„É≠„É≥„Éó„ÉàÔºâ\n  const [showNamePrompt, setShowNamePrompt] = useState(false);\n  const [nameInput, setNameInput] = useState(\"\");\n  const defaultSketchName = useMemo(() => (progression.length ? progression.join(\" \") : `Untitled ${new Date().toLocaleString()}`), [progression]);\n\n  // M3.5: Toast notifications\n  const [toastConfig, setToastConfig] = useState<{\n    message: string;\n    type: 'info' | 'success' | 'warning';\n    ctaText?: string;\n    ctaHref?: string;\n    ctaPlace?: 'limit_toast' | 'png_toast';\n  } | null>(null);\n\n  const toastShownRef = useRef<Set<string>>(new Set());\n\n  // M3.5: Show toast when reaching 9-12 chords\n  useEffect(() => {\n    const filledCount = slots.filter(s => s !== \"\").length;\n    if (filledCount === 9 && !toastShownRef.current.has('limit_warn')) {\n      setToastConfig({\n        message: CTA_MESSAGES.toast.limitWarn,\n        type: 'info',\n        ctaText: CTA_MESSAGES.toast.ctaButton,\n        ctaHref: '/ios-coming-soon',\n        ctaPlace: 'limit_toast'\n      });\n      trackToast('limit_warn', { page: 'chord_progression', chordCount: filledCount });\n      toastShownRef.current.add('limit_warn');\n    } else if (filledCount === 12 && !toastShownRef.current.has('limit_block')) {\n      setToastConfig({\n        message: CTA_MESSAGES.toast.limitBlock,\n        type: 'warning',\n        ctaText: CTA_MESSAGES.toast.ctaButton,\n        ctaHref: '/ios-coming-soon',\n        ctaPlace: 'limit_toast'\n      });\n      trackToast('limit_block', { page: 'chord_progression', chordCount: filledCount });\n      toastShownRef.current.add('limit_block');\n    }\n  }, [slots]);\n  \n  // M3.5: Current sketch name for PNG export\n  const [currentExportName, setCurrentExportName] = useState<string>(\"\");\n\n  const handleExportSketch = async (sk: any) => {\n    try {\n      // Sketch„ÅÆ„Éá„Éº„Çø„Åã„Çâ„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Ç´„Éº„Éâ„Çí‰∏ÄÊôÇÁöÑ„Å´ÁîüÊàê„Åó„Å¶PNGÂá∫Âäõ\n      if (!exportCardRef.current) return;\n      \n      // Set the sketch name for export\n      setCurrentExportName(sk.name || \"Untitled Sketch\");\n      \n      // Wait for state update\n      await new Promise(resolve => setTimeout(resolve, 50));\n      \n      // ‰∏ÄÊôÇÁöÑ„Å´opacity„Çí1„Å´„Åó„Å¶„É¨„É≥„ÉÄ„É™„É≥„Ç∞\n      const exportCard = exportCardRef.current;\n      exportCard.style.opacity = '1';\n      exportCard.style.visibility = 'visible';\n      \n      // „É¨„É≥„ÉÄ„É™„É≥„Ç∞ÂÆå‰∫Ü„ÇíÂæÖ„Å§\n      await new Promise(resolve => setTimeout(resolve, 200));\n      \n      // PNGÂá∫Âäõ\n      await exportPng(exportCard, 'auto');\n      \n      // ÂÖÉ„Å´Êàª„Åô\n      exportCard.style.opacity = '0.0001';\n      exportCard.style.visibility = 'hidden';\n      setCurrentExportName(\"\");\n      \n      track('export_png', { page: 'chord_progression', source: 'sketch', id: sk.id });\n\n      // M3.5: Show toast after PNG export\n      if (!toastShownRef.current.has('png_export')) {\n        setToastConfig({\n          message: CTA_MESSAGES.toast.pngExport,\n          type: 'success',\n          ctaText: CTA_MESSAGES.toast.ctaButton,\n          ctaHref: '/ios-coming-soon',\n          ctaPlace: 'png_toast'\n        });\n        toastShownRef.current.add('png_export');\n      }\n    } catch (e) {\n      console.error('Export failed:', e);\n      setCurrentExportName(\"\");\n    }\n  };\n  \n  const doSaveSketch = async () => {\n    try {\n      // M3.5: Check Free limit BEFORE saving (directly from localStorage)\n      if (!isPro) {\n        const existingSketches = JSON.parse(localStorage.getItem('ot_sketches') || '[]');\n        console.log('[DEBUG] doSaveSketch - isPro:', isPro, 'existing sketches:', existingSketches.length);\n        \n        if (existingSketches.length >= 3) {\n          console.log('[DEBUG] Blocking save - limit reached');\n          setShowNamePrompt(false);\n          setNameInput(\"\");\n          setToastConfig({\n            message: CTA_MESSAGES.toast.sketchLimit,\n            type: 'warning',\n            ctaText: CTA_MESSAGES.toast.ctaButton,\n            ctaHref: '/ios-coming-soon',\n            ctaPlace: 'limit_toast'\n          });\n          trackToast('limit_block', { page: 'chord_progression', context: 'sketch_limit' });\n          return;\n        }\n      }\n      \n      console.log('[DEBUG] Proceeding with save');\n\n      const tonicGuess = (selFromStore ? PITCHES[selFromStore.tonic] : (selectedKey ? selectedKey.tonic : 'C')) as string;\n      const scaleGuess = (selectedScale?.type as any) || (selFromStore ? (selFromStore.mode as any) : 'Ionian');\n      const name = (nameInput.trim() || defaultSketchName).slice(0, 48);\n      const data: any = {\n        name,\n        schema: 'sketch_v1',\n        appVersion: '3.0.0',\n        key: { tonic: tonicGuess, scaleId: String(scaleGuess) },\n        capo: { fret: 0, note: 'Shaped' },\n        progression: { items: progression.map((c, i) => ({ id: c, degree: '', quality: '' })) },\n        fretboardView: { mode: fbDisplay === 'names' ? 'Names' : 'Degrees', guide: !!overlayChordNotes },\n      };\n      const r = await saveSketch(data);\n      track('save_project', { page: 'chord_progression', ok: r?.ok });\n      setShowNamePrompt(false); setNameInput(\"\");\n    } catch {}\n  };\n  const [showAdv, setShowAdv] = useState<boolean>(false);\n  const [showUpgrade, setShowUpgrade] = useState<boolean>(false);\n  const [addedFlash, setAddedFlash] = useState<boolean>(false);\n  const [isAnalyzing, startAnalyze] = useTransition();\n  const [patternHits, setPatternHits] = useState<{id:string;name:string;summary:string;start:number;end:number}[]>([]);\n  type CadenceView = { type: CadenceType; tail?: { from?: string; to?: string } };\n  const [cadences, setCadences] = useState<CadenceView[]>([]);\n  // Roman„Éè„Ç§„É©„Ç§„Éà: ÁØÑÂõ≤(start<=i<end)„Çí‰øùÊåÅ\n  const [romanHL, setRomanHL] = useState<{ start: number; end: number } | null>(null);\n  // Roman„Éú„ÉÉ„ÇØ„Çπ„Çí„Çπ„ÇØ„É≠„Éº„É´ÂØæË±°„Å´\n  const romanBoxRef = useRef<HTMLDivElement | null>(null);\n  // Roman„ÅÆÂ∞èÊñáÂ≠ó(i,v,x)„Å†„Åë„ÇíÂ§ßÊñáÂ≠óÂåñ„ÄÇÊã¨Âºß„ÅÆ‰∏≠„Å†„Åë„Å´ÈÅ©Áî®„Åô„Çã„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£„ÄÇ\n  function upperRomansInParens(name: string): string {\n    return name.replace(/\\(([^)]+)\\)/g, (_: any, inner: string) => {\n      const up = inner.replace(/[ivx]+/g, (m: string) => m.toUpperCase());\n      return `(${up})`;\n    });\n  }\n  type ProgItem = { root: string; quality: string };\n  const parseProg = (arr: string[]): ProgItem[] => arr.map((t) => {\n    const m = t.match(/^([A-G](?:#|b)?)(.*)$/);\n    return { root: m?.[1] || t, quality: (m?.[2] || '') };\n  });\n\n  // Quick: „Éô„Éº„ÇπÂìÅË≥™„ÅÆ‚ÄúÈÅ∏Êäû„ÅÆ„Åø‚Äù\n  const onPickBase = (q: string) => {\n    setQualitySel(q);\n    // „Éô„Éº„ÇπÂ§âÊõ¥„ÅßÁüõÁõæ„Åô„Çã modifier „ÅØËá™Âãï„ÇØ„É™„Ç¢\n    setModifiers((prev) => prev.filter((m) => isCompatible(getBaseKind(q), m)));\n    if (bassSel === rootSel) setBassSel('');\n  };\n\n  // Advanced: Ë¶ÅÁ¥†„ÅÆ„Éà„Ç∞„É´ÔºàPro‰ª•Â§ñ„ÅØ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâË™òÂ∞éÔºâ\n  const toggleModifier = (m: string) => {\n    if (!isPro) { setShowUpgrade(true); return; }\n    if (!isCompatible(getBaseKind(qualitySel), m)) return;\n    setModifiers((prev) => (prev.includes(m) ? prev.filter((x) => x !== m) : [...prev, m]));\n  };\n\n  // Slash: „Éé„Éº„Éà„ÅÆ„ÅøÔºàÂêåÈü≥/Âêå„Åò„Éé„Éº„Éà„ÅßËß£Èô§Ôºâ\n  const onPickBass = (n: string) => {\n    if (!isPro) { setShowUpgrade(true); return; }\n    if (n === rootSel || n === bassSel) setBassSel(''); else setBassSel(n);\n  };\n  \n  // Preset helper: Roman numerals to actual chords based on key\n  const applyPreset = (presetName: string, romans: string[], key: string) => {\n    const keyPc = noteToPc(key);\n    if (keyPc === undefined || keyPc < 0 || keyPc > 11) return;\n    \n    // „Éó„É™„Çª„ÉÉ„Éà„ÅØÂü∫Êú¨ÁöÑ„Å´Major key„ÅßÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Çã\n    // ÔºàÂ∞ÜÊù•ÁöÑ„Å´Minor„Éó„É™„Çª„ÉÉ„Éà„ÇíËøΩÂä†„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Åì„Åì„ÅßÂà§ÂÆö„É≠„Ç∏„ÉÉ„ÇØ„ÇíËøΩÂä†Ôºâ\n    const mode: Mode = \"Major\";\n    \n    // theory.ts„ÅÆromanToChordSymbolÈñ¢Êï∞„Çí‰ΩøÁî®ÔºàÊñáËÑàÂåñ„Åï„Çå„ÅüÂ§âÊèõÔºâ\n    const chords = romans.map(roman => romanToChordSymbol(roman, keyPc, mode));\n    \n    // Append to existing progression (find first empty slot)\n    setSlots(prev => {\n      const arr = [...prev];\n      let insertIdx = arr.findIndex(s => !s); // Find first empty slot\n      if (insertIdx === -1) insertIdx = 0; // If all full, start from beginning\n      \n      chords.forEach((c, i) => {\n        const targetIdx = (insertIdx + i) % 12;\n        arr[targetIdx] = c;\n      });\n      return arr;\n    });\n    \n    // Move cursor to next empty slot or wrap around\n    setCursorIndex(prev => {\n      const arr = [...slots];\n      chords.forEach((c, i) => {\n        const insertIdx = arr.findIndex(s => !s);\n        if (insertIdx === -1) return 0;\n        const targetIdx = (insertIdx + i) % 12;\n        arr[targetIdx] = c;\n      });\n      const nextEmpty = arr.findIndex(s => !s);\n      return nextEmpty === -1 ? 0 : nextEmpty;\n    });\n    \n    // Don't auto-analyze - user must click Analyze button\n    track('preset_inserted', { page: 'chord_progression', preset: presetName });\n    setShowPresetPopup(false);\n  };\n\n  const analyze = () => {\n    const res = analyzeChordProgression(progression);\n    setResult(res);\n    const ranked = rankKeys(progression);\n    setKeys(ranked.slice(0,4));\n    if (ranked.length > 0) {\n      const mode: RomanMode = ranked[0].mode === \"Major\" ? \"major\" : \"minor\";\n      const keyName = ranked[0].label.split(\" \")[0];\n      const sel = { tonic: keyName, mode } as const;\n      setSelectedKey(sel);\n      setRomanLine(progression.map(c => toRoman(c, sel.tonic, sel.mode, { showQuality: true, uppercase: true })));\n    } else {\n      setScales([]);\n      setSelectedKey(null);\n      setRomanLine([]);\n    }\n    // store-based analysis for Top3 candidates\n    runAnalyze(progression);\n    \n    // Auto-scroll to result section\n    setTimeout(() => {\n      const resultElement = document.getElementById('result');\n      if (resultElement) {\n        resultElement.scrollIntoView({ \n          behavior: 'smooth', \n          block: 'start' \n        });\n      }\n    }, 100);\n  };\n\n  useEffect(() => {\n    const current = selFromStore || selectedKey;\n    if (!current) return;\n    const tonic = typeof (current as any).tonic === 'number' ? PITCHES[(current as any).tonic] : (current as any).tonic;\n    const mode = ((current as any).mode === 'Major' || (current as any).mode === 'Minor') ? ((current as any).mode === 'Major' ? 'major' : 'minor') : (current as any).mode;\n    setRomanLine(progression.map(c => toRoman(c, tonic, mode as RomanMode, { showQuality: true, uppercase: true })));\n  }, [selFromStore, selectedKey, progression]);\n\n  // Roman pattern detection\n  useEffect(() => {\n    if (!selectedKey || romanLine.length === 0) { setPatternHits([]); return; }\n    const mode = (selectedKey.mode as any) as 'major'|'minor';\n    setPatternHits(matchPatterns(romanLine, mode));\n  }, [romanLine, selectedKey]);\n\n  // Cadence detection (rule-based; normalize tokens + loop-boundary)\n  useEffect(() => {\n    if (!romanLine || romanLine.length === 0) { setCadences([]); return; }\n    const norm = romanLine.map((t) => {\n      const m = t.replace(/\\s+/g, \"\").match(/^(b|#)?([ivIV]+)(?:[¬∞√∏].*)?/);\n      if (!m) return t.toUpperCase();\n      const acc = m[1] ?? \"\";\n      const core = (m[2] ?? \"\").toUpperCase();\n      return `${acc}${core}`;\n    });\n    let raw: any = null;\n    try { raw = (detectCadence as any)(norm); } catch {}\n    const arr: any[] = Array.isArray(raw) ? raw : (raw ? [raw] : []);\n    const views: CadenceView[] = arr.map((r) => {\n      if (typeof r === 'string') return { type: r as CadenceType };\n      const type = (r?.type ?? r) as CadenceType;\n      const tail = r?.tailRoman ?? (r?.pair ? { from: r.pair[0], to: r.pair[1] } : undefined);\n      return { type, tail };\n    });\n    if (norm.length >= 2) {\n      const last = norm[norm.length - 1];\n      const first = norm[0];\n      if (!views.some(v => v.type === 'perfect') && last === 'V' && first === 'I')\n        views.push({ type: 'perfect', tail: { from: 'V', to: 'I' } });\n      if (!views.some(v => v.type === 'deceptive') && last === 'V' && first === 'VI')\n        views.push({ type: 'deceptive', tail: { from: 'V', to: 'vi' } });\n    }\n    setCadences(views);\n  }, [romanLine]);\n\n  // Fallback cadence (render-time) in case state-based detection fails\n  const fallbackCadence = useMemo(() => {\n    if (!romanLine || romanLine.length === 0) return null as { type: CadenceType; tail?: {from?:string; to?:string} } | null;\n    const norm = romanLine.map((t) => {\n      const m = t.replace(/\\s+/g, \"\").match(/^(b|#)?([ivIV]+)(?:[¬∞√∏].*)?/);\n      if (!m) return t.toUpperCase();\n      const acc = m[1] ?? \"\";\n      const core = (m[2] ?? \"\").toUpperCase();\n      return `${acc}${core}`;\n    });\n    if (norm.length < 2) return null;\n    const first = norm[0];\n    const last = norm[norm.length - 1];\n    if (last === 'V' && first === 'I') return { type: 'perfect' as CadenceType, tail: { from: 'V', to: 'I' } };\n    if (last === 'V' && first === 'VI') return { type: 'deceptive' as CadenceType, tail: { from: 'V', to: 'vi' } };\n    if (last === 'V') return { type: 'half' as CadenceType, tail: { from: undefined, to: 'V' } };\n    return null;\n  }, [romanLine]);\n\n  useEffect(() => {\n    const compute = () => {\n      if (!gridRef.current || !leftWrapRef.current || !resultRef.current) return;\n      // Desktop„ÅÆ„Åømin-height„ÇíË®àÁÆó„ÄÇ„É¢„Éê„Ç§„É´„ÅØsticky„Çí‰Ωø„Çè„Å™„ÅÑ„Åü„ÇÅ0„Å´Êàª„Åô„ÄÇ\n      const isDesktop = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(min-width: 1024px)').matches;\n      if (!isDesktop) {\n        leftWrapRef.current.style.minHeight = '0px';\n        return;\n      }\n      // „É´„Éº„Éó„Åß‰º∏„Å≥Á∂ö„Åë„Å™„ÅÑ„Çà„ÅÜ„ÄÅÊ∏¨ÂÆöÂâç„Å´‰∏ÄÊó¶0„Å∏Êàª„Åó„Å¶„Åã„ÇâË∑ùÈõ¢„ÇíÊ∏¨„Çã\n      const prevMin = leftWrapRef.current.style.minHeight;\n      leftWrapRef.current.style.minHeight = '0px';\n      // Âº∑Âà∂„É™„Éï„É≠„Éº„Åß„É¨„Ç§„Ç¢„Ç¶„ÉàÁ¢∫ÂÆö\n      void leftWrapRef.current.offsetHeight;\n      const gridTop = gridRef.current.getBoundingClientRect().top + window.scrollY;\n      const rightBottom = rightRef.current ? (rightRef.current.getBoundingClientRect().bottom + window.scrollY) : 0;\n      const resultTop = resultRef.current.getBoundingClientRect().top + window.scrollY;\n      // two-col „ÅÆ‰∏ãÁ´Ø„Çí #result „ÅÆÁõ¥Ââç„Å´‰∏ÄËá¥„Åï„Åõ„Çã„ÄÇË™§Â∑Æ„ÅØceil„ÅßÂê∏Âèé\n      const stopY = Math.max(rightBottom, resultTop);\n      const minH = Math.max(0, Math.ceil(stopY - gridTop));\n      const prevNum = parseFloat(prevMin || '0');\n      if (Math.abs(minH - prevNum) > 1) {\n        leftWrapRef.current.style.minHeight = `${minH}px`;\n      }\n    };\n    // ÂàùÊúü„ÉªÂÆâÂÆöÂæå\n    requestAnimationFrame(compute);\n    const t = setTimeout(compute, 120);\n    // „É™„Çµ„Ç§„Ç∫„ÅØ„Éá„Éê„Ç¶„É≥„Çπ\n    let rto: any = null;\n    const onResize = () => {\n      if (rto) clearTimeout(rto);\n      rto = setTimeout(compute, 120);\n    };\n    window.addEventListener('resize', onResize);\n    window.addEventListener('orientationchange', onResize);\n    window.addEventListener('load', compute);\n    // Âè≥„Éë„Éç„É´„Çµ„Ç§„Ç∫Â§âÂåñ„ÇíÁõ£Ë¶ñÔºà„Éá„Éê„Ç¶„É≥„Çπ‰ªò„ÅçÔºâ\n    let ro: ResizeObserver | null = null;\n    let roResult: ResizeObserver | null = null;\n    if (typeof ResizeObserver !== 'undefined' && rightRef.current) {\n      let rt: any = null;\n      ro = new ResizeObserver(() => {\n        if (rt) clearTimeout(rt);\n        rt = setTimeout(compute, 100);\n      });\n      ro.observe(rightRef.current);\n    }\n    if (typeof ResizeObserver !== 'undefined' && resultRef.current) {\n      let rt2: any = null;\n      roResult = new ResizeObserver(() => {\n        if (rt2) clearTimeout(rt2);\n        rt2 = setTimeout(compute, 100);\n      });\n      roResult.observe(resultRef.current);\n    }\n    return () => {\n      clearTimeout(t);\n      if (rto) clearTimeout(rto);\n      window.removeEventListener('resize', onResize);\n      window.removeEventListener('orientationchange', onResize);\n      window.removeEventListener('load', compute);\n      if (ro) ro.disconnect();\n      if (roResult) roResult.disconnect();\n    };\n  }, []);\n\n  // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅåÂ§â„Çè„Å£„Åü„Å®„Åç„Å´„ÇÇËªΩ„ÅèÂÜçÂêåÊúü\n  useEffect(() => {\n    if (!leftWrapRef.current) return;\n    const isDesktop = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(min-width: 1024px)').matches;\n    if (!isDesktop) return;\n    // Ê¨°„Éï„É¨„Éº„É†„ÅßÂÜçË®àÁÆó\n    requestAnimationFrame(() => {\n      const evt = new Event('resize');\n      window.dispatchEvent(evt);\n    });\n  }, [result, showAdv, progression.length]);\n  const previewLabel = (qualitySel === 'M' ? `${rootSel}` : `${rootSel}${qualitySel}`)\n    + (modifiers.length ? ` ${modifiers.join(' ')}` : '')\n    + (bassSel ? `/${bassSel}` : '');\n  const previewPlay = async () => {\n    if (!rootSel) return;\n    const pc = PITCHES.indexOf(rootSel as any);\n    if (pc < 0) return;\n    const base = 60 + pc; // C4Âü∫Ê∫ñ\n    const q = qualitySel.toLowerCase();\n    const has = (m: string) => modifiers.includes(m);\n    let intervals: number[] = [0,4,7];\n    if (q.includes('m') && !q.includes('maj')) intervals = [0,3,7];\n    if (q.includes('dim')) intervals = [0,3,6];\n    if (q.includes('maj7') || q.includes('mmaj7')) intervals = [...(q.includes('m')?[0,3,7]:[0,4,7]), 11];\n    else if (q.includes('7')) intervals = [0,4,7,10];\n    if (has('sus2')) intervals = [0,2,7];\n    if (has('sus4')) intervals = [0,5,7];\n    const midis = intervals.map(iv => base + (iv%12));\n    try { await player.resume(); player.playChord(midis, 'lightStrum', 300); } catch {}\n  };\n  // ÁèæÂú®„ÅÆÁ∑®ÈõÜÂÜÖÂÆπ„ÇíSketch„Å∏ÂèçÊò†Ôºà3Áßí„Ç¢„Ç§„Éâ„É´„ÅßËá™Âãï‰øùÂ≠òÔºâ\n  useEffect(() => {\n    try {\n      const id = ensureSketchId();\n      const name = progression.length ? progression.join(\" \").slice(0, 48) : `Untitled ${new Date().toLocaleString()}`;\n      const tonicGuess = (selFromStore ? PITCHES[selFromStore.tonic] : (selectedKey ? selectedKey.tonic : 'C')) as string;\n      const scaleGuess = (selectedScale?.type as any) || (selFromStore ? selFromStore.mode : 'Ionian');\n      setSketch({\n        id,\n        name,\n        createdAt: sketch?.createdAt || new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        schema: 'sketch_v1',\n        appVersion: '3.0.0',\n        key: { tonic: tonicGuess, scaleId: String(scaleGuess) },\n        capo: { fret: 0, note: 'Shaped' as any },\n        progression: { items: progression.map((c, i) => ({ id: `${i+1}-${c}`, degree: '', quality: '' })) },\n        fretboardView: { mode: fbDisplay === 'names' ? 'Names' : 'Degrees', guide: !!overlayChordNotes },\n      } as any);\n    } catch {}\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [slots, fbDisplay, overlayChordNotes, selFromStore, selectedKey, selectedScale]);\n  // „É¢„Éê„Ç§„É´Âà§ÂÆöÔºàSSR„Å®‰∏ÄËá¥„Åï„Åõ„Çã„Åü„ÇÅÂàùÊúüfalse„ÄÅ„Éû„Ç¶„É≥„ÉàÂæå„Å´Âà§ÂÆöÔºâ\n  const [isTouchDevice, setIsTouchDevice] = useState(false);\n  useEffect(() => {\n    try {\n      const touch = ('ontouchstart' in window) || ((navigator as any)?.maxTouchPoints ?? 0) > 0;\n      setIsTouchDevice(!!touch);\n    } catch { setIsTouchDevice(false); }\n  }, []);\n\n  // ÈÄ≤Ë°å„ÉÅ„ÉÉ„ÉóÔºà\"C\", \"Am\", \"F\"...Ôºâ„ÇíÁ∞°ÊòìËß£Êûê„Åó„Å¶Áô∫Èü≥\n  const playChordSymbol = async (symbol: string) => {\n    try {\n      await player.resume();\n      const midis = chordToMidi(symbol);\n      if (midis && midis.length > 0) {\n        player.playChord(midis, 'lightStrum', 300);\n      }\n    } catch (error) {\n      console.error('Failed to play chord:', symbol, error);\n    }\n  };\n  return (\n    <main ref={exportRef as any} className=\"ot-page ot-stack\" data-page=\"find-key\">\n      {/* Progression card: full-width at top */}\n      <section id=\"progression\" className={\"ot-card prog-compact\"}>\n          <div className=\"flex items-center justify-between gap-4 sm:gap-3 mb-1 sm:mb-2\">\n            <div className=\"flex items-center gap-2\">\n              <H2 className=\"mb-0 text-left\">Build progression</H2>\n              <InfoDot\n                title=\"Build Progression\"\n                text={isJapanese \n                  ? \"Choose Chords„Åã„Çâ„Ç≥„Éº„Éâ„ÇíÈÅ∏„Çì„Åß„Çπ„É≠„ÉÉ„Éà„Å´ËøΩÂä†„Éú„Çø„É≥„Åã„ÇâËøΩÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ‰∏äÈÉ®„ÅÆ„Éó„É™„Çª„ÉÉ„Éà„Åã„Çâ„Ç≥„Éº„ÉâÈÄ≤Ë°å„ÇíÈÅ∏Êäû„Åó„Å¶ËøΩÂä†„Åô„Çã„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô„ÄÇ\"\n                  : \"Select chords from Choose Chords and add them using the slot add button. You can also select chord progressions from the presets at the top to add them.\"\n                }\n              />\n            </div>\n          <div className=\"flex flex-wrap items-center gap-2 relative\">\n              {/* Reset, Sketches */}\n            <button\n                type=\"button\"\n                className=\"btn-ghost btn-reset chip-pressable text-sm px-3 py-1 inline-flex items-center gap-1\"\n                title=\"Reset progression\"\n                onClick={() => {\n                  setSlots(Array(12).fill(\"\"));\n                  setCursorIndex(0);\n                  resetAnalysis();\n                  setKeys([]);\n                  setResult(null);\n                  setOverlayChordNotes(null);\n                  setSelectedCellId(null);\n                  setFbDisplay('degrees');\n                }}\n              >\n                <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\">\n                  <path d=\"M12 5V2L7 7l5 5V9c2.76 0 5 2.24 5 5a5 5 0 1 1-5-5z\"/>\n                </svg>\n                <span>Reset</span>\n              </button>\n              <button\n                type=\"button\"\n                className=\"chip-pressable inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs border\"\n                title=\"Show sketches\"\n                onClick={() => setShowSketchList(v=>!v)}\n                aria-expanded={showSketchList}\n              >\n                <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h12v2H3v-2z\"/></svg>\n                Sketches\n              </button>\n              {showSketchList && (\n                <div ref={sketchesDropRef} className=\"fixed right-4 top-20 z-[10000] w-[320px] max-h-[70vh] overflow-auto rounded-md border bg-white dark:bg-neutral-900 shadow-2xl p-2 space-y-2\">\n                  {sketches.length === 0 ? (\n                    <div className=\"text-xs opacity-70 p-2\">No sketches yet</div>\n                  ) : (\n                    sketches.map((sk) => (\n                      <div key={sk.id} className=\"flex items-center justify-between gap-2 px-2 py-1 rounded hover:bg-black/5 dark:hover:bg-white/10\">\n                        <button\n                          className=\"text-left text-sm flex-1 truncate\"\n                          title={`${sk.name}`}\n                          onClick={() => setSelectedSketchForAction(sk)}\n                        >\n                          {sk.name}\n                        </button>\n                        <button\n                          className=\"ot-btn-ghost text-xs\"\n                          title=\"Delete\"\n                          onClick={(e) => { e.stopPropagation(); deleteSketch(sk.id); loadSketches(); track('project_delete', { page: 'chord_progression', id: sk.id }); }}\n                        >\n                          üóëÔ∏è\n            </button>\n          </div>\n                    ))\n                  )}\n                </div>\n              )}\n              \n              {/* „Çπ„Éö„Éº„Çπ */}\n              <div className=\"w-4\" aria-hidden=\"true\"></div>\n              \n              {/* Âè≥„Ç∞„É´„Éº„Éó: Playback controls */}\n              <div className=\"inline-flex items-center gap-2\">\n                <button\n                  type=\"button\"\n                  className=\"chip-pressable text-sm px-3 py-1.5 inline-flex items-center gap-1.5 rounded-lg border\"\n                  title={isPlaying ? \"Stop playback\" : \"Play progression\"}\n                  onClick={togglePlayback}\n                  disabled={progression.length === 0}\n                  style={{ opacity: progression.length === 0 ? 0.5 : 1 }}\n                >\n                  {isPlaying ? (\n                    <>\n                      <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <rect x=\"5\" y=\"5\" width=\"14\" height=\"14\" rx=\"1\"/>\n                      </svg>\n                      <span>Stop</span>\n                    </>\n                  ) : (\n                    <>\n                      <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <path d=\"M8 5v14l11-7z\"/>\n                      </svg>\n                      <span>Play</span>\n                    </>\n                  )}\n                </button>\n                <div className=\"inline-flex items-center gap-1.5\">\n                  <label htmlFor=\"bpm-input\" className=\"text-xs opacity-70\">BPM:</label>\n                  <input\n                    id=\"bpm-input\"\n                    type=\"number\"\n                    min=\"40\"\n                    max=\"240\"\n                    value={bpm}\n                    onChange={(e) => setBpm(Math.max(40, Math.min(240, parseInt(e.target.value) || 120)))}\n                    className=\"w-16 px-2 py-1 text-sm rounded border bg-transparent\"\n                    disabled={isPlaying}\n                  />\n                </div>\n              </div>\n              \n              <select\n                className=\"chip\"\n                aria-label=\"Instrument\"\n                defaultValue={(typeof window!==\"undefined\" ? (localStorage.getItem('ot-instrument') || 'acoustic_guitar_steel') : 'acoustic_guitar_steel') as string}\n                onChange={async (e)=>{ const v = e.currentTarget.value as any; await player.setInstrument(v); }}\n              >\n                <option value=\"acoustic_guitar_steel\">Acoustic Steel</option>\n                <option value=\"acoustic_guitar_nylon\">Acoustic Nylon</option>\n                <option value=\"electric_guitar_clean\">Electric Clean</option>\n                <option value=\"distortion_guitar\">Distortion</option>\n                <option value=\"overdriven_guitar\">Over Drive</option>\n                <option value=\"electric_guitar_muted\">Muted</option>\n                <option value=\"acoustic_grand_piano\">Piano</option>\n              </select>\n            </div>\n          </div>\n          {/* ‰∏äÊÆµ„ÅÆÊóßÈÄ≤Ë°å„ÉÅ„ÉÉ„ÉóË°å„ÅØÂªÉÊ≠¢ */}\n\n          {/* 12-slot gridÔºàÁï™Âè∑ or „Ç≥„Éº„ÉâÔºâ„ÄÇ„ÇØ„É™„ÉÉ„ÇØ„Åß„Ç´„Éº„ÇΩ„É´„ÄÅfilled„ÅØ„ÇØ„É™„ÉÉ„ÇØ„ÅßÂÜçÁîü„Éª√ó„ÅßÂâäÈô§„ÄÇD&D„ÅßÂÖ•„ÇåÊõø„Åà */}\n          <div className=\"prog-slots mt-2 flex flex-wrap gap-1\" aria-label=\"Progression slots\">\n            {Array.from({ length: 12 }).map((_, i) => {\n              const filled = Boolean(slots[i]);\n              const tone = 16; // emerald hue base\n              const alpha = i < 8 ? 0 : (i - 7) * 0.08; // 0,0.08,0.16,0.24 for 8..11\n              const bg = `rgba(16,185,129,${alpha.toFixed(2)})`;\n              const active = cursorIndex === i;\n              const isCurrentlyPlaying = currentChordIndex === i && isPlaying;\n              return (\n                <div\n                  key={`slot-${i}`}\n                  data-slot-index={i}\n                  className={[\n                    \"inline-flex items-center justify-center rounded border text-xs select-none relative chip-pressable\",\n                    filled ? \"bg-black/5 dark:bg-white/10\" : \"bg-transparent\",\n                    active ? \"ring-2 ring-emerald-400/60\" : \"\",\n                    isCurrentlyPlaying ? \"ring-4 ring-blue-500/80 shadow-lg\" : \"\",\n                    dragIndex === i ? \"opacity-50 scale-105\" : \"\",\n                    touchDragTarget === i ? \"ring-2 ring-blue-400\" : \"\"\n                  ].join(\" \")}\n                  style={{ \n                    padding: '6px 10px', \n                    minWidth: 72, \n                    minHeight: 36, \n                    background: filled ? undefined : bg, \n                    borderColor: 'var(--line)',\n                    transition: 'opacity 0.15s, transform 0.15s, box-shadow 0.15s',\n                    touchAction: filled ? 'none' : 'auto'\n                  }}\n                  onClick={() => { if (filled) { playChordSymbol(slots[i]); } else { setCursorIndex(i); } }}\n                  draggable={filled}\n                  onDragStart={() => setDragIndex(i)}\n                  onDragOver={(e) => e.preventDefault()}\n                  onDrop={() => { if (dragIndex !== null) { moveSlot(dragIndex, i); setDragIndex(null); } }}\n                  onTouchStart={(e) => handleTouchStartDrag(e, i)}\n                  onTouchMove={(e) => handleTouchMoveDrag(e, i)}\n                  onTouchEnd={handleTouchEndDrag}\n                >\n                  {/* corner numbering (always visible) */}\n                  <span className=\"absolute left-1 top-1 text-[10px] opacity-70 select-none pointer-events-none\">{String(i+1)}</span>\n                  {filled ? (\n                    <>\n                      <span>{slots[i]}</span>\n                <button\n                  aria-label=\"Remove chord\"\n                        className=\"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-black/50 text-white text-[10px] leading-4 hover:bg-black/70\"\n                        onClick={(e)=>{ e.stopPropagation(); removeSlot(i); }}\n                >√ó</button>\n                    </>\n                  ) : null}\n          </div>\n              );\n            })}\n        </div>\n          </section>\n      \n      {/* Sketch Library „Çª„ÇØ„Ç∑„Éß„É≥„ÅØ„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„Å´ÁßªË°å */}\n      {/* Choose chords card: full-width below */}\n      <section id=\"choose\" ref={rightRef} className=\"ot-card right-panel\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"flex items-center gap-2\">\n              <H2 className=\"mb-0 text-left\">Choose chords</H2>\n              <InfoDot\n                title=\"Choose Chords\"\n                text={isJapanese \n                  ? \"„É´„Éº„Éà„Å®„Ç≥„Éº„Éâ„Çø„Ç§„Éó„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇËøΩÂä†„Éú„Çø„É≥„Åß„Ç≥„Éº„ÉâÈÄ≤Ë°å„ÅÆ„Çπ„É≠„ÉÉ„Éà„Å´ËøΩÂä†„Åß„Åç„Åæ„Åô„ÄÇ\\nPro„Éó„É©„É≥„ÅÆÂ†¥Âêà„ÄÅ„Çà„ÇäË§áÈõë„Å™„Ç≥„Éº„Éâ„Çø„Ç§„Éó„ÇíÈÅ∏„Å∂„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ\"\n                  : \"Select a root note and chord type. Use the Add button to add to chord progression slots.\\nPro plan allows you to select more complex chord types.\"\n                }\n              />\n            </div>\n            {/* Preset button moved from Build progression */}\n            <button\n              type=\"button\"\n              className=\"chip-pressable text-sm px-3 py-1 inline-flex items-center gap-1 rounded-lg border\"\n              title=\"Load preset progression\"\n              onClick={() => setShowPresetPopup(true)}\n            >\n              <span>üìã</span>\n              <span>Presets</span>\n            </button>\n        </div>\n          {/* ChordBuilder component with Quality Master.csv integration */}\n          <ChordBuilder\n            plan={isPro ? 'pro' : 'free'}\n            onPreview={async (symbol) => {\n              // Êó¢Â≠ò„ÅÆÁ∞°Êòì„Éó„É¨„Éì„É•„Éº„Å®ÂêåÁ≠âÔºösymbol ‚Üí MIDI Â§âÊèõ„Åó„Å¶ÂÜçÁîü\n              try {\n                await player.resume();\n                const midis = chordToMidi(symbol); // Êó¢Â≠ò„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£\n                player.playChord(midis, 'lightStrum', 300);\n              } catch {}\n            }}\n            onBlock={(reason) => {\n              // ProÈôêÂÆöÔºà/bass „Å™„Å©Ôºâ„Å´ÂΩì„Åü„Å£„Åü„Å®„Åç„ÅØË™≤Èáë„É¢„Éº„ÉÄ„É´„ÇíÈñã„Åè\n              setShowUpgrade(true);\n            }}\n            onConfirm={(symbol) => {\n              // 12„Çπ„É≠„ÉÉ„Éà„Å´ËøΩÂä†ÔºàÊúÄÂàù„ÅÆÁ©∫„Åç„Å´ÂÖ•„Çå„Å¶„Ç´„Éº„ÇΩ„É´„ÇíÈÄ≤„ÇÅ„ÇãÔºâ\n              setSlots(prev => {\n                const arr = [...prev];\n                let idx = arr.findIndex(s => !s);\n                if (idx === -1) idx = 0;\n                arr[idx] = symbol;\n                return arr;\n              });\n              setCursorIndex(prev => {\n                // Áõ¥ÊÑüÁöÑ„Å´ \"Ê¨°„ÅÆÁ©∫„Çπ„É≠„ÉÉ„Éà\" „Å∏\n                const arr = [...slots];\n                let i = arr.findIndex(s => !s);\n                return i === -1 ? 0 : i;\n              });\n              setAddedFlash(true); // Êó¢Â≠ò„ÅÆ \"Added\" ÊºîÂá∫„Åå„ÅÇ„Çã„Å™„Çâ\n            }}\n          />\n          \n          {/* Analyze button */}\n          <div className=\"mt-4\">\n            <button\n              className={`w-full px-6 py-2 text-base rounded-lg font-semibold text-white transition-transform active:scale-[.98] active:translate-y-px focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 ${isAnalyzing ? 'bg-rose-400/70 cursor-wait' : 'bg-rose-400 hover:bg-rose-500'}`}\n              onClick={() => {\n                const items = parseProg(progression);\n                const hasAdv = items.some((i) => ADVANCED_QUALITIES.some((a) => i.quality.includes(a)));\n                if (hasAdv && !isPro) {\n                  if (typeof window !== 'undefined') window.alert('Advanced chords detected. Remove them or upgrade to Pro.');\n                  return;\n                }\n                startAnalyze(() => {\n                  // Run analysis without auto-scroll (analyze function has its own scroll)\n                  const res = analyzeChordProgression(progression);\n                  setResult(res);\n                  const ranked = rankKeys(progression);\n                  setKeys(ranked.slice(0,4));\n                  if (ranked.length > 0) {\n                    const mode: RomanMode = ranked[0].mode === \"Major\" ? \"major\" : \"minor\";\n                    const keyName = ranked[0].label.split(\" \")[0];\n                    const sel = { tonic: keyName, mode } as const;\n                    setSelectedKey(sel);\n                    setRomanLine(progression.map(c => toRoman(c, sel.tonic, sel.mode, { showQuality: true, uppercase: true })));\n                  } else {\n                    setScales([]);\n                    setSelectedKey(null);\n                    setRomanLine([]);\n                  }\n                  // store-based analysis for Top3 candidates\n                  runAnalyze(progression);\n                  \n                  // Auto-scroll to result section\n                  setTimeout(() => {\n                    const resultElement = document.getElementById('result');\n                    if (resultElement) {\n                      resultElement.scrollIntoView({ \n                        behavior: 'smooth', \n                        block: 'start' \n                      });\n                    }\n                  }, 100);\n                });\n              }}\n              disabled={isAnalyzing}\n              aria-busy={isAnalyzing}\n            >\n              {isAnalyzing ? (\n                <span className=\"inline-flex items-center gap-2\">\n                  <svg className=\"h-4 w-4 animate-spin\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"3\"/>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 0 1 8-8v4a4 4 0 0 0-4 4H4z\"/>\n                  </svg>\n                  Analyzing‚Ä¶\n                </span>\n              ) : 'Analyze'}\n            </button>\n          </div>\n      </section>\n      <section id=\"result\" ref={resultRef} className=\"ot-card\">\n        <div className=\"flex items-center justify-between\">\n          <H2 className=\"text-left mb-0\">Result</H2>\n          <div className=\"flex items-center gap-2\">\n            <button\n              type=\"button\"\n              className=\"chip-pressable inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm border\"\n              onClick={() => setShowNamePrompt(true)}\n              title=\"Save sketch\"\n            >\n              <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\"><path d=\"M17 3H5a2 2 0 0 0-2 2v14l4-4h10a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z\"/></svg>\n              Save\n            </button>\n          </div>\n        </div>\n        {showNamePrompt && (\n          <div className=\"fixed inset-0 z-[10000]\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"absolute inset-0 bg-black/40\" onClick={() => { setShowNamePrompt(false); setNameInput(\"\"); }} />\n            <div className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-neutral-900 border rounded-lg shadow-xl p-4 w-[92vw] max-w-[420px]\">\n              <div className=\"text-base font-semibold mb-2\">Save sketch</div>\n              <input\n                type=\"text\"\n                className=\"chip px-2 py-2 text-sm w-full\"\n                placeholder={defaultSketchName}\n                value={nameInput}\n                onChange={(e)=>setNameInput(e.target.value)}\n                aria-label=\"Sketch name\"\n                autoFocus\n              />\n              <div className=\"mt-3 flex items-center justify-end gap-2\">\n                <button\n                  type=\"button\"\n                  className=\"chip-pressable inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm border\"\n                  onClick={() => { setShowNamePrompt(false); setNameInput(\"\"); }}\n                >Cancel</button>\n                <button\n                  type=\"button\"\n                  className=\"chip-pressable inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm border\"\n                  onClick={doSaveSketch}\n                >OK</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Sketch Action Popup (Edit/Export/Cancel) */}\n        {selectedSketchForAction && (\n          <div className=\"fixed inset-0 z-[10001]\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"absolute inset-0 bg-black/40\" onClick={() => setSelectedSketchForAction(null)} />\n            <div className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-neutral-900 border rounded-lg shadow-xl p-4 w-[92vw] max-w-[320px]\">\n              <div className=\"text-base font-semibold mb-3\">{selectedSketchForAction.name}</div>\n              <div className=\"space-y-2\">\n                <button\n                  type=\"button\"\n                  className=\"w-full chip-pressable inline-flex items-center justify-center gap-1 px-4 py-2 rounded-lg text-sm border\"\n                  onClick={() => {\n                    try {\n                      const sk = selectedSketchForAction;\n                      const arr = new Array(12).fill(\"\");\n                      (sk?.progression?.items || []).forEach((it: any, idx: number) => { if (idx < 12) arr[idx] = String(it?.id || \"\"); });\n                      setSlots(arr);\n                      setCursorIndex(arr.findIndex(s=>!s) === -1 ? 11 : arr.findIndex(s=>!s));\n                      // Ëß£Êûê„ÇíÂÆüË°å„Åó„Å¶ÂÄôË£ú„ÇíÁîüÊàê\n                      try { runAnalyze(arr.filter(Boolean) as any); } catch {}\n                      // Apply key to analysis store if possible\n                      const tonicPc = PITCHES.indexOf(sk.key.tonic as any);\n                      if (tonicPc >= 0) {\n                        try { selectKey?.({ tonic: tonicPc as any, mode: (String(sk.key.scaleId || '')?.toLowerCase().includes('aeolian') || String(sk.key.scaleId||'').toLowerCase().includes('minor') ? 'Minor' : 'Major') as any }); } catch {}\n                      }\n                      track('open_project', { page: 'chord_progression', id: sk.id });\n                      setShowSketchList(false);\n                      setSelectedSketchForAction(null);\n                    } catch {}\n                  }}\n                >\n                  Edit\n                </button>\n                <button\n                  type=\"button\"\n                  className=\"w-full chip-pressable inline-flex items-center justify-center gap-1 px-4 py-2 rounded-lg text-sm border\"\n                  onClick={async () => {\n                    try {\n                      const sk = selectedSketchForAction;\n                      // ExportÊ©üËÉΩ„ÇíÂÆüË£ÖÔºàÂæå„ÅßËøΩÂä†Ôºâ\n                      await handleExportSketch(sk);\n                      setSelectedSketchForAction(null);\n                    } catch {}\n                  }}\n                >\n                  Export\n                </button>\n                <button\n                  type=\"button\"\n                  className=\"w-full chip-pressable inline-flex items-center justify-center gap-1 px-4 py-2 rounded-lg text-sm border\"\n                  onClick={() => setSelectedSketchForAction(null)}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Export-only compact card (offscreen) */}\n        <div\n          ref={exportCardRef}\n          aria-hidden\n          style={{\n            position: 'fixed',\n            left: 0,\n            top: 0,\n            zIndex: 9999,\n            opacity: 0.0001,\n            pointerEvents: 'none',\n            width: 800,\n            height: 600,\n            background: '#ffffff',\n            color: '#000000',\n            padding: 24,\n            borderRadius: 12,\n            border: '2px solid #cbd5e1',\n            boxShadow: '0 4px 6px rgba(0,0,0,0.1)'\n          }}\n        >\n          {(() => {\n            const exportName = currentExportName || (nameInput?.trim() ? nameInput : defaultSketchName);\n            const keyLabel = (() => {\n              const k = selFromStore;\n              if (!k) return '-';\n              return `${PITCHES[k.tonic]} ${k.mode}`;\n            })();\n            const progText = progression.join(' ');\n            const scaleLabel = (() => {\n              const s = selectedScale;\n              if (!s) return '-';\n              return scaleTypeLabel(s.type);\n            })();\n            const fb = (() => {\n              const capoN = 0;\n              const rootPc = selectedScale ? selectedScale.root : undefined;\n              const notesSounding = (selectedScale && typeof rootPc === 'number')\n                ? getScalePitchesById(rootPc, selectedScale.type as any).map(pc => PITCHES[pc])\n                : [];\n              const displayMode = isHeptatonic ? (fbDisplay as any) : ('degrees' as any);\n              const quality: Quality = (() => {\n                const q = selectedScale?.type;\n                if (!q) return 'maj';\n                return q.toLowerCase().includes('aeolian') || q.toLowerCase().startsWith('min') ? 'min' : 'maj';\n              })();\n              const rootForContext = typeof rootPc === 'number' ? rootPc : 0;\n              return (\n                <div style={{ marginTop: 8, background: '#ffffff', border: '2px solid #cbd5e1', borderRadius: '8px', padding: '12px', width: '100%' }}>\n                  <Fretboard\n                    overlay={{ viewMode: 'sounding', capo: capoN, notes: notesSounding, chordNotes: overlayChordNotes ?? undefined, showScaleGhost: Boolean(overlayChordNotes), display: displayMode, scaleRootPc: (typeof rootPc === 'number' ? rootPc : 0), scaleType: (selectedScale?.type ?? 'Ionian'), context: { chordRootPc: (typeof rootPc === 'number' ? rootPc : 0), quality } }}\n                    onRequestForms={() => {}}\n                  />\n                </div>\n              );\n            })();\n            return (\n              <div style={{\n                background: '#ffffff',\n                color: '#000000',\n                fontFamily: 'ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif',\n                width: '100%',\n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '12px',\n                padding: '8px'\n              } as any}>\n                <div style={{ fontWeight: 700, fontSize: 24, color: '#000000', lineHeight: 1.3 }}>{exportName}</div>\n                <div style={{ fontSize: 18, color: '#000000', fontWeight: 600 }}>Key: <span style={{ color: '#1e40af' }}>{keyLabel}</span></div>\n                <div style={{ fontSize: 16, color: '#000000', fontWeight: 500 }}>Progression: <span style={{ color: '#1e40af' }}>{progText || '-'}</span></div>\n                <div style={{ fontSize: 16, color: '#000000', fontWeight: 500 }}>Scale: <span style={{ color: '#1e40af' }}>{scaleLabel}</span></div>\n                <div style={{ flex: 1, background: '#ffffff', border: '2px solid #cbd5e1', borderRadius: '8px', padding: '12px', overflow: 'hidden' }}>\n                  {fb}\n                </div>\n              </div>\n            );\n          })()}\n        </div>\n          {keyCandidates.length > 0 ? (\n            <div className=\"space-y-4\">\n              {/* Low accuracy warning - only show after analyze */}\n              {keyCandidates.length > 0 && progression.length < 8 && (\n                <div className=\"text-xs px-3 py-2 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200\">\n                  ‚ö†Ô∏è Á≤æÂ∫¶Âêë‰∏ä„ÅÆ„Åü„ÇÅ„ÄÅ8„Ç≥„Éº„Éâ‰ª•‰∏ä„ÅÆÂÖ•Âäõ„ÇíÊé®Â•®„Åó„Åæ„ÅôÔºàÁèæÂú®: {progression.length}„Ç≥„Éº„ÉâÔºâ\n                </div>\n              )}\n              {/* === Key === */}\n              <H3>Key</H3>\n              <div className=\"flex items-center justify-between gap-2\">\n                <div className=\"chip-row mb-2\" role=\"tablist\" aria-label=\"Key candidates\">\n                  {keyCandidates.map((k, idx) => {\n                    const active = selFromStore && selFromStore.tonic === k.tonic && selFromStore.mode === k.mode;\n                    const label = `${PITCHES[k.tonic]} ${k.mode}`;\n                    const reasons = k.reasons.join(\"\\n\");\n                    return (\n                      <button\n                        key={`${label}-${idx}`}\n                        role=\"tab\"\n                        aria-selected={active}\n                        className={[\"chip\",\"chip--key\", active?\"chip--active\":\"\"].join(\" \")}\n                        title={`Why this key\\n${reasons}`}\n                        onClick={() => selectKey({ tonic: k.tonic, mode: k.mode })}\n                        data-roving=\"item\"\n                      >\n                        {label} {Math.round(k.confidence)}%\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n              {/* === Scale === */}\n              <div className=\"result-block\">\n                <H3>\n                  <span className=\"flex items-center gap-2\">\n                    <span>Scale</span>\n                    {(() => {\n                      const curId = (selectedScale?.type as any) ?? (scaleCandidates?.[0]?.type as any) ?? 'Ionian';\n                      const cur = SCALE_CATALOG.find(s => s.id === (curId as any));\n                      if (!cur) return null;\n                      const notesInC = getScalePitchesById(0, cur.id).map(pc => PITCHES[pc]).join(' ');\n                      return (\n                        <InfoDot title={cur.display.en} className=\"ml-1\" linkHref=\"/resources/glossary\" linkLabel=\"Glossary\">\n                          <div className=\"text-sm\">\n                            <div className=\"mb-1\"><b>Degrees:</b> {cur.degrees.join(' ')}</div>\n                            <div className=\"mb-1\"><b>Notes in C:</b> {notesInC}</div>\n                            {cur.info?.oneLiner && (<div className=\"mb-1\"><b>About:</b> {cur.info.oneLiner}</div>)}\n                          </div>\n                        </InfoDot>\n                      );\n                    })()}\n                  </span>\n                </H3>\n                <div className=\"chip-row mb-2\" role=\"tablist\" aria-label=\"Scale candidates\">\n                  {scaleCandidates.map((s, idx) => {\n                    const type = normalizeScaleId(s.type as any);\n                    const active = selectedScale?.type === type && selectedScale?.root === s.root;\n                    const label = `${PITCHES[s.root]} ${scaleTypeLabel(type as any)}`;\n                    return (\n                      <button\n                        key={`${label}-${idx}`}\n                        role=\"tab\"\n                        aria-selected={active}\n                        className={[\"chip\", \"chip--key\", active ? \"chip--active\" : \"\"].join(\" \")}\n                        onClick={() => { selectScale(s); track('scale_pick', { page:'find-key', scale: s.type, key: PITCHES[s.root] }); }}\n                        data-roving=\"item\"\n                      >\n                        {label} {Math.round(s.score)}%\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n            </div>\n        ) : (\n          <div className=\"text-sm opacity-70\">Click Analyze to see results.</div>\n        )}\n      </section>\n\n      {/* Tools „Çª„ÇØ„Ç∑„Éß„É≥ÔºàFretboard‰ª•‰∏ãÔºâ */}\n      <section className=\"ot-card mt-2\">\n        <H2>Tools</H2>\n        <div className=\"space-y-4\">\n              {/* === Fretboard === */}\n              <div className=\"result-block\">\n                <H3\n                  right={\n                    <div ref={fbToggleRef} className=\"flex items-center gap-2 bg-transparent shadow-none fretboard-toggle\" aria-label=\"Fretboard notation\" role=\"tablist\">\n                      <button\n                        role=\"tab\"\n                        aria-selected={fbDisplay === 'degrees'}\n                        tabIndex={fbDisplay === 'degrees' ? 0 : -1}\n                        className={[\"chip\",\"chip--key\", fbDisplay === 'degrees' ? \"chip--active\" : \"\"].join(\" \")}\n                        onClick={()=>setFbDisplay('degrees')}\n                        data-roving=\"item\"\n                      >Degrees</button>\n                      <button\n                        role=\"tab\"\n                        aria-selected={fbDisplay === 'names'}\n                        tabIndex={isHeptatonic && fbDisplay === 'names' ? 0 : -1}\n                        aria-disabled={!isHeptatonic}\n                        className={[\"chip\",\"chip--key\", fbDisplay === 'names' ? \"chip--active\" : \"\", !isHeptatonic ? \"chip--disabled\" : \"\"].join(\" \")}\n                        onClick={()=>{ if (isHeptatonic) setFbDisplay('names'); }}\n                        data-roving=\"item\"\n                      >Names</button>\n                      {/* NamesÂè≥„ÅÆÈü≥Ëâ≤ÈÅ∏Êäû„ÅØÂâäÈô§ */}\n                    </div>\n                  }\n                >Fretboard</H3>\n                <div className=\"fret-wrap\">\n                  <div className=\"fret-inner\">\n                    {selectedScale ? (() => {\n                      const capoN = 0;\n                      const rootPc = selectedScale.root;\n                      const notesSounding = getScalePitchesById(rootPc, selectedScale.type as any).map(pc => PITCHES[pc]);\n                      const displayMode = isHeptatonic ? (fbDisplay as any) : ('degrees' as any);\n                      const quality: Quality = (() => {\n                        const q = selectedScale?.type;\n                        if (!q) return 'maj';\n                        return q.toLowerCase().includes('aeolian') || q.toLowerCase().startsWith('min') ? 'min' : 'maj';\n                      })();\n                      const rootForContext = rootPc;\n                      return (\n                        <Fretboard\n                          overlay={{ viewMode: 'sounding', capo: capoN, notes: notesSounding, chordNotes: overlayChordNotes ?? undefined, showScaleGhost: Boolean(overlayChordNotes), display: displayMode, scaleRootPc: rootPc as any, scaleType: selectedScale.type as any, context: { chordRootPc: rootPc, quality } }}\n                          onRequestForms={(at, ctx) => {\n                            setFormsPop({ at, rootPc: ctx.rootPc ?? rootForContext, quality: ctx.quality });\n                          }}\n                          formShape={formShape}\n                        />\n                      );\n                    })() : (\n                      <div className=\"text-center text-sm opacity-50 py-8\">\n                        Click Analyze to see fretboard\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* === Diatonic (Capo-based table) === */}\n              <section className=\"result-block space-y-2\">\n                <H3>\n                  <span className=\"flex items-center gap-2\">\n                    <span>Diatonic</span>\n                    <InfoDot\n                      className=\"ml-1\"\n                      title=\"Diatonic chords\"\n                      linkHref=\"/resources/glossary\"\n                      linkLabel=\"Glossary\"\n                    >\n                      <p className=\"text-sm\">Chords built only from the key‚Äôs scale tones (I‚Äìii‚Äìiii‚ÄìIV‚ÄìV‚Äìvi‚Äìvii¬∞).</p>\n                      <ul className=\"mt-2 list-disc pl-5 space-y-1 text-sm\">\n                        <li>Stable sound: everything stays inside the key.</li>\n                        <li>Use: begin inside ‚Üí add color with a borrowed chord (iv, bVII, bVI).</li>\n                        <li>Try: ii‚ÄìV‚ÄìI or IV‚ÄìV‚ÄìI for clear motion.</li>\n                      </ul>\n                      <h4 className=\"mt-3 font-medium\">Shaped vs. Sounding (Capo)</h4>\n                      <ul className=\"mt-1 list-disc pl-5 space-y-1 text-sm\">\n                        <li>Shaped: labels show the shapes you fret after capo.</li>\n                        <li>Sounding: labels show the actual pitch you hear.</li>\n                      </ul>\n                    </InfoDot>\n                  </span>\n                </H3>\n                <DiatonicCapoTable\n                  selectedId={selectedCellId}\n                  onSelectId={(id)=> setSelectedCellId(id)}\n                  onPick={async ({ id, pcs, isRightClick })=>{\n                    // Âè≥„ÇØ„É™„ÉÉ„ÇØ„ÅÆÂ†¥Âêà„ÅØ„Ç≥„Éº„ÉâÈÄ≤Ë°å„Å´ËøΩÂä†\n                    if (isRightClick) {\n                      // „ÉÄ„Ç§„Ç¢„Éà„Éã„ÉÉ„ÇØ„ÉÜ„Éº„Éñ„É´„Åã„Çâ„Ç≥„Éº„ÉâÂêç„ÇíÂèñÂæó\n                      const selectedKey = useAnalysisStore.getState().selectedKey;\n                      const selectedScale = useAnalysisStore.getState().selectedScale;\n                      if (!selectedKey || !selectedScale) return;\n                      \n                      let st = selectedScale.type as any;\n                      let ivs = (SCALE_INTERVALS as any)[st] ?? [];\n                      if (ivs.length !== 7) {\n                        const parent = parentModeOf(st);\n                        if (parent) ivs = (SCALE_INTERVALS as any)[parent] ?? [];\n                      }\n                      if (ivs.length !== 7) return;\n                      \n                      const tris = diatonicTriads({ tonicPc: selectedKey.tonic, scaleIntervals: ivs });\n                      const degreeIndex = parseInt(id.replace('open-', ''));\n                      const triad = tris[degreeIndex];\n                      if (!triad) return;\n                      \n                      const chordSym = triadToChordSym({ rootPc: triad.rootPc, quality: triad.quality });\n                      const newSlots = [...slots];\n                      newSlots[cursorIndex] = chordSym;\n                      setSlots(newSlots);\n                      if (cursorIndex < 11) setCursorIndex(cursorIndex + 1);\n                      track('diatonic_pick', { page:'find-key', action: 'right_click_add' });\n                      return;\n                    }\n                    \n                    // Âêå„Åò„Çª„É´„ÇíÂÜçÈÅ∏Êäû ‚Üí „É™„Çª„ÉÉ„ÉàÔºà„Çπ„Ç±„Éº„É´„Éà„Éº„É≥„ÅÆ„ÅøË°®Á§∫„Å´Êàª„ÅôÔºâ\n                    if (selectedCellId === id) {\n                      setOverlayChordNotes(null);\n                      setSelectedCellId(null);\n                      resetForms();\n                      return;\n                    }\n                    const mainNotes = pcs.map(pc => PITCHES[pc] as string);\n                    setOverlayChordNotes(mainNotes);\n                    setSelectedCellId(id);\n                    resetForms();\n                    track('diatonic_pick', { page:'find-key' });\n                    // ÂíåÈü≥ÂÜçÁîüÔºà„Éî„ÉÉ„ÉÅ„ÇØ„É©„Çπ‚ÜíC4Âü∫Ê∫ñ„ÅÆÂÆüÈü≥„Å´Â§âÊèõ„Åó„Å¶3Èü≥ÂêåÊôÇÔºâ\n                    try {\n                      await player.resume();\n                      const midis = pcs.map(pc => 60 + (pc % 12));\n                      player.playChord(midis, 'lightStrum', 260);\n                    } catch {}\n                  }}\n                />\n              </section>\n              \n              {/* === Roman (hide for non-heptatonic scales) === */}\n              {isHeptatonic && (\n                <>\n                  <H3>Roman</H3>\n                  <div ref={romanBoxRef} className=\"rounded-md border px-3 py-2\" aria-live=\"polite\" data-testid=\"roman-row\">\n                    <div className=\"flex-1 overflow-x-auto whitespace-nowrap text-lg md:text-xl tracking-wide\">\n                      {romanLine.length === 0 ? (\n                        <span>-</span>\n                      ) : (\n                        romanLine.map((tok, i) => (\n                          <React.Fragment key={`rom-${i}`}>\n                            <span\n                              data-idx={i}\n                              className={romanHL && i >= romanHL.start && i <= romanHL.end ? 'roman-mark' : undefined}\n                            >\n                              {String(tok || '').toUpperCase()}\n                            </span>\n                            {i < romanLine.length - 1 ? <span aria-hidden className=\"mx-1\">‚Äì</span> : null}\n                          </React.Fragment>\n                        ))\n                      )}\n                    </div>\n                  </div>\n                </>\n              )}\n\n              {/* Patterns */}\n              {patternHits.length > 0 && (\n                <div className=\"mt-2 flex flex-wrap items-center gap-2\">\n                  <span className=\"text-xs opacity-70\">Patterns</span>\n                  {(() => {\n                    const h = patternHits[0];\n                    const idToEn: Record<string, any> = {\n                      'doo-wop': 'dooWop',\n                      'axis': 'axis',\n                      'canon': 'canon',\n                      'ii-V-I': 'twoFiveOne',\n                      'turnaround': 'turnaround',\n                      'andalusian': 'andalusian',\n                      'authentic': 'authentic',\n                      'plagal': 'plagal',\n                      'deceptive': 'deceptive',\n                    };\n                    const en = idToEn[h.id] ? patternInfoEN(idToEn[h.id]) : null;\n                    const label = en?.label || upperRomansInParens(h.name).replace(/\\(I‚Äìvi‚ÄìIV‚ÄìV\\)/, \"(I‚ÄìVI‚ÄìIV‚ÄìV)\");\n                    const summary = en?.summary || (h.summary || h.name);\n                    const isActive = !!(romanHL && romanHL.start === h.start && romanHL.end === h.end);\n                    return (\n                      <>\n                        <button\n                          key={`${h.id}-0`}\n                          type=\"button\"\n                          className={[\"text-sm leading-tight font-medium hover:opacity-80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400/50 rounded\"].join(' ')}\n                          title={summary}\n                          onClick={() => {\n                            setRomanHL(prev => (prev && prev.start === h.start && prev.end === h.end)\n                              ? null\n                              : { start: Math.max(0, h.start), end: Math.max(h.start, Math.min(romanLine.length - 1, h.end)) }\n                            );\n                            requestAnimationFrame(() => {\n                              const box = romanBoxRef.current;\n                              if (!box) return;\n                              const mark = box.querySelector(`[data-idx=\"${h.start}\"]`) as HTMLElement | null;\n                              if (mark) box.scrollLeft = Math.max(0, mark.offsetLeft - 12);\n                            });\n                          }}\n                        >\n                          {label}\n                        </button>\n                        <InfoDot ariaLabel={`${label} ‚Äì info`} text={`${label}\\n\\n${summary}`} />\n                      </>\n                    );\n                  })()}\n                </div>\n              )}\n\n              {/* Cadence row (keep label in sync with Patterns) */}\n              {(cadences.length > 0 || fallbackCadence) && (\n                <div className=\"mt-2 flex flex-wrap items-center gap-2\">\n                  <span className=\"text-xs opacity-70\">Cadence</span>\n                  {(() => {\n                    const c: any = cadences[0] ?? fallbackCadence;\n                    const t = c?.type ?? c; // 'perfect' | 'deceptive' | 'half'\n                    const tail = c?.tail ?? c?.tailRoman;\n                    const label = formatCadenceShort(t, tail);\n                    return (\n                      <span className=\"inline-flex items-center gap-1.5 text-sm leading-tight\">\n                        <span className=\"font-medium\">{label}</span>\n                        <InfoDot text={cadenceTooltip(t)} />\n                      </span>\n                    );\n                  })()}\n                </div>\n              )}\n              \n              \n              {/* Capo block removed (feature gated off) */}\n              \n              \n              {/* link to open in chords removed per spec */}\n                </div>\n        </section>\n      <section className=\"ot-card\" aria-label=\"Ad\">\n        <AdSlot page=\"chord_progression\" format=\"horizontal\" />\n      </section>\n      \n      {/* Preset Popup */}\n      {showPresetPopup && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\" style={{ backdropFilter: 'blur(4px)' }}>\n          <div ref={presetPopupRef} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">Load Preset</h3>\n            \n            {/* Key selector */}\n            <div className=\"mb-4\">\n              <label className=\"text-xs opacity-70 mb-1 block\">Key</label>\n              <div className=\"flex flex-wrap gap-1\">\n                {['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'].map(k => (\n                  <button\n                    key={k}\n                    className={`chip ${presetKey === k ? 'chip--active' : ''}`}\n                    onClick={() => setPresetKey(k)}\n                  >\n                    {k}\n                  </button>\n                ))}\n              </div>\n            </div>\n            \n            {/* Preset buttons */}\n            <div className=\"space-y-2 max-h-[60vh] overflow-y-auto\">\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-V-vi-IV', ['‚Ö†', '‚Ö§', '‚Ö•m', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö§‚Äì‚Ö•m‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Pop progression</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('ii-V-I', ['‚Ö°m', '‚Ö§', '‚Ö†'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö°m‚Äì‚Ö§‚Äì‚Ö†</div>\n                <div className=\"text-xs opacity-70\">Jazz turnaround</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('12-bar-blues', ['‚Ö†', '‚Ö†', '‚Ö†', '‚Ö†', '‚Ö£', '‚Ö£', '‚Ö†', '‚Ö†', '‚Ö§', '‚Ö£', '‚Ö†', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">12-bar Blues</div>\n                <div className=\"text-xs opacity-70\">Classic blues form (all 12 slots)</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-II', ['‚Ö†', '‚Ö°'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö°</div>\n                <div className=\"text-xs opacity-70\">Simple two-chord progression</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bVII-IV', ['‚Ö†', '‚ô≠‚Ö¶', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö¶‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Rock progression</div>\n              </button>\n              \n              {/* Êñ∞Ë¶èËøΩÂä†: 5„Å§„ÅÆÊúâÁî®„Å™„Éó„É™„Çª„ÉÉ„Éà */}\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('vi-IV-I-V', ['‚Ö•m', '‚Ö£', '‚Ö†', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö•m‚Äì‚Ö£‚Äì‚Ö†‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Emotional / Ballad (I-V-vi-IV„ÅÆÈÄÜÂõûËª¢)</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-vi-IV-V', ['‚Ö†', '‚Ö•m', '‚Ö£', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö•m‚Äì‚Ö£‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">50's progression / Doo-wop</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-IV-V', ['‚Ö†', '‚Ö£', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö£‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Three-chord song / Rock classic</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('vi-ii-V-I', ['‚Ö•m', '‚Ö°m', '‚Ö§', '‚Ö†'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö•m‚Äì‚Ö°m‚Äì‚Ö§‚Äì‚Ö†</div>\n                <div className=\"text-xs opacity-70\">Circle progression / Jazz standard</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bVII-bVI-bVII', ['‚Ö†', '‚ô≠‚Ö¶', '‚ô≠‚Ö•', '‚ô≠‚Ö¶'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö¶‚Äì‚ô≠‚Ö•‚Äì‚ô≠‚Ö¶</div>\n                <div className=\"text-xs opacity-70\">Mixolydian vamp / Rock anthem</div>\n              </button>\n              \n              {/* Êñ∞Ë¶èËøΩÂä†: „Åï„Çâ„Å´10Á®ÆÈ°û„ÅÆ„Éó„É™„Çª„ÉÉ„Éà */}\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-IVm-I-V', ['‚Ö†', '‚Ö£m', '‚Ö†', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö£m‚Äì‚Ö†‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Borrowed chord / Minor IV</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('vi-IV-I-III', ['‚Ö•m', '‚Ö£', '‚Ö†', '‚Ö¢'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö•m‚Äì‚Ö£‚Äì‚Ö†‚Äì‚Ö¢</div>\n                <div className=\"text-xs opacity-70\">Andalusian cadence / Spanish feel</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bIII-bVII-IV', ['‚Ö†', '‚ô≠‚Ö¢', '‚ô≠‚Ö¶', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö¢‚Äì‚ô≠‚Ö¶‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Modal interchange / Epic progression</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-iii-IV-V', ['‚Ö†', '‚Ö¢m', '‚Ö£', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö¢m‚Äì‚Ö£‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Classic progression / Beatles style</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-V-vi-iii-IV-I-IV-V', ['‚Ö†', '‚Ö§', '‚Ö•m', '‚Ö¢m', '‚Ö£', '‚Ö†', '‚Ö£', '‚Ö§'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö§‚Äì‚Ö•m‚Äì‚Ö¢m‚Äì‚Ö£‚Äì‚Ö†‚Äì‚Ö£‚Äì‚Ö§</div>\n                <div className=\"text-xs opacity-70\">Pachelbel's Canon / Wedding classic</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bVI-bVII-I', ['‚Ö†', '‚ô≠‚Ö•', '‚ô≠‚Ö¶', '‚Ö†'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö•‚Äì‚ô≠‚Ö¶‚Äì‚Ö†</div>\n                <div className=\"text-xs opacity-70\">Power ballad / 80s rock</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('vi-V-IV-III', ['‚Ö•m', '‚Ö§', '‚Ö£', '‚Ö¢'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö•m‚Äì‚Ö§‚Äì‚Ö£‚Äì‚Ö¢</div>\n                <div className=\"text-xs opacity-70\">Descending progression / Melancholic</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-IV-bVII-IV', ['‚Ö†', '‚Ö£', '‚ô≠‚Ö¶', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö£‚Äì‚ô≠‚Ö¶‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Folk/Country vamp</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-bVII-IV-I', ['‚Ö†', '‚ô≠‚Ö¶', '‚Ö£', '‚Ö†'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚ô≠‚Ö¶‚Äì‚Ö£‚Äì‚Ö†</div>\n                <div className=\"text-xs opacity-70\">Stadium anthem / Closing progression</div>\n              </button>\n              <button\n                className=\"w-full text-left px-4 py-2.5 rounded-lg border hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n                onClick={() => applyPreset('I-iii-vi-IV', ['‚Ö†', '‚Ö¢m', '‚Ö•m', '‚Ö£'], presetKey)}\n              >\n                <div className=\"font-medium\">‚Ö†‚Äì‚Ö¢m‚Äì‚Ö•m‚Äì‚Ö£</div>\n                <div className=\"text-xs opacity-70\">Smooth descent / R&B style</div>\n              </button>\n            </div>\n            \n            <button\n              className=\"mt-4 w-full px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600\"\n              onClick={() => setShowPresetPopup(false)}\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* M3.5: Toast notifications */}\n      {toastConfig && (\n        <Toast\n          message={toastConfig.message}\n          type={toastConfig.type}\n          ctaText={toastConfig.ctaText}\n          ctaHref={toastConfig.ctaHref}\n          ctaPlace={toastConfig.ctaPlace}\n          onClose={() => setToastConfig(null)}\n        />\n      )}\n    </main>\n  );\n}\n\nconst AdvSection: React.FC<{title:string; children:React.ReactNode}> = ({ title, children }) => (\n  <div>\n    <div className=\"text-xs text-black/60 dark:text-white/60 mb-1\">{title}</div>\n    <div className=\"adv-grid\">\n      {children}\n    </div>\n  </div>\n);\n\nconst Chip: React.FC<{label:string; onClick?:()=>void; disabled?:boolean; active?:boolean; small?:boolean}> = ({ label, onClick, disabled, active, small }) => (\n  <button\n    className={[\"chip\", small ? \"chip--sm\" : \"\", active ? \"chip--active\" : \"\", disabled ? \"chip--disabled\" : \"\"].join(\" \")}\n    onClick={onClick}\n    aria-disabled={disabled}\n  >\n    {label}\n  </button>\n);\n\n// moved to components/ui/InfoDot\n\n\n\n","import { create } from 'zustand';\nimport { Sketch } from '@/types/sketch';\nimport { loadAll, saveLocalFree, saveCloudPro } from '@/features/sketch/storage';\n\ntype SketchState = {\n  sketches: Sketch[];\n  currentSketch: Sketch | null;\n  isLoading: boolean;\n  error: string | null;\n\n  // Actions\n  loadSketches: () => void;\n  saveSketch: (sketch: Omit<Sketch, 'id' | 'createdAt' | 'updatedAt'>) => Promise<{ ok: boolean; reason?: string }>;\n  loadSketch: (id: string) => void;\n  deleteSketch: (id: string) => void;\n  duplicateSketch: (id: string) => void;\n  renameSketch: (id: string, name: string) => void;\n\n  // Auto-save\n  startAutoSave: (sketch: Sketch) => void;\n  stopAutoSave: () => void;\n};\n\nconst generateId = () => Math.random().toString(36).substr(2, 9);\n\nexport const useSketchStore = create<SketchState>((set, get) => ({\n  sketches: [],\n  currentSketch: null,\n  isLoading: false,\n  error: null,\n\n  loadSketches: () => {\n    set({ isLoading: true, error: null });\n    try {\n      const sketches = loadAll();\n      set({ sketches, isLoading: false });\n    } catch (error) {\n      set({ error: 'Failed to load sketches', isLoading: false });\n    }\n  },\n\n  saveSketch: async (sketchData) => {\n    const sketch: Sketch = {\n      ...sketchData,\n      id: generateId(),\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    // Free„É¶„Éº„Ç∂„Éº„ÅÆÂ†¥Âêà\n    const result = saveLocalFree(sketch);\n\n    if (result.ok) {\n      // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„ÅåÊõ¥Êñ∞„Åï„Çå„Åü„ÅÆ„Åß„ÄÅ„Çπ„Éà„Ç¢„ÇÇÊõ¥Êñ∞\n      const sketches = loadAll();\n      set({ sketches, currentSketch: sketch });\n      return { ok: true };\n    } else {\n      // Pro„É¶„Éº„Ç∂„Éº„ÅÆÂ†¥ÂêàÔºà„Çπ„Ç±„É´„Éà„É≥ÂÆüË£ÖÔºâ\n      try {\n        await saveCloudPro(sketch);\n        const sketches = loadAll();\n        set({ sketches, currentSketch: sketch });\n        return { ok: true };\n      } catch (error) {\n        return { ok: false, reason: 'cloud_save_failed' };\n      }\n    }\n  },\n\n  loadSketch: (id: string) => {\n    const sketches = get().sketches;\n    const sketch = sketches.find(s => s.id === id);\n    if (sketch) {\n      set({ currentSketch: sketch });\n    }\n  },\n\n  deleteSketch: (id: string) => {\n    const sketches = get().sketches.filter(s => s.id !== id);\n    localStorage.setItem('ot_sketches', JSON.stringify(sketches));\n    set({ sketches });\n\n    if (get().currentSketch?.id === id) {\n      set({ currentSketch: null });\n    }\n  },\n\n  duplicateSketch: (id: string) => {\n    const sketches = get().sketches;\n    const original = sketches.find(s => s.id === id);\n    if (original) {\n      const duplicate: Sketch = {\n        ...original,\n        id: generateId(),\n        name: `${original.name} Copy`,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n\n      const result = saveLocalFree(duplicate);\n      if (result.ok) {\n        const updatedSketches = loadAll();\n        set({ sketches: updatedSketches, currentSketch: duplicate });\n      }\n    }\n  },\n\n  renameSketch: (id: string, name: string) => {\n    const sketches = get().sketches.map(s =>\n      s.id === id ? { ...s, name, updatedAt: new Date().toISOString() } : s\n    );\n\n    localStorage.setItem('ot_sketches', JSON.stringify(sketches));\n    set({ sketches });\n\n    if (get().currentSketch?.id === id) {\n      set({ currentSketch: { ...get().currentSketch, name, updatedAt: new Date().toISOString() } });\n    }\n  },\n\n  startAutoSave: (sketch: Sketch) => {\n    // 3Áßí„Ç¢„Ç§„Éâ„É´Âæå„Å´Ëá™Âãï‰øùÂ≠ò\n    const timeoutId = setTimeout(() => {\n      const currentState = get();\n      if (currentState.currentSketch?.id === sketch.id) {\n        // Â§âÊõ¥„Åå„ÅÇ„Å£„ÅüÂ†¥Âêà„ÅÆ„Åø‰øùÂ≠ò\n        const updatedSketch = { ...sketch, updatedAt: new Date().toISOString() };\n        const result = saveLocalFree(updatedSketch);\n        if (result.ok) {\n          const sketches = loadAll();\n          set({ sketches, currentSketch: updatedSketch });\n        }\n      }\n    }, 3000);\n\n    // „Çø„Ç§„É†„Ç¢„Ç¶„ÉàID„Çí‰øùÊåÅÔºà„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„ÉóÁî®Ôºâ\n    return timeoutId;\n  },\n\n  stopAutoSave: () => {\n    // Ëá™Âãï‰øùÂ≠ò„Çí„Ç≠„É£„É≥„Çª„É´\n  },\n}));\n","\"use client\";\nimport { useEffect, useCallback } from 'react';\nimport { useCtaTracking } from '@/hooks/useCtaTracking';\n\nexport type ToastType = 'info' | 'success' | 'warning';\nexport type ToastCtaPlace = 'limit_toast' | 'png_toast';\n\nexport interface ToastProps {\n  message: string;\n  type?: ToastType;\n  ctaText?: string;\n  ctaHref?: string;\n  ctaPlace?: ToastCtaPlace;\n  onClose: () => void;\n  duration?: number;\n}\n\nconst TOAST_COLORS: Record<ToastType, string> = {\n  info: 'bg-blue-600',\n  success: 'bg-green-600',\n  warning: 'bg-orange-600',\n};\n\nconst DEFAULT_DURATION = 5000;\n\n/**\n * M3.5: Toast notification component\n * Displays temporary notifications with optional CTA\n * Auto-dismisses after duration (default 5s)\n */\nexport default function Toast({ \n  message, \n  type = 'info', \n  ctaText, \n  ctaHref, \n  ctaPlace,\n  onClose, \n  duration = DEFAULT_DURATION \n}: ToastProps) {\n  const { trackClick } = useCtaTracking();\n\n  useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(onClose, duration);\n      return () => clearTimeout(timer);\n    }\n  }, [duration, onClose]);\n\n  const handleCtaClick = useCallback(() => {\n    if (ctaPlace) {\n      trackClick(ctaPlace);\n    }\n  }, [ctaPlace, trackClick]);\n\n  const bgColor = TOAST_COLORS[type];\n\n  return (\n    <div \n      className=\"fixed bottom-20 sm:bottom-6 left-1/2 -translate-x-1/2 z-50 animate-slide-up max-w-md w-full mx-4\"\n      role=\"alert\"\n      aria-live=\"polite\"\n    >\n      <div className={`${bgColor} text-white rounded-lg shadow-2xl p-4 flex items-center justify-between gap-3`}>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"text-sm font-medium\">{message}</p>\n        </div>\n        {ctaText && ctaHref && (\n          <a\n            href={ctaHref}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex-shrink-0 px-3 py-1.5 text-sm font-medium bg-white/20 hover:bg-white/30 rounded transition-colors\"\n            onClick={handleCtaClick}\n          >\n            {ctaText}\n          </a>\n        )}\n        <button\n          onClick={onClose}\n          className=\"flex-shrink-0 w-6 h-6 flex items-center justify-center hover:bg-white/20 rounded transition-colors\"\n          aria-label=\"Close notification\"\n        >\n          ‚úï\n        </button>\n      </div>\n    </div>\n  );\n}\n\n","/**\n * Pro feature guard utilities\n * Defines which chord types require Pro subscription for adding to progression\n */\n\n/**\n * Chord quality types that require Pro subscription\n * - Altered Dominant: 7b9, 7#9, 7#11, 7b13, 7alt\n * - 13th extensions: 13, M13, m13\n * - Slash/On-Bass: detected via 'slash' flag\n */\nconst PRO_ONLY_QUALITIES = new Set([\n  // Altered Dominant\n  '7b9',\n  '7#9',\n  '7#11',\n  '7b13',\n  '7alt',\n  // 13thÁ≥ª\n  '13',\n  'M13',\n  'm13',\n]);\n\n/**\n * Check if a chord quality can be added to progression\n * @param quality - The chord quality string (e.g., '7b9', 'M13')\n * @param options - Options including isPro status and slash (on-bass) flag\n * @returns true if chord can be added, false if Pro subscription required\n */\nexport function canAddQuality(\n  quality: string,\n  options: { isPro: boolean; hasSlash?: boolean }\n): boolean {\n  const { isPro, hasSlash } = options;\n  \n  // Pro users can add everything\n  if (isPro) return true;\n  \n  // Slash/On-Bass requires Pro\n  if (hasSlash) return false;\n  \n  // Check if quality is in Pro-only set\n  return !PRO_ONLY_QUALITIES.has(quality);\n}\n\n/**\n * Check if a chord quality should show Pro badge\n * @param quality - The chord quality string\n * @param hasSlash - Whether slash/on-bass is active\n * @returns true if Pro badge should be shown\n */\nexport function shouldShowProBadge(quality: string, hasSlash?: boolean): boolean {\n  return PRO_ONLY_QUALITIES.has(quality) || !!hasSlash;\n}\n\n/**\n * Get the reason why a chord type is Pro-only (for telemetry/debugging)\n * @param quality - The chord quality string\n * @param hasSlash - Whether slash/on-bass is active\n * @returns Reason string or null if not Pro-only\n */\nexport function getProOnlyReason(quality: string, hasSlash?: boolean): string | null {\n  if (hasSlash) return 'slash';\n  if (quality.includes('alt')) return 'altered';\n  if (quality.includes('13')) return '13th';\n  if (PRO_ONLY_QUALITIES.has(quality)) return 'advanced';\n  return null;\n}\n\n\n","export const QUICK_QUALITIES = [\"M\",\"m\",\"7\",\"M7\",\"m7\",\"sus4\",\"dim\"] as const;\n\n// Advanced categories\nexport const ADV_EXTENSIONS = [\n  \"6\",\"m6\",\"9\",\"m9\",\"11\",\"M11\",\"13\",\"M13\"\n] as const;\n\nexport const ADV_ALTERED_DOM = [\n  \"7b5\",\"7#5\",\"7b9\",\"7#9\",\"7#11\",\"7b13\",\"7alt\"\n] as const;\n\nexport const ADV_DIM_VARIANTS = [\n  \"dim7\",\"m7b5\"\n] as const;\n\nexport const ADV_SUS_ADDS = [\n  \"sus2\",\"add9\",\"add11\",\"add13\",\"6/9\"\n] as const;\n\nexport const ADV_AUG_MAJMIN = [\n  \"aug\",\"mM7\"\n] as const;\n\nexport const ADVANCED_QUALITIES = [\n  ...ADV_EXTENSIONS,\n  ...ADV_ALTERED_DOM,\n  ...ADV_DIM_VARIANTS,\n  ...ADV_SUS_ADDS,\n  ...ADV_AUG_MAJMIN,\n  \"/bass\",\n] as const;\n\nexport type Quality = typeof QUICK_QUALITIES[number] | typeof ADVANCED_QUALITIES[number];\n\nexport const isAdvanced = (q: string): boolean => (ADVANCED_QUALITIES as readonly string[]).includes(q);\nexport const isQuick = (q: string): boolean => (QUICK_QUALITIES as readonly string[]).includes(q);\n\nexport const BASS_NOTES = [\"C\",\"C#\",\"D\",\"Eb\",\"E\",\"F\",\"F#\",\"G\",\"Ab\",\"A\",\"Bb\",\"B\"] as const;\nexport type BassNote = typeof BASS_NOTES[number];\n\n\n",null,null,null,null,null,null,null,null,null,"export type BaseKind = \"major\" | \"minor\" | \"dominant\" | \"diminished\" | \"augmented\" | \"unknown\";\n\nexport const getBaseKind = (q: string): BaseKind => {\n  if (q.startsWith(\"M\") || q === \"M\") return \"major\";\n  if (q.startsWith(\"m\")) return \"minor\";\n  if (q === \"7\" || /^7/.test(q) || [\"9\",\"11\",\"13\"].includes(q)) return \"dominant\";\n  if (q.startsWith(\"dim\") || q === \"m7b5\") return \"diminished\";\n  if (q === \"aug\") return \"augmented\";\n  return \"unknown\";\n};\n\nexport const preferredBase = (candidate: string): BaseKind | \"any\" => {\n  if ([\"M9\",\"M11\",\"M13\",\"6\"].includes(candidate)) return \"major\";\n  if ([\"m6\",\"m9\"].includes(candidate)) return \"minor\";\n  if ([\"7b5\",\"7#5\",\"7b9\",\"7#9\",\"7#11\",\"7b13\",\"7alt\",\"9\",\"11\",\"13\"].includes(candidate)) return \"dominant\";\n  if ([\"dim7\",\"m7b5\"].includes(candidate)) return \"diminished\";\n  if ([\"add9\",\"add11\",\"add13\",\"sus2\",\"6/9\"].includes(candidate)) return \"any\";\n  if (candidate === \"aug\" || candidate === \"mM7\") return \"any\";\n  return \"any\";\n};\n\nexport const isCompatible = (currentBase: BaseKind, candidate: string): boolean => {\n  const pref = preferredBase(candidate);\n  if (pref === \"any\") return true;\n  if (currentBase === \"unknown\") return true;\n  if (currentBase === \"major\" && pref === \"minor\") return false;\n  if (currentBase === \"minor\" && pref === \"major\") return false;\n  if (currentBase !== \"dominant\" && [\"7b5\",\"7#5\",\"7b9\",\"7#9\",\"7#11\",\"7b13\",\"7alt\",\"9\",\"11\",\"13\"].includes(candidate)) {\n    return false;\n  }\n  if (currentBase !== \"diminished\" && [\"dim7\",\"m7b5\"].includes(candidate)) return false;\n  return true;\n};\n\n\n\n","import { PATTERNS } from \"./patterns\";\n\nexport function normalizeRomanToken(tok: string): string {\n  const t = (tok || \"\").toString().trim().toUpperCase();\n  // Remove qualities/extensions, keep degree with optionally B/#\n  return t\n    .replace(/MAJ7|M7|7|MAJ|MIN|MI|DIM|AUG|SUS\\d?|ADD\\d+|√ò|O/g, \"\")\n    .replace(/\\(|\\)/g, \"\")\n    .replace(/[^IVB#]+/g, \"\")\n    .replace(/B/g, \"B\");\n}\n\nexport type Match = {\n  id: string; name: string; summary: string;\n  start: number; end: number; // [start, end)\n};\n\nexport function matchPatterns(\n  romanLine: string[], mode: 'major'|'minor'\n): Match[] {\n  const rom = romanLine.map(normalizeRomanToken);\n  const hits: Match[] = [];\n\n  for (const p of PATTERNS) {\n    const seqs = [p.seq, ...(p.variants ?? [])].map(s => s.map(normalizeRomanToken));\n    for (const seq of seqs) {\n      const L = seq.length;\n      // slide over roman tokens\n      for (let i = 0; i + L <= rom.length; i++) {\n        let ok = true;\n        for (let k = 0; k < L; k++) {\n          if (rom[i + k] !== seq[k]) { ok = false; break; }\n        }\n        if (ok) {\n          hits.push({ id: p.id, name: p.name, summary: p.tooltip, start: i, end: i + L });\n          break; // prefer first longest match for this pattern\n        }\n      }\n    }\n  }\n  hits.sort((a,b)=> (b.end-b.start)-(a.end-a.start));\n  return dedupe(hits);\n}\n\nfunction dedupe(xs: Match[]): Match[] {\n  const res: Match[] = [];\n  for (const m of xs) {\n    if (res.some(r => !(m.end <= r.start || r.end <= m.start))) continue;\n    res.push(m);\n  }\n  return res;\n}\n\n\n","export type CadenceType = 'perfect' | 'deceptive' | 'half' | null;\n\nexport function formatCadenceLabel(\n  t: CadenceType,\n  tailRoman?: { from?: string; to?: string }\n): string {\n  if (!t) return 'Cadence: ‚Äî';\n  if (t === 'perfect')   return `Cadence: Perfect (${tailRoman?.from ?? 'V'} ‚Üí ${tailRoman?.to ?? 'I'})`;\n  if (t === 'deceptive') return `Cadence: Deceptive (${tailRoman?.from ?? 'V'} ‚Üí ${tailRoman?.to ?? 'vi'})`;\n  // half cadence ends on V\n  return `Cadence: Half (${tailRoman?.from ? `${tailRoman.from} ‚Üí ` : '‚Ä¶ ‚Üí '}V)`;\n}\n\nexport function cadenceTooltip(t: CadenceType): string {\n  if (!t) return 'No cadence detected.';\n  if (t === 'perfect')   return 'Resolves to the Tonic: V ‚Üí I. Feels fully resolved.';\n  if (t === 'deceptive') return 'Surprises by avoiding I: V ‚Üí vi (or similar).';\n  return 'Phrase ends on the Dominant: ‚Ä¶ ‚Üí V. Feels unresolved.';\n}\n\n// Short inline label for Roman box\nexport function formatCadenceShort(\n  t: CadenceType,\n  tail?: { from?: string; to?: string }\n): string {\n  if (!t) return '';\n  if (t === 'perfect')   return `Perfect (${tail?.from ?? 'V'} ‚Üí ${tail?.to ?? 'I'})`;\n  if (t === 'deceptive') return `Deceptive (${tail?.from ?? 'V'} ‚Üí ${tail?.to ?? 'vi'})`;\n  return `Half (${tail?.from ? `${tail.from} ‚Üí ` : '‚Ä¶ ‚Üí '}V)`;\n}\n\n\n","import { ChordSpec, ChordContext } from './types';\n\nexport function normalizeChordSpec(input: ChordSpec, ctx: ChordContext, options: {autoCorrect11th?: boolean} = {}){\n  const spec: ChordSpec = JSON.parse(JSON.stringify(input));\n  const warnings: string[] = [];\n\n  // dom „ÅØ 7th ÂâçÊèê\n  if (spec.family === 'dom') spec.seventh = '7';\n\n  // Pro gating\n  if (ctx.plan === 'free') {\n    // Pro: Tension, Alter, 6/9, /bass „Çí„É≠„ÉÉ„ÇØ\n    if (spec.extMode === 'tension') spec.ext = { nine:false, eleven:false, thirteen:false };\n    spec.alt = {};\n    // 6/9 „ÅØ Pro Â∞ÇÁî®Ôºà6 „Å® add9 „ÅÆÂêåÊôÇ‚Üí6/9 Â§âÊèõ„ÇíÁ¶ÅÊ≠¢Ôºâ\n    // slash „ÇÇÁ¶ÅÊ≠¢\n    if (spec.slash) spec.slash = null;\n  }\n\n  // Add/Tension Êéí‰ªñ\n  if (spec.extMode === 'add') {\n    spec.ext.nine = spec.ext.eleven = spec.ext.thirteen = false;\n  } else {\n    spec.ext.add9 = spec.ext.add11 = spec.ext.add13 = false;\n  }\n\n  // 13 „ÅØ 9 „ÇíÂÜÖÂåÖ\n  if (spec.ext.thirteen) spec.ext.nine = true;\n\n  // sus2/sus4 Áõ∏‰∫íÊéí‰ªñÔºàÂæåÂãù„Å°Ôºâ\n  if (spec.sus === 'sus2' && input.sus === 'sus4') spec.sus = 'sus4';\n  if (spec.sus === 'sus4' && input.sus === 'sus2') spec.sus = 'sus2';\n\n  // maj/dom „ÅÆ 11 „ÅØÂõûÈÅøË≠¶ÂëäÔºà„Ç™„Éó„Ç∑„Éß„É≥„ÅßËá™ÂãïÊòØÊ≠£Ôºâ\n  if (spec.ext.eleven) {\n    if (spec.family === 'maj') {\n      if (options.autoCorrect11th) {\n        // Ëá™ÂãïÊòØÊ≠£: 11 ‚Üí #11 (Lydian)\n        spec.ext.eleven = false;\n        if (spec.alt) {\n          spec.alt.sharpEleven = true;\n        } else {\n          spec.alt = { sharpEleven: true };\n        }\n        warnings.push('11 ‚Üí #11 „Å´Ëá™ÂãïË™øÊï¥„Åó„Åæ„Åó„ÅüÔºà„É°„Ç∏„É£„Éº„Åß„ÅØavoidÈü≥„ÅÆ„Åü„ÇÅÔºâ„ÄÇ');\n      } else {\n        warnings.push('„É°„Ç∏„É£„Éº„Åß„ÅÆ11„ÅØ3Â∫¶„Å®ÊøÅ„Çä„Åæ„Åô„ÄÇ#11ÔºàLydianÔºâ„ÇíÊ§úË®é„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');\n      }\n    }\n    if (spec.family === 'dom') {\n      if (options.autoCorrect11th) {\n        // Ëá™ÂãïÊòØÊ≠£: 11 ‚Üí #11 „Åæ„Åü„ÅØ sus4 „ÅÆÊèêÊ°àÔºà„Åì„Åì„Åß„ÅØ#11„ÇíÈÅ∏ÊäûÔºâ\n        spec.ext.eleven = false;\n        if (spec.alt) {\n          spec.alt.sharpEleven = true;\n        } else {\n          spec.alt = { sharpEleven: true };\n        }\n        warnings.push('11 ‚Üí #11 „Å´Ëá™ÂãïË™øÊï¥„Åó„Åæ„Åó„ÅüÔºà„Éâ„Éü„Éä„É≥„Éà„Åß„ÅØ3Â∫¶„Å®Ë°ùÁ™Å„Åô„Çã„Åü„ÇÅÔºâ„ÄÇ');\n      } else {\n        warnings.push('„Éâ„Éü„Éä„É≥„Éà„Åß„ÅÆ11„ÅØ3Â∫¶„Å®Ë°ùÁ™Å„Åó„Åæ„Åô„ÄÇ#11 „Åæ„Åü„ÅØ sus4 „ÇíÊ§úË®é„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');\n      }\n    }\n  }\n\n  // Èùû dom „Åß Alterations „ÅØÁÑ°Âäπ\n  if (spec.family !== 'dom') spec.alt = {};\n\n  // maj7 + sus „ÅØÊó¢ÂÆö„ÅßÁÑ°Âäπ\n  if (spec.seventh === 'maj7' && spec.sus) {\n    warnings.push('maj7 with sus is uncommon; use sus4(maj7) in advanced mode.');\n    spec.sus = null;\n  }\n\n  // Tension „ÅØ 7th „ÇíÊåÅ„Å§ÊôÇ„ÅÆ„ÅøÊ¥ªÊÄß\n  if (spec.extMode === 'tension' && !['7','maj7','m7'].includes(spec.seventh)) {\n    spec.ext = { nine:false, eleven:false, thirteen:false };\n  }\n\n  return { spec, warnings } as const;\n}\n\n\n\n","import { ChordSpec, ChordContext } from './types';\n\nexport function formatChordSymbol(s: ChordSpec, ctx: ChordContext): string {\n  const parts: string[] = [s.root];\n\n  // family: output english by default\n  const fam =\n    s.family === 'maj' ? '' :\n    s.family === 'min' ? 'm' :\n    s.family === 'dom' ? '' :\n    s.family === 'sus' ? 'sus' :\n    s.family === 'dim' ? 'dim' :\n    s.family === 'aug' ? 'aug' : '5';\n  parts.push(fam);\n\n  // seventh\n  const sev =\n    s.seventh === 'maj7' ? (ctx.notationStyle==='compact' ? 'M7' : 'maj7') :\n    s.seventh === '7'    ? '7' :\n    s.seventh === 'm7'   ? 'm7' :\n    s.seventh === '6'    ? '6' :\n    s.seventh === 'm7b5' ? 'm7b5' :\n    s.seventh === 'dim7' ? 'dim7' : '';\n  parts.push(sev);\n\n  // extensions\n  if (s.extMode === 'tension') {\n    if (s.ext.thirteen) parts.push('13');\n    else if (s.ext.eleven) parts.push('11');\n    else if (s.ext.nine) parts.push('9');\n  } else {\n    const adds = [s.ext.add9 && 'add9', s.ext.add11 && 'add11', s.ext.add13 && 'add13'].filter(Boolean) as string[];\n    if (adds.length) parts.push(`(${adds.join(',')})`);\n  }\n\n  // alterations\n  const alt = [s.alt.b9 && 'b9', s.alt.s9 && '#9', s.alt.s11 && '#11', s.alt.b13 && 'b13']\n    .filter(Boolean).join('');\n  parts.push(alt);\n\n  // sus\n  if (s.sus) parts.push(s.sus);\n\n  // /bass\n  if (s.slash) parts.push(`/${s.slash}`);\n\n  return parts.join('');\n}\n\n\n\n",null,"// src/features/sketch/storage.ts\nimport { Sketch } from '@/types/sketch';\n\nconst KEY = 'ot_sketches';\nconst FREE_LIMIT = 3;\n\nexport const loadAll = (): Sketch[] =>\n  JSON.parse(localStorage.getItem(KEY) || '[]');\n\nexport const saveLocalFree = (sk: Sketch): { ok: boolean; reason?: string } => {\n  const list = loadAll().filter(s => s.id !== sk.id);\n  list.unshift(sk); // ÂÖàÈ†≠„ÅåÊúÄÊñ∞\n  if (list.length > FREE_LIMIT) {\n    // LRUË∂ÖÈÅé ‚Üí ProË™òÂ∞é\n    localStorage.setItem(KEY, JSON.stringify(list.slice(0, FREE_LIMIT)));\n    return { ok: false, reason: 'limit_exceeded' };\n  }\n  localStorage.setItem(KEY, JSON.stringify(list));\n  return { ok: true };\n};\n\n// ProÂêåÊúü„ÅØ„Çπ„Ç±„É´„Éà„É≥ÔºàÂÆüË£ÖÊ∏à„ÅøAPI„Åå„ÅÇ„Çå„Å∞Â∑Æ„ÅóÊõø„ÅàÔºâ\nexport const saveCloudPro = async (sk: Sketch) => {\n  // await fetch('/api/sketch', { method:'POST', body: JSON.stringify(sk) })\n  return { ok: true };\n};\n\n// Free/Pro„ÅÆÂ¢ÉÁïå„ÅØSSOT„ÅÆÈÄö„Çä„ÄÇ‰øùÂ≠ò/Âëº„Å≥Âá∫„Åó/Ëá™Âãï‰øùÂ≠ò„ÅÆ3ÁÇπ„ÅåM1„ÅÆÊ†∏„ÄÇ\n","// src/features/sketch/useSketch.ts\nimport { useEffect, useRef, useState } from 'react';\nimport { Sketch } from '@/types/sketch';\nimport * as store from './storage';\nimport * as t from '@/lib/telemetry';\n\nexport const useSketch = (isPro: boolean) => {\n  const [sketch, setSketch] = useState<Sketch | null>(null);\n  const timer = useRef<number | null>(null);\n\n  const scheduleAutosave = () => {\n    if (timer.current) window.clearTimeout(timer.current);\n    timer.current = window.setTimeout(() => {\n      if (!sketch) return;\n      (async () => {\n        const r = isPro ? await store.saveCloudPro(sketch) : store.saveLocalFree(sketch);\n        if (!r.ok && r.reason === 'limit_exceeded') {\n          t.track('project_limit_warn', { page: 'chord_progression' });\n          // UIÂÅ¥„Åß„Äå3‰ª∂„Åæ„Åß„Äç„Éà„Éº„Çπ„ÉàË°®Á§∫\n        } else {\n          t.track('save_project', { page: 'chord_progression' });\n        }\n      })();\n    }, 3000); // 3Áßí„Ç¢„Ç§„Éâ„É´\n  };\n\n  // Áä∂ÊÖã„ÅåÂ§â„Çè„Çã„Åü„Å≥„Å´Ëá™Âãï‰øùÂ≠ò„Çí‰∫àÁ¥Ñ\n  useEffect(() => { scheduleAutosave(); /* eslint-disable-next-line */ }, [sketch]);\n\n  return { sketch, setSketch };\n};\n","// src/lib/export/png.ts\nimport * as t from '@/lib/telemetry';\nimport { toPng } from 'html-to-image';\n\nlet exporting = false;\n\nexport async function exportPng(el: HTMLElement, theme:'auto'|'light'|'dark'='auto') {\n  if (exporting) return; // ÈáçË§áÈò≤Ê≠¢\n  exporting = true;\n  try {\n    // ‰∏ÄÊôÇÁöÑ„Å´ÂèØË¶ñÂåñ„Åó„Å¶„É¨„É≥„ÉÄ„É™„É≥„Ç∞„ÇíÁ¢∫ÂÆü„Å´„Åô„Çã\n    const originalOpacity = el.style.opacity;\n    const originalVisibility = el.style.visibility;\n    el.style.opacity = '1';\n    el.style.visibility = 'visible';\n    \n    // FretboardÂÜÖ„ÅÆÂÖ®„Å¶„ÅÆ„ÉÜ„Ç≠„Çπ„ÉàË¶ÅÁ¥†„ÇíÂº∑Âà∂ÁöÑ„Å´ÈªíËâ≤„Å´„Åó„ÄÅ„Éï„É¨„ÉÉ„ÉàÁï™Âè∑„Éú„ÉÉ„ÇØ„Çπ„ÅÆËÉåÊôØ„ÇíË™øÊï¥\n    const allElements = el.querySelectorAll('*');\n    const originalStyles: Array<{ elem: HTMLElement; color: string; fill: string; bg: string }> = [];\n    allElements.forEach((elem) => {\n      const htmlElem = elem as HTMLElement;\n      const originalColor = htmlElem.style.color;\n      const originalFill = htmlElem.style.fill;\n      const originalBg = htmlElem.style.background;\n      originalStyles.push({ elem: htmlElem, color: originalColor, fill: originalFill, bg: originalBg });\n      \n      // ÂÖ®„Å¶„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„ÇíÈªíËâ≤„Å´\n      htmlElem.style.color = '#000000';\n      if (htmlElem.tagName === 'text' || htmlElem.tagName === 'tspan') {\n        htmlElem.style.fill = '#000000';\n      }\n      \n      // „Éï„É¨„ÉÉ„ÉàÁï™Âè∑„ÇíÂê´„ÇÄspanË¶ÅÁ¥†„ÅÆËÉåÊôØ„ÇíËñÑ„ÅÑ„Ç∞„É¨„Éº„Å´Â§âÊõ¥\n      if (htmlElem.tagName === 'SPAN' && htmlElem.className.includes('inline-block')) {\n        const text = htmlElem.textContent?.trim();\n        if (text && /^\\d+$/.test(text)) {\n          htmlElem.style.background = '#f3f4f6'; // ËñÑ„ÅÑ„Ç∞„É¨„Éº (Tailwind gray-100Áõ∏ÂΩì)\n          htmlElem.style.color = '#000000';\n        }\n      }\n    });\n    \n    // „É¨„É≥„ÉÄ„É™„É≥„Ç∞ÂÆå‰∫Ü„ÇíÂæÖ„Å§\n    await new Promise(resolve => setTimeout(resolve, 150));\n    \n    el.dataset.export = theme; // CSS„Åß„ÉÜ„Éº„ÉûÂèçËª¢„ÇíÂà∂Âæ°\n    const dataUrl = await toPng(el, { pixelRatio: 2, backgroundColor: '#ffffff', cacheBust: true });\n    \n    // ÂÖÉ„Å´Êàª„Åô\n    el.style.opacity = originalOpacity;\n    el.style.visibility = originalVisibility;\n    originalStyles.forEach(({ elem, color, fill, bg }) => {\n      elem.style.color = color;\n      elem.style.fill = fill;\n      elem.style.background = bg;\n    });\n    \n    const a = document.createElement('a');\n    a.href = dataUrl; a.download = 'ot-progression.png'; a.click();\n    t.track('export_png', { page: 'chord_progression', ok: true });\n  } catch (e) {\n    t.track('export_png', { page: 'chord_progression', ok: false, err: String(e) });\n  } finally {\n    el.removeAttribute('data-export');\n    exporting = false;\n  }\n}\n","// Roman numeral utilities for chord degree display\n// Mode and functions are intentionally minimal and self-contained.\n\nimport { PITCHES, noteToPc } from \"../theory\";\n\nexport type Mode = \"major\" | \"minor\";\n\n// Ionian/Aeolian degree maps ‚Üí roman index\nconst DEGREE_TO_INDEX_MAJOR: Record<number, number> = {\n  0: 0, // I\n  2: 1, // ii\n  4: 2, // iii\n  5: 3, // IV\n  7: 4, // V\n  9: 5, // vi\n  11: 6, // vii¬∞\n};\n\nconst DEGREE_TO_INDEX_MINOR: Record<number, number> = {\n  0: 0,  // i\n  2: 1,  // ii¬∞\n  3: 2,  // III\n  5: 3,  // iv\n  7: 4,  // v\n  8: 5,  // VI\n  10: 6, // VII\n};\n\nexport const ROMAN_NUMERALS_MAJOR = [\"I\", \"ii\", \"iii\", \"IV\", \"V\", \"vi\", \"vii¬∞\"] as const;\nexport const ROMAN_NUMERALS_MINOR = [\"i\", \"ii¬∞\", \"III\", \"iv\", \"v\", \"VI\", \"VII\"] as const;\n\nfunction isMaj7(sym: string): boolean {\n  return /maj7|M7/.test(sym);\n}\n\nfunction hasGeneric7(sym: string): boolean {\n  // append \"7\" for dominant/mi7 etc. but avoid maj7 and m7b5/dim7\n  if (isMaj7(sym)) return false;\n  if (/m7b5|√∏|dim7/.test(sym)) return false;\n  return /(\\b|[^a-zA-Z])7(?![b#0-9])/i.test(sym) || /\\bm7\\b/i.test(sym);\n}\n\nfunction normalizePcName(input: string): string {\n  const pc = noteToPc(input);\n  return PITCHES[pc] ?? input;\n}\n\ntype RomanOptions = {\n  showQuality?: boolean; // append M7/7 markers\n  accidentalsForNonDiatonic?: boolean; // prefer bII/#iv instead of (F#)\n  uppercase?: boolean; // force uppercase numerals\n};\n\nexport function toRoman(chordSym: string, keyRoot: string, mode: Mode, opts: RomanOptions = {}): string {\n  // Default: prefer diatonic mapping; only use accidentals whenÊòéÁ§∫\n  const { showQuality = true, accidentalsForNonDiatonic = false } = opts;\n  if (!chordSym || !keyRoot) return \"\";\n  const keyPc = noteToPc(keyRoot);\n\n  // Parse root (head of symbol, before slash)\n  const head = chordSym.split(\"/\")[0];\n  const m = head.match(/^([A-G](?:#|b)?)(.*)$/i);\n  if (!m) return chordSym;\n  const chordRoot = normalizePcName(m[1].toUpperCase());\n  const rest = (m[2] || \"\");\n\n  const deg = (noteToPc(chordRoot) - keyPc + 12) % 12;\n\n  const degreeTable = mode === \"major\" ? DEGREE_TO_INDEX_MAJOR : DEGREE_TO_INDEX_MINOR;\n  const romanBase = mode === \"major\" ? ROMAN_NUMERALS_MAJOR : ROMAN_NUMERALS_MINOR;\n  const romanUpper = [\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\"] as const;\n  const idx = degreeTable[deg as keyof typeof degreeTable] as number | undefined;\n\n  if (idx !== undefined) {\n    let roman = (opts.uppercase ? romanUpper[idx] : romanBase[idx]) as string;\n    // preserve diminished mark when forcing uppercase\n    if (opts.uppercase) {\n      if ((mode === \"major\" && idx === 6) || (mode === \"minor\" && idx === 1)) {\n        roman += \"¬∞\";\n      }\n    }\n    if (!showQuality) return roman;\n    if (isMaj7(rest)) return roman + \"M7\";\n    if (hasGeneric7(rest)) return roman + \"7\";\n    return roman;\n  }\n\n  // Try single-step accidentals (# or b) relative to scale degrees\n  if (accidentalsForNonDiatonic) {\n    const scale = mode === \"major\" ? [0,2,4,5,7,9,11] : [0,2,3,5,7,8,10];\n    for (let j = 0; j < scale.length; j++) {\n      const s = scale[j];\n      if ((s + 1) % 12 === deg) {\n        return \"#\" + romanBase[j];\n      }\n      if ((s + 11) % 12 === deg) { // s - 1\n        return \"b\" + romanBase[j];\n      }\n    }\n  }\n  // Fallback: actual root\n  return `(${chordRoot})`;\n}\n\nexport function progressionToRoman(\n  chords: string[],\n  keyRoot: string,\n  mode: Mode\n): string[] {\n  return chords.map((c) => toRoman(c, keyRoot, mode));\n}\n\n\n","export type RomanToken = string; // e.g., 'I','vi','IV','V','bVII','vii¬∞'\n\nexport type Pattern = {\n  id: string;\n  name: string;\n  mode: 'major' | 'minor' | 'any';\n  seq: RomanToken[];\n  variants?: RomanToken[][];\n  summary: string;\n  tags?: string[];\n};\n\nexport const PATTERNS: Pattern[] = [\n  {\n    id: 'doo-wop',\n    name: 'Doo‚ÄëWop (I‚Äìvi‚ÄìIV‚ÄìV)',\n    mode: 'major',\n    seq: ['I','vi','IV','V'],\n    summary: \"50s/60s loop: I‚Üívi‚ÜíIV‚ÜíV back to I.\",\n  },\n  {\n    id: 'axis',\n    name: 'Axis (I‚ÄìV‚Äìvi‚ÄìIV)',\n    mode: 'major',\n    seq: ['I','V','vi','IV'],\n    summary: 'Modern pop four‚Äëchords loop.',\n  },\n  {\n    id: 'canon',\n    name: \"Pachelbel's Canon\",\n    mode: 'major',\n    seq: ['I','V','vi','iii','IV','I','IV','V'],\n    variants: [['I','V','vi','IV']],\n    summary: 'Pachelbel‚Äëstyle ground; long loop back to I.',\n  },\n  {\n    id: 'ii-V-I',\n    name: 'ii‚ÄìV‚ÄìI',\n    mode: 'any',\n    seq: ['ii','V','I'],\n    summary: 'The classic resolution run‚Äëup.',\n  },\n  {\n    id: 'turnaround',\n    name: 'Turnaround (I‚Äìvi‚Äìii‚ÄìV)',\n    mode: 'any',\n    seq: ['I','vi','ii','V'],\n    summary: 'Quick loop returning to the top.',\n  },\n  {\n    id: 'andalusian',\n    name: 'Andalusian (i‚ÄìVII‚ÄìVI‚ÄìV)',\n    mode: 'minor',\n    seq: ['i','VII','VI','V'],\n    summary: 'Classic minor descent; flamenco/Latin flavor.',\n  },\n  {\n    id: 'authentic',\n    name: 'Authentic cadence (V‚ÄìI)',\n    mode: 'any',\n    seq: ['V','I'],\n    summary: 'Perfect cadence V‚ÜíI.',\n  },\n  {\n    id: 'plagal',\n    name: 'Plagal cadence (IV‚ÄìI)',\n    mode: 'any',\n    seq: ['IV','I'],\n    summary: 'Gentle IV‚ÜíI resolution.',\n  },\n  {\n    id: 'deceptive',\n    name: 'Deceptive cadence (V‚Äìvi)',\n    mode: 'major',\n    seq: ['V','vi'],\n    summary: 'Deceptive V‚Üívi keeps motion going.',\n  },\n];\n\n// --- English microcopy for pattern tooltips ------------------------------\nexport type RomanPatternId =\n  | \"dooWop\"\n  | \"axis\"\n  | \"canon\"\n  | \"twoFiveOne\"\n  | \"turnaround\"\n  | \"andalusian\"\n  | \"authentic\"   // perfect V‚ÜíI\n  | \"plagal\"      // IV‚ÜíI\n  | \"deceptive\";  // V‚Üívi\n\nexport const PATTERN_LABEL_EN: Record<RomanPatternId, string> = {\n  dooWop: \"Doo‚ÄëWop (I‚ÄìVI‚ÄìIV‚ÄìV)\",\n  axis: \"Axis (I‚ÄìV‚Äìvi‚ÄìIV)\",\n  canon: \"Canon (I‚ÄìV‚Äìvi‚Äìiii‚ÄìIV‚ÄìI‚ÄìIV‚ÄìV)\",\n  twoFiveOne: \"ii‚ÄìV‚ÄìI\",\n  turnaround: \"Turnaround\",\n  andalusian: \"Andalusian cadence\",\n  authentic: \"Perfect cadence (V ‚Üí I)\",\n  plagal: \"Plagal cadence (IV ‚Üí I)\",\n  deceptive: \"Deceptive cadence (V ‚Üí vi)\",\n};\n\nexport const PATTERN_SUMMARY_EN: Record<RomanPatternId, string> = {\n  dooWop:\n    \"‚Äô50s progression. Nostalgic loop: tonic ‚Üí relative minor ‚Üí subdominant ‚Üí dominant. Try adding 7ths for color.\",\n  axis:\n    \"Modern pop staple. A catchy loop that feels forward yet stable. Swap to ii‚ÄìV at the end for a stronger landing.\",\n  canon:\n    \"Pachelbel‚Äëstyle ground. Persistent bass motion with rotating functions; great for variations and melodies.\",\n  twoFiveOne:\n    \"The classic run‚Äëup then land. Link by guide tones (3rd‚Üî7th). Works anywhere you want a clear resolution.\",\n  turnaround:\n    \"Short cycle that brings you back to the top (e.g., I‚ÄìVI7‚Äìii7‚ÄìV7). Use at phrase ends or between sections.\",\n  andalusian:\n    \"Descending minor flavor (e.g., i‚Äì‚ô≠VII‚Äì‚ô≠VI‚ÄìV). Adds drama; land clearly on the target chord.\",\n  authentic:\n    \"Strong homecoming: dominant pulls into tonic. Extend V with 7/9/13; keep the landing clean on I.\",\n  plagal:\n    \"Gentler IV ‚Üí I resolution. Use to soften endings or after a bright Lydian moment.\",\n  deceptive:\n    \"Twist the expectation: V ‚Üí vi instead of I. Keeps energy moving; return to I later for closure.\",\n};\n\nexport function patternInfoEN(id: RomanPatternId) {\n  return { label: PATTERN_LABEL_EN[id], summary: PATTERN_SUMMARY_EN[id] };\n}\n\n","// Quality Master Data - Single Source of Truth for chord qualities\n// Generated from /Users/nh/App/OtoTheory/docs/content/Quality Master.csv\n\nexport type QualityInfo = {\n  tier: 'Free' | 'Pro';\n  categoryJa: string;\n  categoryEn: string;\n  quality: string;\n  commentJa: string;\n  commentEn: string;\n};\n\nexport const QUALITY_MASTER: QualityInfo[] = [\n  // Free - Âü∫Êú¨ (Basics)\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨',\n    categoryEn: 'Basics',\n    quality: 'Major',\n    commentJa: 'Êòé„Çã„Åè„ÄÅ„Éè„ÉÉ„Éî„Éº„Å™Èüø„Åç„ÅÆÂü∫Êú¨„Å®„Å™„Çã„Ç≥„Éº„Éâ„ÄÇ',\n    commentEn: 'The fundamental chord for a bright and happy sound.'\n  },\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨',\n    categoryEn: 'Basics',\n    quality: 'm (minor)',\n    commentJa: 'Â∞ë„ÅóÂàá„Å™„Åè„ÄÅËêΩ„Å°ÁùÄ„ÅÑ„ÅüÈüø„Åç„ÅÆÂü∫Êú¨„Å®„Å™„Çã„Ç≥„Éº„Éâ„ÄÇ',\n    commentEn: 'The fundamental chord for a slightly sad and calm sound.'\n  },\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨',\n    categoryEn: 'Basics',\n    quality: '7',\n    commentJa: 'Ê¨°„ÅÆ„Ç≥„Éº„Éâ„Å∏ÈÄ≤„Åø„Åü„Åè„Å™„Çã„Çà„ÅÜ„Å™„ÄÅÂ∞ë„Åó‰∏çÂÆâÂÆö„Åß„Åä„Åó„ÇÉ„Çå„Å™Èüø„Åç„ÄÇ',\n    commentEn: 'A slightly unstable and stylish sound that creates a sense of resolution to the next chord.'\n  },\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨',\n    categoryEn: 'Basics',\n    quality: 'maj7',\n    commentJa: 'Êòé„Çã„Åè„ÄÅÊ¥óÁ∑¥„Åï„Çå„ÅüÈÉΩ‰ºöÁöÑ„Å™Èüø„Åç„ÄÇ',\n    commentEn: 'A bright, sophisticated, and urban sound.'\n  },\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨',\n    categoryEn: 'Basics',\n    quality: 'm7',\n    commentJa: 'Âàá„Å™„Åï„ÅÆ‰∏≠„Å´„ÄÅ„Åä„Åó„ÇÉ„Çå„Å™Èõ∞Âõ≤Ê∞ó„ÅåÂä†„Çè„Å£„ÅüÈüø„Åç„ÄÇ',\n    commentEn: 'A sound that adds a stylish atmosphere to sadness.'\n  },\n\n  // Free - Âü∫Êú¨„ÅÆÈ£æ„Çä‰ªò„Åë (Essential Colors)\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨„ÅÆÈ£æ„Çä‰ªò„Åë',\n    categoryEn: 'Essential Colors',\n    quality: 'sus4',\n    commentJa: '„É°„Ç∏„É£„Éº„Åß„ÇÇ„Éû„Ç§„Éä„Éº„Åß„ÇÇ„Å™„ÅÑ„ÄÅËß£Ê±∫„ÇíÂæÖ„Å§ÊµÆÈÅäÊÑü„ÅÆ„ÅÇ„ÇãÈüø„Åç„ÄÇ',\n    commentEn: 'A sound with a floating feel, neither major nor minor, awaiting resolution.'\n  },\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨„ÅÆÈ£æ„Çä‰ªò„Åë',\n    categoryEn: 'Essential Colors',\n    quality: 'sus2',\n    commentJa: 'sus4„Çà„Çä„ÇÇ„ÄÅ„Çà„ÇäÊòé„Çã„ÅèÁàΩ„ÇÑ„Åã„Å™ÊµÆÈÅäÊÑü„ÇíÊåÅ„Å§Èüø„Åç„ÄÇ',\n    commentEn: 'A sound with a brighter and fresher floating feel than sus4.'\n  },\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨„ÅÆÈ£æ„Çä‰ªò„Åë',\n    categoryEn: 'Essential Colors',\n    quality: 'add9',\n    commentJa: 'ÈÄöÂ∏∏„ÅÆ„Ç≥„Éº„Éâ„Å´„Ç≠„É©„Ç≠„É©„Åó„ÅüÈÄèÊòéÊÑü„ÇíÂä†„Åà„Çã„ÄÅÁèæ‰ª£„Éù„ÉÉ„Éó„Çπ„ÅÆÂÆöÁï™„ÄÇ',\n    commentEn: 'The go-to chord in modern pop, adding a sparkling transparency to a basic chord.'\n  },\n  {\n    tier: 'Free',\n    categoryJa: 'Âü∫Êú¨„ÅÆÈ£æ„Çä‰ªò„Åë',\n    categoryEn: 'Essential Colors',\n    quality: 'dim',\n    commentJa: '‰∏çÊ∞óÂë≥„ÅßÁ∑äÂºµÊÑü„ÅÆ„ÅÇ„ÇãÈüø„Åç„ÄÇ„Ç≥„Éº„Éâ„Å®„Ç≥„Éº„Éâ„ÇíÁπã„ÅêÊôÇ„Å´‰æøÂà©„ÄÇ',\n    commentEn: 'A spooky and tense sound, useful for connecting one chord to another.'\n  },\n\n  // Pro - ‚ú® „Ç≠„É©„Ç≠„É©„ÉªÊµÆÈÅäÊÑü (Sparkle & Float)\n  {\n    tier: 'Pro',\n    categoryJa: '‚ú® „Ç≠„É©„Ç≠„É©„ÉªÊµÆÈÅäÊÑü',\n    categoryEn: 'Sparkle & Float',\n    quality: 'M9 (maj9)',\n    commentJa: '„Éù„ÉÉ„Éó„Çπ„ÄÅR&B„ÅÆÁéãÈÅì„Åä„Åó„ÇÉ„Çå„Çµ„Ç¶„É≥„Éâ„ÄÇ',\n    commentEn: 'The quintessential stylish sound for Pop and R&B.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ú® „Ç≠„É©„Ç≠„É©„ÉªÊµÆÈÅäÊÑü',\n    categoryEn: 'Sparkle & Float',\n    quality: '6',\n    commentJa: 'maj7„Çà„ÇäÂ∞ë„Åó„É¨„Éà„É≠„ÅßÊ∏©„Åã„ÅÑÈüø„Åç„ÄÇ',\n    commentEn: 'A slightly more retro and warmer sound than maj7.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ú® „Ç≠„É©„Ç≠„É©„ÉªÊµÆÈÅäÊÑü',\n    categoryEn: 'Sparkle & Float',\n    quality: '6/9',\n    commentJa: '„Ç∏„É£„Ç∫„ÇÑ„Éï„É•„Éº„Ç∏„Éß„É≥„ÅßÂ§öÁî®„Åï„Çå„Çã„ÄÅÊòé„Çã„ÅèË±ä„Åã„Å™Èüø„Åç„ÄÇ',\n    commentEn: 'A bright and rich sound frequently used in Jazz and Fusion.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ú® „Ç≠„É©„Ç≠„É©„ÉªÊµÆÈÅäÊÑü',\n    categoryEn: 'Sparkle & Float',\n    quality: 'add#11',\n    commentJa: 'Áèæ‰ª£ÁöÑ„Åß„Éâ„É™„Éº„Éü„Éº„Å™„ÄÅ„Åæ„Åï„Å´„ÄåÊµÆÈÅäÊÑü„Äç„ÅÆ„ÅÇ„Çã„Çµ„Ç¶„É≥„Éâ„ÄÇ',\n    commentEn: 'A modern, dreamy sound that truly gives a \"floating\" feel.'\n  },\n\n  // Pro - üåÉ „Åä„Åó„ÇÉ„Çå„ÉªÈÉΩ‰ºöÁöÑ (Stylish & Urban)\n  {\n    tier: 'Pro',\n    categoryJa: 'üåÉ „Åä„Åó„ÇÉ„Çå„ÉªÈÉΩ‰ºöÁöÑ',\n    categoryEn: 'Stylish & Urban',\n    quality: 'm9',\n    commentJa: 'm7„Çí„Åï„Çâ„Å´„Çπ„É†„Éº„Ç∫„ÅßÊ¥óÁ∑¥„Åï„Åõ„ÅüÈüø„Åç„ÄÇ',\n    commentEn: 'An even smoother and more refined sound than m7.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: 'üåÉ „Åä„Åó„ÇÉ„Çå„ÉªÈÉΩ‰ºöÁöÑ',\n    categoryEn: 'Stylish & Urban',\n    quality: 'm11',\n    commentJa: 'Lo-fi Hip Hop„ÇÑR&B„ÅßÂÆöÁï™„ÅÆ„ÄÅÂ∞ë„Åó„Ç¢„É≥„Éã„É•„Ç§„Å™„Çµ„Ç¶„É≥„Éâ„ÄÇ',\n    commentEn: 'A standard sound in Lo-fi Hip Hop and R&B, with a slightly melancholic vibe.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: 'üåÉ „Åä„Åó„ÇÉ„Çå„ÉªÈÉΩ‰ºöÁöÑ',\n    categoryEn: 'Stylish & Urban',\n    quality: 'm7b5',\n    commentJa: '„Éû„Ç§„Éä„Éº„Ç≠„Éº„ÅÆii-V-I„ÅßÂøÖÈ†à„ÄÇ„Ç∏„É£„Ç∫„ÄÅ„Éú„Çµ„Éé„É¥„Ç°„Å∏„ÅÆÂÖ•„ÇäÂè£„ÄÇ',\n    commentEn: 'Essential for minor key ii-V-I progressions. Your gateway to Jazz and Bossa Nova.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: 'üåÉ „Åä„Åó„ÇÉ„Çå„ÉªÈÉΩ‰ºöÁöÑ',\n    categoryEn: 'Stylish & Urban',\n    quality: 'mM7',\n    commentJa: 'Êò†ÁîªÈü≥Ê•Ω„ÅÆ„Çà„ÅÜ„Å™„ÄÅ„Éü„Çπ„ÉÜ„É™„Ç¢„Çπ„Åß„Éâ„É©„Éû„ÉÅ„ÉÉ„ÇØ„Å™Èüø„Åç„ÄÇ',\n    commentEn: 'A mysterious and dramatic sound, reminiscent of a movie soundtrack.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: 'üåÉ „Åä„Åó„ÇÉ„Çå„ÉªÈÉΩ‰ºöÁöÑ',\n    categoryEn: 'Stylish & Urban',\n    quality: 'm6',\n    commentJa: '„Ç∏„É£„Ç∫„ÇÑÊò†ÁîªÈü≥Ê•Ω„ÅßËÄ≥„Å´„Åô„Çã„ÄÅÂ∞ë„Åó„É¨„Éà„É≠„Åß„Éü„Çπ„ÉÜ„É™„Ç¢„Çπ„Å™Èüø„Åç„ÄÇ',\n    commentEn: 'A slightly retro and mysterious sound, often heard in jazz and film scores.'\n  },\n\n  // Pro - ‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ (Tension & Spice)\n  {\n    tier: 'Pro',\n    categoryJa: '‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ',\n    categoryEn: 'Tension & Spice',\n    quality: '7sus4',\n    commentJa: 'V7„ÅÆÂâç„Å´ÁΩÆ„Åè„Åì„Å®„Åß„ÄÅËß£Ê±∫ÊÑü„ÇíÂäáÁöÑ„Å´È´ò„ÇÅ„Çã„Éó„É≠„ÅÆÊäÄ„ÄÇ',\n    commentEn: 'A pro technique that dramatically enhances the feeling of resolution when placed before a V7 chord.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ',\n    categoryEn: 'Tension & Spice',\n    quality: 'aug',\n    commentJa: '‰∏çÂÆâÂÆö„Åß„ÄÅÊ¨°„ÅÆ„Ç≥„Éº„Éâ„Å∏ÈÄ≤„ÇÄÊé®ÈÄ≤Âäõ„ÅåÂº∑„ÅÑ„ÄÇ',\n    commentEn: 'An unstable sound with a strong drive to move to the next chord.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ',\n    categoryEn: 'Tension & Spice',\n    quality: 'dim7',\n    commentJa: 'ÁµåÈÅé„Ç≥„Éº„Éâ„Å®„Åó„Å¶ÈùûÂ∏∏„Å´‰æøÂà©„ÄÇÁ∑äÂºµÊÑü„Çí‰∏ÄÊ∞ó„Å´È´ò„ÇÅ„Çã„ÄÇ',\n    commentEn: 'Very useful as a passing chord to instantly increase tension.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ',\n    categoryEn: 'Tension & Spice',\n    quality: '7(#9)',\n    commentJa: '„Éñ„É´„Éº„Ç∏„Éº„Åß„É≠„ÉÉ„ÇØ„Å™Á∑äÂºµÊÑü„ÄÇ',\n    commentEn: 'A bluesy and rock-oriented tension.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ',\n    categoryEn: 'Tension & Spice',\n    quality: '7(b9)',\n    commentJa: '„Ç∏„É£„Ç∫„ÅßÂ§öÁî®„Åï„Çå„ÇãÂº∑„ÅÑÁ∑äÂºµÊÑü„ÄÇ',\n    commentEn: 'A strong tension frequently used in Jazz.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ',\n    categoryEn: 'Tension & Spice',\n    quality: '7(#5)',\n    commentJa: 'aug„Å®Âêå„Åò„ÄÇËß£Ê±∫ÂÖà„ÇíÂº∑„ÅèÁ§∫„Åô„ÄÇ',\n    commentEn: 'Same as augmented. Strongly indicates the point of resolution.'\n  },\n  {\n    tier: 'Pro',\n    categoryJa: '‚ö°Ô∏è Á∑äÂºµÊÑü„Éª„Çπ„Éë„Ç§„Çπ',\n    categoryEn: 'Tension & Spice',\n    quality: '7(b13)',\n    commentJa: 'Ë§áÈõë„Åß„É†„Éº„Éá„Ç£„Éº„Å™Á∑äÂºµÊÑü„ÄÇ',\n    commentEn: 'A complex and moody tension.'\n  }\n];\n\n// Helper functions\nexport const getQualityInfo = (quality: string): QualityInfo | undefined => {\n  return QUALITY_MASTER.find(q => q.quality === quality);\n};\n\nexport const getProQualities = (): string[] => {\n  return QUALITY_MASTER.filter(q => q.tier === 'Pro').map(q => q.quality);\n};\n\nexport const getFreeQualities = (): string[] => {\n  return QUALITY_MASTER.filter(q => q.tier === 'Free').map(q => q.quality);\n};\n\nexport const isProQuality = (quality: string): boolean => {\n  return QUALITY_MASTER.some(q => q.quality === quality && q.tier === 'Pro');\n};\n\nexport const getQualityComment = (quality: string, locale: 'ja' | 'en'): string => {\n  const info = getQualityInfo(quality);\n  if (!info) return '';\n  return locale === 'ja' ? info.commentJa : info.commentEn;\n};\n\nexport const getQualitiesByCategory = (tier: 'Free' | 'Pro'): Record<string, QualityInfo[]> => {\n  const filtered = QUALITY_MASTER.filter(q => q.tier === tier);\n  const grouped: Record<string, QualityInfo[]> = {};\n  \n  filtered.forEach(q => {\n    if (!grouped[q.categoryJa]) {\n      grouped[q.categoryJa] = [];\n    }\n    grouped[q.categoryJa].push(q);\n  });\n  \n  return grouped;\n};\n","export type Plan = 'free' | 'pro';\nexport type NotationStyle = 'english' | 'compact' | 'jazz';\n\nexport type Family = 'maj'|'min'|'dom'|'sus'|'dim'|'aug'|'power';\nexport type Seventh = 'none'|'6'|'maj7'|'7'|'m7'|'m7b5'|'dim7';\nexport type ExtMode = 'add'|'tension';\n\nexport type Extensions = {\n  add9?: boolean; add11?: boolean; add13?: boolean;\n  nine?: boolean; eleven?: boolean; thirteen?: boolean;\n};\n\nexport type Alterations = { b9?:boolean; s9?:boolean; s11?:boolean; b13?:boolean; alt?:boolean; };\n\nexport type ChordSpec = {\n  root: string;\n  family: Family;\n  seventh: Seventh;\n  extMode: ExtMode;\n  ext: Extensions;\n  alt: Alterations;\n  sus?: 'sus2'|'sus4'|null;\n  slash?: string|null; // /bass\n};\n\nexport type ChordContext = {\n  plan: Plan;\n  notationStyle: NotationStyle; // default: 'english'\n};\n\nexport const DEFAULT_CONTEXT: ChordContext = { plan: 'free', notationStyle: 'english' };\n\n\n\n"],"names":[],"mappings":"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"}
# Phase E-1: Fretboard 受け入れ確認チェックリスト

**作成日**: 2025-10-12  
**Phase**: E-1 Fretboard Component  
**想定利用シーン**: **スマホ横向きでフレットボード全体を見て、スケールトーン・コードトーンを確認**

---

## 🎯 主要ユースケース

### シーン1: スケール全体を確認
1. ユーザーがスマホを**横向き**にする
2. Key/Scale を選択（例: C Major）
3. **フレットボード全体（15フレット）が見える**
4. **スケールトーンが全て可視化**されている
5. タップで各音を試聴できる

### シーン2: コードトーンを確認
1. スマホを横向きにした状態
2. Diatonic Tableでコードをタップ（例: C Major）
3. **コードトーンがフレットボード上で強調表示**
4. **スケールトーンは薄く（ゴースト）表示**
5. コードの構成音が一目で分かる

### シーン3: 度数表示で理論学習
1. スマホ横向き
2. Degrees/Names トグルで**度数表示に切り替え**
3. Root（1）、3rd（3/b3）、5th（5）、7th（7/b7）が確認できる
4. 音楽理論の学習に役立つ

---

## ✅ 受け入れ基準（DoD）

### レイアウト・表示

| 項目 | 基準 | ステータス |
|------|------|-----------|
| **横向き対応** | スマホを横にすると15フレット全体が見える | 🔜 |
| **縦向き対応** | スマホ縦でも使える（スクロール可能） | 🔜 |
| **6弦表示** | E-B-G-D-A-E（高→低）が正しく表示 | ✅ |
| **15フレット** | フレット1-15が表示される | ✅ |
| **Open string** | 開放弦マーカー表示 | 🔜 |
| **フレット番号** | 3, 5, 7, 9, 12, 15にドット表示 | ✅ |
| **ナット線** | 太い線で開放弦とフレット1の境界 | ✅ |

### 二層Overlay システム

| 項目 | 基準 | ステータス |
|------|------|-----------|
| **Scale層（ゴースト）** | 小さい、薄い、輪郭のみ | 🔜 |
| **Chord層（メイン）** | 大きい、塗りつぶし、ラベル付き | 🔜 |
| **度数表示** | 1, 2, 3, b3, 5, b7等が表示 | 🔜 |
| **音名表示** | C, D, E, F, G等が表示 | 🔜 |
| **Root強調** | Root音が特別色で強調 | 🔜 |
| **3rd/5th/7th色分け** | 各度数で段階的に色分け | 🔜 |
| **Reset機能** | Chordのみクリア、Scaleは保持 | 🔜 |

### インタラクション

| 項目 | 基準 | ステータス |
|------|------|-----------|
| **タップで試聴** | フレット上をタップすると単音が鳴る | 🔜 |
| **Degrees/Names切り替え** | トグルボタンで切り替え可能 | 🔜 |
| **Resetボタン** | Chord層のみリセット | 🔜 |
| **視覚フィードバック** | タップ時に視覚的フィードバック | 🔜 |

### パフォーマンス

| 項目 | 基準 | ステータス |
|------|------|-----------|
| **描画速度** | 横向き切り替え時にラグなし | 🔜 |
| **タップ反応** | タップから音まで100ms以内 | 🔜 |
| **スクロール滑らか** | 縦向きでスクロールが滑らか | 🔜 |

---

## 📱 横向きUI設計

### レイアウト戦略

**横向き（Landscape）**:
```
┌─────────────────────────────────────────────────────────┐
│ [Key: C] [Scale: Major]     [Degrees/Names]  [Reset]    │ ← Header
├─────────────────────────────────────────────────────────┤
│ E  o─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─                   │
│ B  o─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─  ← Fretboard全体    │
│ G  o─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─     が見える      │
│ D  o─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─                   │
│ A  o─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─                   │
│ E  o─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─                   │
│      0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15              │
└─────────────────────────────────────────────────────────┘
```

**縦向き（Portrait）**:
```
┌───────────────────┐
│ [Key] [Scale]     │
│ [Degrees] [Reset] │
├───────────────────┤
│ E  o─┬─┬─┬─┬─┬─  │
│ B  o─┬─┬─┬─┬─┬─  │ ← 一部のみ表示
│ G  o─┬─┬─┬─┬─┬─  │    スクロール可能
│ D  o─┬─┬─┬─┬─┬─  │
│ A  o─┬─┬─┬─┬─┬─  │
│ E  o─┬─┬─┬─┬─┬─  │
│    0 1 2 3 4 5    │
│                   │
│ ← スクロール →    │
└───────────────────┘
```

### サイズ調整

**横向き最適化**:
- フレット幅: 動的計算（画面幅に合わせる）
- 弦高: 画面高さの1/8程度
- マーカーサイズ: 見やすい大きさに拡大
- フォントサイズ: 横向きで読みやすく

**縦向き対応**:
- ScrollViewで横スクロール可能
- フレット幅: 固定（28px）
- ピンチズーム対応（将来実装）

---

## 🎨 視覚デザイン

### Scale層（ゴースト）
- サイズ: 10pt円（小さい）
- 色: グレー、透明度40%
- スタイル: 輪郭のみ（stroke）
- 位置: フレット中央

### Chord層（メイン）
- サイズ: 18pt円（大きい）
- 色: 度数別（Root/3rd/5th/7th）
- スタイル: 塗りつぶし（fill）
- ラベル: 度数または音名、白文字

### 色システム
- Root: オレンジ（#FF6B35）
- 3rd: ブルー（#4A90E2）
- 5th: グリーン（#50C878）
- 7th: パープル（#9B59B6）
- その他スケール音: グレー（#95A5A6）

---

## 🧪 テスト手順

### 手順1: 横向き基本表示
1. アプリ起動
2. Find Chords タブを開く
3. **スマホを横向きにする**
4. ✅ フレットボード全体（15フレット）が見える
5. ✅ 6弦が正しく表示
6. ✅ フレット番号ドットが見える

### 手順2: Scale層表示
1. 横向きのまま
2. Key: C, Scale: Major を選択
3. ✅ スケールトーンが全フレットボードに表示
4. ✅ Root（C音）が強調表示
5. ✅ 他のスケール音が薄く表示

### 手順3: Chord層表示
1. 横向きのまま
2. Diatonic Tableで「C」をタップ
3. ✅ C-E-Gが大きく表示
4. ✅ スケールトーンが薄く（ゴースト）表示
5. ✅ 二層が同時に見える

### 手順4: 度数表示切り替え
1. 横向きのまま
2. Degrees/Namesトグルをタップ
3. ✅ 度数表示（1, 3, 5等）に切り替わる
4. もう一度タップ
5. ✅ 音名表示（C, E, G等）に戻る

### 手順5: Reset機能
1. 横向きのまま
2. Resetボタンをタップ
3. ✅ Chord層がクリアされる
4. ✅ Scale層は残っている

### 手順6: タップ試聴
1. 横向きのまま
2. フレットボード上の任意の位置をタップ
3. ✅ 単音が鳴る
4. ✅ 視覚的フィードバック（一瞬光る等）

### 手順7: 縦向き動作確認
1. スマホを縦向きに戻す
2. ✅ フレットボードがスクロール可能
3. ✅ 機能は横向きと同じ
4. ✅ レイアウトが自然に調整

---

## 📊 受け入れ判定

### Phase E-1完了基準
- [ ] 横向きで15フレット全体が見える
- [ ] Scale層（ゴースト）表示
- [ ] Chord層（メイン）表示
- [ ] 二層が同時に表示
- [ ] Degrees/Names切り替え
- [ ] Resetボタン動作
- [ ] タップで単音試聴
- [ ] 縦向き対応（スクロール）

### 確認者
- [ ] 開発者自己確認
- [ ] ユーザー確認

### 承認日
- 承認日: _____________
- 承認者: _____________

---

## 🔄 次のフェーズへの条件

Phase E-2（Diatonic Table）に進むには：
1. ✅ 上記の受け入れ基準を全て満たす
2. ✅ 横向きでの使用感が良好
3. ✅ パフォーマンスに問題なし
4. ✅ ユーザー承認

---

**最終更新**: 2025-10-12  
**ステータス**: Phase E-1実装中、横向き対応設計完了

